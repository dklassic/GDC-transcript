So, hello everyone.
I think we can get started.
Please turn off your phone and let's do it.
So, today I'm going to talk to you about dialogues and systems.
My name is Remy Boischot and I'm a game designer fascinated by the intersection of gameplay, systems, and narrative, with a special interest for dialogue systems.
We've done some work on system-driven dialogue, which I hope you will find interesting.
And this is what I'm going to present you today.
So I work at a studio called Hangar 13 in Novato, California, about 30 minutes north of San Francisco.
And on October 7th, we released, last year, 2016, we released a game called Mafia 3 on PlayStation 4, Xbox One, and PC.
I am from France, and I pursued a master's degree in management and game design in Super 4 Game Rubica, France, where I graduated in 2012.
During my student time, I performed an internship in Dark Potato Studios in Singapore.
At the end of my studies, I accepted a position as a junior game designer at 2K Czech in the wonderful city of Prague, Czech Republic.
And a few years later, I was transferred to Hunger 13, where I work today.
So Mafia III is an upholdment game on organized crime set in 1968 in a city called New Bordeaux, Louisiana, USA, inspired by the real city of New Orleans.
You play the game as Lincoln Clay, a Vietnam veteran who wages war on the local mafia.
In Mafia 3, after being betrayed by the mob, you have to conquer three districts from the Mafia, which enables you to collaborate with three underbosses.
Vito, the main protagonist from Mafia 2, here on the left, and two major new characters in the franchise, Burke, on top here, and Cassandra.
Lincoln, the hero, is on the right.
So after all the underbosses have been unlocked, your objective is to conquer six new districts, which you can allocate to any of the three underbosses.
How you divide territory influences the economy, the rewards, the weapons, and the perks that you get, but it also has a great impact on the characters' reactions, the game structure, through unique missions, and the ending of the game.
So quick survey here, who in the audience have played Mafia III?
Okay.
So for those who haven't played the game, after you've unlocked all three on the bosses, the structure goes like this.
First, you go after individual rackets run by the mob.
For example, the construction rackets in the downtown district.
After you've conquered a racket, you have to call one of your underbosses.
They will each give you unique rewards.
After the call, men from the faction you have chosen populate the racket, which becomes a friendly location.
For example, the Haitian faction, run by Cassandra.
Note that this faction change is temporary.
So the ender bosses agree to help you in the short term, but a racket is fully under control of a character only if the whole district was conquered and assigned to them.
We'll come to that shortly.
There are two rackets per district.
You conquer the second racket in downtown, the blackmail market.
And after the second racket is conquered, again you have to call one of the boss.
You can choose to assign the second racket in the district to the same on the boss, although the rewards offered are a bit less interesting, or to choose another one.
Conquering both rackets of a district unlocks a unique mission, in which you can take out the district boss, who reports directly to Sal Marcano, the mafia boss in New Bordeaux.
Just after the mission, a complex dialogue sequence called sit down is triggered to permanently assign the district.
All characters will try to convince you to give them the new territory, and they will have a reaction based on who you choose.
So there are two possibilities coming in a sit down.
First possibility, both rackets were secured by the same character.
or you have split the district between two underbosses who each secured one racket.
So the racket assignments through the telephone call is a sort of promise that you do to a character.
And when you choose an underboss to run a district, the decision is final, and all rackets in the district are reassigned based on your decision.
So I'm going to show you in-game what a sit-down looks like.
In the situation you're going to see, you have conquered Downtown and it's the first district that you have taken down. Downtown is split between two characters. You call Vito to hold the first racket and you call Cassandra for the second one. Now pay attention to what they say.
This is our first step toward breaking Markano and taking over the city.
I hear what y'all got to say, but I decide who gets the turf.
And in the end, my decision is final.
Well, hear this, Lincoln.
You can make any final decisions you wanna make.
But splitting the action in one of these districts between my men and theirs ain't happening.
This turf comes to me.
White boys are your problem.
Jesus, shut the fuck up. My guys aren't down there boozing with the neighbors or igniting some kind of race war. They're making money. For you. That's all that matters. So forget all this hippie bullshit and let's get to work. And don't let it change your mind lad. I can handle both rockets without any of the bitchin' these two got going on right now. So because both Cassandra and Vito hold one racket, they each expect the district to be theirs.
Burke, on the other hand, is less aggressive about it.
So here the decision is still completely open for the player.
You can still choose any of the underbosses.
So today I'm going to talk specifically about two main components of the system-driven dialogue work that we have performed on Mafia III.
First, the loyalty system.
Before the dialogue experience.
We built a relationship system first, based on territory division.
And I'm going also to talk about dialogue design, and specifically how we built a library of dialogues that would reflect the loyalty system in a meaningful way.
Before we begin, small definition of system-driven dialogue.
So for me, system-driven dialogue reflect the rules and status of a game system.
conveying expectations, relationships, consequences, and history between characters.
And all of that is being driven by a set of rules, states, modifiers, possible interactions, and choices.
Some examples that use system-driven dialogues.
The Civilization games with varying relationships with each AI rival.
the football manager series, where you have to talk, motivate, and negotiate contracts with your players, and The Sims, even though they use an abstract language to convey moods and emotions.
So in games, these types of dialogue are only reflected by, usually only reflected by a limited amount of lines, sometimes with voiceover, but usually only with text.
In Mafia 3, we built a big library of voiceover dialogues driven by a complex state of rules.
And Sit Downs is our attempt to explore emotional and gameplay depth in system-driven dialogues.
So before we start here, I want to present you the development timeline.
and decisions exactly how they happened, but rather they are shown easier to digest.
The reality is a bit more granular than what I present.
I know I have some colleagues in the audience.
Please don't call me a liar.
Or at least wait until the end of the presentation.
So my initial mission was to design the relationship system that would drive the logic behind all the choices and their consequences on characters and the game structure.
I knew a few things, starting working on the loyalty system.
There are three underbosses to choose to assign territory.
Six open districts to assign in total.
And two rackets to assign per district, so 12 in total.
The rackets are assigned temporarily in the phone call and the final decision for the district in sit-down sequences takes priority.
Based on the choices performed, up to two underbosses can decide to leave the crime operation completely, only leaving you with one underboss at the end of the game.
The player can accomplish side activities for each character to improve the relationship with them.
And the final result of the loyalty system influences the multiple endings of the game.
So these were my design constraints.
From these constraints, we set some creative goals for the future.
We wanted first to design a real system behind these choices, not having anything scripted or forced or cheated.
We wanted tension to escalate throughout the game.
Actual consequences on the game structure and the economy.
On the bosses being able to drop out of the operation was a good start.
And we wanted dialogue delivery, animation, poses, and facial expression as the primary form of the system feedback loop.
So we didn't want any relationship score, bar, or text to drive the experience.
I wanted players to focus on dealing with egos and demanding personalities.
And that was for me one of the most challenging goal.
And then we wanted no dialogue game, as in interactive dialogue systems.
All interactions with the loyalty system are based on territory division, so rackets and district assignments.
And optionally, side activities.
So keeping everybody happy would mean doing some compromises in terms of the short-term rewards that you would be getting.
Each character would offer a different set of perks.
appealing to different kinds of players.
So these were my player-facing goal.
I had also defined goals for the underbosses themselves.
After all, I was designing a simple AI system, so I needed a direction to define the basic concepts that would drive their persona.
So these AI concepts are reflected through modifiers.
The first concept for the underbosses is greed.
They get some points for gaining a racket.
They get some points for gaining a district.
They lose points for losing a racket.
The second concept is impatience.
Underbosses dislike being ignored, and when they are not chosen for a district, they lose points.
Since there are three characters for each district to assign, there are more points to lose than to gain.
And with this simple balance, escalating tension was achieved.
So this can be overcome by making cautious racket and district choices and doing side activities for each character.
And finally, characters didn't need to be aware of more things than what they were exposed to.
So if I call an underboss.
to secure a racket that won't make the other characters upset.
They don't even know they haven't been caught.
So these AI concepts are rather simple and natural.
I don't need a lot of explanation done in game for the player to understand these rules.
So I knew my modifiers.
Now I needed to define the different states influenced by these modifiers.
I started with the base states that are purely modifier driven.
Imagine a zero to a hundred scale.
And these states were content, neutral, and angry.
So these would be the states of the characters for a majority of the time.
Underbosses start neutral.
Then we have what we call overwrite states.
These are influenced by modifiers, but can ignore the usual logic by having some specific rules.
The first override state is ultimatum.
It's triggered as a sort of last chance to make this right with a character who had enough.
It was introduced to make sure that the tension escalation was not too extreme, and only one character can reach the ultimatum states throughout the whole game.
When things are really bad with a character, the worst state is triggered.
Things are serious now.
The underboss quits the operation, sends heat squads against you in the open world.
All the faction characters in the city attack you on sight.
Here, there's no turning back.
Characters at war unlock a unique mission which enables you to kill them.
And once you've killed an underboss, they are dead.
The associate takes over the operation and the situation returns to a status quo.
Although the perks from this faction are frozen for the rest of the game.
So with the loyalty system defined on paper, we needed a prototype.
We included Mafia real open structure.
You're not forced to complete a district you started playing, so the game can be finished in numerous ways.
We included all hideout and racket assignment choices, their consequences on the state of the underbosses, and how they would be reflected in the dialogue.
Some balancing capability, including the completion of side activities for bonus loyalty points.
We used Twine for the prototype, and it was really great because it's very easy to use.
Now, We needed to collaborate with the writing team.
We were just two designers on the prototype.
So with the writing team, we defined a vision for the scene itself, for the sit-down scene itself, where and how it takes place.
So we selected an old abandoned mansion in the bayou that you can see on this concept art.
Then we needed to define how the scene would actually take place.
We had a prototype with design text, but what is it going to actually look like in the final game?
First, Lincoln walks in and is greeted by one character.
Lincoln makes an introduction, announcing the district at stake or any other big announcement.
Then each character makes a pitch, back to back, trying to convince the player to give them the district.
So first character, second, and third.
Then it's time for the charts.
The player can see the rewards and penalties for each character, and they say something each time you highlight them.
Here focus on Vito and his rewards, Burke and Cassandra.
After you've selected a character to run the district, Lincoln announces the decision.
Each character reacts back to back.
First reaction, second, and third reaction.
And finally, Lincoln sends everyone home.
So as a recap, you can see the skeleton of a sit-down here.
Sometimes we break these rules when we have big, special moments, like a character going into an ultimatum or wild state, but this is how it works for the majority of sit-downs.
So now we need to define how we would approach dialogue scoping.
In the prototype, we had simple design text with variables and conditions inside the text.
So for example, I have two rackets and I am content.
But I didn't know how these variables would translate when we would scope the actual dialogue lines.
So through the dialogues, we needed to convey three pieces of information.
It was important for the dialogue to first serve the system.
Dialogues needed to convey the loyalty states of the on the bus, how many rackets this occurred in the district, two, one, or zero, and state transitions, positive and negative changes in the system.
So there are interesting examples of actual viable audio design in sports commentaries, with announcers talking about game scores and statistics in a smooth and natural way, but it's very hard to produce well.
And here, we were created of a narrative and emotional experience, not really talking about stats.
So the resolution was clear, we would define individual dialogue assets, which would reflect the combination of the loyalty states, number of rackets held, and any other condition that the underbosses would react on.
Then it would be all about the writing and the performance.
We would need a lot of individual assets to support the game system, but we believed it was the right direction, sorry.
We would also have to define a broad dialogue library that could survive designer iterations and create variety.
And because we would have such a big amount of lines, thinking in branches would be unmanageable.
So when I talk about branches, think interactive dialogue systems like Mass Effect or The Walking Dead.
In these games, the dialogue structure branches out and in, depending on the choices performed.
Here, we would approach the dialogue design with a database mindset, rather than controlled branches.
In addition to the loyalty states and number of racket secured, we needed additional direction for the dialogue scoping.
The first direction is that all transitions from one dialogue to the other must sound smooth when played back to back.
And there are many possible permutations.
All the underbosses would talk individually, there's no group talk.
And we would use talking positions for branches.
So for pitches and reactions, if you remember, characters talk back to back.
first, second, and third.
Here, whether our characters talk first, second, or third, enables us to write the dialogue so characters bounces off of each other.
And that makes the dialogue feel more alive.
Branching dialogue has a set of advantages in the writing.
It definitely feels more natural.
So after the initial writing pass and dialogue scoping, We implemented the dialogue in the prototype and see how it felt.
So now we are going to see how the numbers of hideouts in the loyalty states are conveyed through dialogue.
My guys are working the action here just like you asked.
I figure you called us in for a reason.
I also figure you ought to just keep us there.
Half this turf is in our hands.
Sending it anywhere else would be a slap in the fucking face.
What you need, pal, is someone who's going to tell you what you need to hear, whether you like it or not.
And so far, you've been fucking me ever since we took care of Greco.
That fucking ends right now.
So you can see that we can convey a lot through writing, dialogue delivery, and animation, and poses.
That writing pass gave a lot of character to the system through the personalities of Burr, Cassandra, and Vito, who you saw.
The dialogues were serving the system design still really well.
There was no information loss from the design text.
However, we felt that the dialogues were too simplistic to create an emotional response from the player past the first couple of sit-downs.
Characters felt robotic, and although their loyalty state could evolve, they felt stupid and unresponsive.
So at this point, we needed to define an update.
And I was told something that I actually love to hear as a game designer.
It was something like, define as many dialogues as you want.
If you want 500 dialogue lines per character to make your system compelling, just do it.
Aim for quality.
Luckily, there was no producer in the room.
So I could follow that advice blindly.
So the new goal was quality.
I had to create a set of more interesting dialogues for the underbosses to say on top of the library that we had already defined.
So here, I wondered about complexifying the system.
to produce different results.
After all, the loyalty system is an AI system, and so having just one global state contains neutral, angry ultimatum to reflect a person's emotions is quite simplistic.
It was no wonder my characters failed to create an emotional response.
But really I kept teaching more complex solutions.
First reason is that I can't really think about complex systems.
I like to keep things in control.
And in control means simple.
But the big thing was that actually the system felt right.
I was actually happy with the outcomes of the system.
If I looked at the numbers, the spacing, the structure, the consequences, the tension escalation, the system felt right.
So my resolution was to keep the loyalty system as it was.
One state per character with the set of states that I had available.
And then.
build on the player's perception to create agency through an additional set of statistics for the underbosses to better react on choices and appear smarter than what they really are.
So I started brainstorming about interesting statistics for the underbosses, and I wanted to make the first and last sit-down feel unique.
The lines you heard in the first video are specific to the first sit-down.
I wanted to explore that notion of greed again, and for the underbosses to react and remember when rackets were taken away from them.
I also went back to the concept of impatience.
Characters would complain that they have no district yet, and how many sit-downs they spent without a district assigned.
And I also wanted to explore more concepts, which were not reflected by the game system, but which I found interesting.
Jealousy, for example.
Underbosses would complain about one of their rival being chosen for a district, and if they were the least powerful underboss in the city.
I also wanted to explore cockiness.
Characters would mention that they've gotten the last district, and if they are the most powerful underboss in the city.
And this doesn't even cover everything that we put in the system.
There are lots of different reactions we defined based on how cool and interesting events and statistics that we thought.
So I'm going to show you examples of what the extended dialog scope brought to the system.
In that example, we are going to see different pitches from Vito.
For these dialogs, Vito is neutral.
He holds, Vito holds one racket in the district.
And then he reacts on additional statistics of the game.
So pay attention to each dialogue and try to guess what the statistic is each time.
We all make mistakes, ain't nothing more true.
Think for example, you asking me to secure the last district and they're not giving it to me.
Your mistake.
Me allowing you to get away with it again?
That would be mine.
Only action I got right now is River Row.
And as exciting as that is, I'm ready for more.
You got me working half this turf already.
Piece of cake to give me the whole thing.
I'm not one for bitching and moaning.
Never saw much use for it.
That said, I got the least amount of power in this town, and you're giving me half this turf.
Someone here's getting fucked.
Better not be me.
El Burke ain't sobered up for when you gave him the last piece of the action.
I already got one of these rackets.
Give the mick a chance to dry out and send this turf my way.
No disrespect, but giving potato lover over there part of this city is like throwing it away.
I got half this turf secured for you.
So if you want this thing, we gotta make real money.
Send it my way.
Not everyone in this town is as open-minded as I am.
So spreading the Haitians out across this city like giving them their last district is gonna bring some unwanted attention.
But me and my boys, with this bit of action you put us on...
We blend in. Here's the truth.
Cassandra's dangerous.
Hey, I'm sorry, honey, but it's true.
She's looking for a war to fight, while I'm just trying to run a business.
I got half this turf locked up, and I want the rest.
You got a plan, a reason you're working things the way you are, and I respect that.
After busting my ass on the last district, I came in and took care of half of this one.
I see no reason I can't handle the whole thing.
Ain't no one at this table running more action for you than me.
On top of that, my guys already got half the rackets in this area locked down.
Just keep the shit coming my way, that's all I'm getting at.
So there are even, actually even more dialogues that Vito could have said.
We have variations on each statistic and each set of statistic.
So in total, we have about 850 dialogue lines allowed by the system, all characters included.
In one sit down, only about 20 are selected.
So if you do the math, only between two and 3% of the database is used per sit down.
250 dialogues per on the bus, and about 100 for Lincoln.
And so with six sit-downs in the game, the player is going to only see about 15% of the whole database.
We really tried to reflect the player's unique play through and set of choices.
So the results we were getting from the extended dialog scope were satisfying.
The characters felt more responsive, more alive, and smarter.
But really behind the scenes, the system was still dead simple.
But what the characters would say was perceived as a deep and complex system.
So at this point we had the extended assets ready and we needed to accomplish one more step before the actual final implementation of the full scene.
It was defining the rules of the dialogue flow.
And because of the extended dialog scope, we couldn't really use Twine anymore to figure out the rules.
The tool is not really ready to handle a big text database.
But we still really needed to see clear examples of different sit-down sequences, how the sit-down sequences would flow with actual writing.
And I had the assets ready, so it was time to put them together.
If you take the sit down flow again, you can see that there is one character selected for the greeting, but which one of the three?
During the pitch and reaction sequences, all characters talk back to back, but in which order?
I didn't want, here I didn't want to define an arbitrary order.
I wanted the dialogue sequence to flow as nicely as possible.
And that meant defining rules.
However, here I had really no tool to help me figure it out.
So my solution was simple.
I would define different scenarios randomly.
And then select and structure the dialog assets like puzzle pieces that would create a sequence that felt natural, engaging, and that would best reflect the scenario.
So from my results, and because I generated a lot of different scenarios, I then analyzed the results I produced to be able to extract dialog rules that would drive the sequence as a whole.
So we were ready for the final implementation and see the results in the game.
So let's go back to our initial example.
If you remember, it's the first sit down and the district is split between Vito and Cassandra who both have one racket secured.
And to let to change your mind lad, I can handle both rackets without any of the betchin these two got going on right now.
You start dangling territory in front of me and then snatch it back.
This agreement we had, it ain't gonna last.
You gotta see all the angles, Lincoln.
We got a long road ahead of us.
Don't make the wrong first step, lad.
What's the word, Lincoln?
Gonna need Vito to run this turf.
This the kind of shit that breaks the spirit of folk.
You do well to keep that in mind.
My fucking time.
Always knew you had a good head on your shoulders.
If I stay here any longer, my head's gonna fucking explode.
We're done for now.
You'll hear from me if I need you.
So here in that sequence, Cassandra lost her racket.
She was content.
She transitioned to an angry state.
Vito was content and stayed content, and Burke stayed neutral.
So being able to finally experience sit-downs in-game, we validated some choices and learned a few things.
Some playtesters actually asked for loyalty meters, but it was such a small portion that we felt it was more related to previous games that they played rather than a design flow.
So from the dialogue, performance, and animation, they were able to figure it out.
So no need for spoon feeding here.
One result felt apparent, though.
The underbosses flipped states very quickly and in situations which appeared unfair.
That wasn't really a problem with the prototype, but it was very real when confronted with the characters in game.
And as a general feedback, all results of sit-down sequences felt like lose-lose situations, where if the player chose one on the bus, the other two always got upset.
I had to rethink the loyalty system then.
So this time, I knew that the issue was not only about perception.
My game system was perceived as unfair.
And that was a core issue, not a superficial one.
And because I had defined the loyalty concept clearly for the underbosses, remember, greed and impatience.
So here you see that greed, the greed part is straightforward.
It's logical, everyone can understand it.
You get money, it gets better.
You lose money, it gets worse.
It's fair.
It's really the impatience part that people had problem with and make the underbosses seem annoying and ungrateful.
So I introduced a new concept, the gap.
Basically it means that another boss would have a penalty only if he or she has been ignored at least two districts in a row.
You can see on the new table that if the gap is low, there's no penalty applied on a district not assigned decision.
However, when the gap is high, a very strong penalty is applied.
So the gap had few advantages.
In the first district assignment, no one would get mad unless they lost a racket.
And since the first sit-down is the first real contact with the loyalty system, no automatic drama is a good thing.
It focused crises much more, rather than a constant penalty for not getting a district.
And the bosses would stay calm until they had enough.
and then they would get specific as to why.
There's a big difference between I wanted the district and I'm upset, and it's been twice you've ignored me.
The system was still able to create escalating tension with a balanced play through.
With three people in the room, I had the guaranteed crisis at the second district assignment.
Whoever was not picked from the first two decisions.
So before I present you with the results of that updated designer, I'm going to go back to my initial example.
So if you remember, after the first sit down, Cassandra was angry, she lost one racket after the decision.
Vito is content, he's got the first district.
Burke is neutral, his state didn't change.
Let's fast forward to the second district.
I felt bad for Cassandra, and I assigned her two rackets and the district to calm her.
And we are going to see the sit-down for the third district assignment in the game.
I conquered a district called Barclay Mills, controlled by a mob boss called Enzo Conti.
There, I assigned one racket to Burke and the other to Vito.
Cassandra feels better now that I've assigned her some territory, but she's not great, she's neutral.
Burke is angry, it's been two sit downs and he still hasn't seen any districts coming his way.
I've been completely ignoring him.
And Vito is content, he's got the first district and he didn't lose any rackets, no problem here.
This is the situation I'm going to present you now and it's really a turning point in the structure.
You take your goddamn time, don't you?
Turns out there's at least one sane motherfucker in Marcano's crew.
Enzo Conti backed away clean.
No one's moving anything through Barclay Mills without paying up to us.
Asking my guys to lock down half this turf makes them anxious.
Like, they don't know which side they're supposed to be cheering for.
But giving us the entire turf sends a clear message.
Tells them you're gonna take care of it.
Ain't gonna keep this real fucking simple, Chucky.
Knocking me around the city like you are and keeping me from running rockets.
It's real unhealthy for you.
Everybody's got their play, brother.
But the truth is that I'm the one you called on to run the last territory.
So all that racket shit aside, you know I can handle the day-to-day better than anybody else here.
Make the right choice here and I'll whip up some fresh bucatini for you.
Share the wealth, Lincoln.
Who's it gonna be, Lincoln?
Go against me here and I suppose I'm just a mongo-sop?
This one's all you, Burt.
Thank you, lad.
I'll do my part here.
I will get past this.
So now I gotta go tell my guys their work was for nothing, Jesus Christ.
This ain't going over well with them, or me.
Don't let this happen again.
The ambiance here ain't enough to keep me coming back, brother.
I think I'll excuse myself for the time being.
Alright, that's it. We're done for now.
So here, after choosing Burke, balance was kept.
All characters received one district each.
They're all neutral, although their value is, their actual value is much less than the starting one because of the tension exclamation.
Now I'm going to show you what happens if you choose another character than Burke.
Calling this one for Skeletta.
I've had enough of this shite. You're a lying, cheating bastard for dragging me into this.
You pray to my fucking sympathies and I'll never forgive you for it.
Come on, Irish. Relax.
You've been around the block enough to know it's just business.
There is only so much shit none an Irishman can take before he wipes it from his eyes and comes at you with both barrels.
I see you clearly now, Lincoln. And it's time you made this right.
Bert, come on now. Shit don't need to jump that far yet.
You made your point, Burke. Now that's enough.
Y'all don't have to like the decisions I make.
And to be honest, your egos are the least of my fucking concerns.
Way I see it, you fall in line, or you fall out altogether.
Now let's go make some fucking money.
So here, Burke transitioned to an ultimatum state.
Even Vito and Cassandra tried to calm him down.
He requests the next district.
And that last line from Lincoln is one of my favorite one.
He actually has unique reactions from characters going ultimatum, depending on how early the ultimatum state is triggered.
And this one was the most aggressive.
So I invite you to play the game and see how your choices impact the other bosses.
The dialogue experience differs tremendously depending on what you do and who you choose.
Now you've seen the resulting game, I want to give you a look behind the scene as to how we structure, condition, and choose dialogue assets in Sit Downs.
I'm going to present you my methodology.
I'm sure there are many like it, but this one is mine.
So here a case study on Vito.
If you remember, the total amount of dialogues that Vito can say in a sit-down is approximately 250 dialogue lines.
Let's look at how one dialogue line is defined in the data.
A dialogue is first a unique ID.
We track how many times it has been played in the game, when it was played last through a timestamp, And then we can define one option called play once, which enables us to discard a dialogue completely from the database when it was played once in the game.
And finally, for each dialogue, there is one or more conditions defined.
So conditions are logics based on game state variables.
When we pass a dialogue, all linked conditions have to be true for the dialogue to be available.
Let's take a look at what conditions are in sit down.
So for example, conditions are the loyalty states.
Content, neutral, angry, or ultimatum.
If characters are war or was dead, they don't attend the sit down meeting.
Then you have conditions related to the number of rackets secured in a district, two, one, zero.
And then really any other additional variable.
For example, it's the first district, it's the last district, Vito is the least powerful character in the city, the most powerful, et cetera.
That's for dialogue data.
Now let's go back to Vito's library of dialogues.
Because there are so many, we need to organize them.
So first, we put them in context.
All greetings together, same for pitches, focus dialogues, and reactions.
Then, inside categories, we define priorities.
As many priority levels needed, depending on which dialogues are more important than others.
For example, dialogues specific to the first or last sit down in the game are always marked as priority one.
In priority two are dialogues related to characters being killed since the last sit down, reactions to an ultimatum states, et cetera.
Then you really define as many priority levels as you need.
And finally, your set of generic dialogues.
Your really base design.
They have less specific conditions, usually down to the loyalty states of the character.
And so that's how we structure dialogue data for the other bosses in sit-downs.
First, we organize by context.
Then within context, we organize dialogue assets by priority.
For example, here, greetings have three different levels of priority.
Pitches have eight different levels.
For each dialogue, we track a bunch of statistics and conditions on a mix of game state variables.
So that was from the data structure.
Now, when we detect that it's a character's turn to talk, we run a selection algorithm passing all dialogues from a context to choose the most relevant dialogue to play.
First, we look at the play once status.
If the play once option was ticked and the dialogue has been previously played, the dialogue is discarded.
Then we look at the game state conditions linked with the dialogue.
All conditions have to be met.
If more than one dialogue returns true conditions, we compare different priority levels.
If a priority dialogue, if a priority one dialogue is available, and another priority two, then we choose the priority one.
If dialogues have the same priority level, then we compare the number of times they have been played.
We pick the one which has been played the least amount of times.
If there is still a tie, then we pick the least recently played dialogue.
And finally, if there is still a tie, we pick a random dialogue from the group.
The random part is interesting for me.
In sit-downs, because of the enormous dialogue scope, most of the dialogues actually have never been played.
And so, the algorithm, very often, has to pick randomly without a dialogue group.
So it means that actually, as a designer, I know what characters can potentially say, on which game state variables they could react, depending on player choices.
But in some situations, I really can't anticipate exactly what they are going to say.
And it makes the sit-downs sequences feel very unique.
So the public reception was interesting to see on the loyalty system and on sit-downs.
One of my favorite comments is this person asking on the Steam forums, where can I see the underboss's loyalty?
Is it like a bar or something?
And the other user responds, there is no bar or indicator as to how loyal the underpossesses are to you.
You should get a good feel from the conversations when you are allocating districts to them all at the sit-down.
And these kind of comments really validates all the design.
Writing an animation work on the characters as feedback direction, and it makes me really happy.
Another favorite comment, the underbosses are just a bunch of greedy animals and I love them.
I don't know how he feels towards the MakeMafia grid again though.
So some lessons learned throughout development.
Since communication is so much a part of our everyday life, players seem to really dig interesting systems around dialogue and choices, especially when they are integrated in the gameplay experience.
And sit-downs prove to be a popular feature.
Not overexposing your system helps creating interesting play patterns.
With playtests, we figure, and the public reception, we figured that players had a really cool tendency to project lots of different and personal reasons to choose another boss.
And through projection, they created a play pattern deeper than how the actual system actually works.
And I didn't mention it in the presentation, but late in the development, we introduced a new state, loyal, better than content, the best state possible.
But as we were past the voiceover deadline, we had really no way to reflect it through dialogue.
And with no UI to reflect that, it was not as well presented than the other states.
So that's definitely a big caveat when you are working with voiceover.
Deadlines are crucial.
And it's a real blocker for any major late system design work.
So yeah, plan ahead.
In short, the takeaways from this presentation.
Define and know your constraints well.
Here, I needed to find interesting rules around territory division.
Define the basic concepts that you want to explore.
When you need an update, revisit these basic concepts and see how you can improve the execution.
Prototype, learn, implement, and iterate.
It takes a while to get comfortable with a design, to know it, and to know how to mature it.
We validated a lot of decisions with the Twine prototype, for example.
When there are player issues with the system, ask yourself this.
Is this a core issue, or can it be solved by working on the pair session?
of the player by building on top of the system that you already have.
So you can see that actually these are pretty classic game design lessons here, even working on narrative heavy features like the loyalty systems and sit downs.
So there's no question we can tell engaging stories through game systems.
The biggest question now is how?
When we have the possibility to bring designers, animators, writers, and actors together, we can't let traditional storytelling practices take more importance than the actual game design, or simply rely on proven concepts.
We're not making films, we're not writing books, we create games.
There's definitely room for improvement about how we can best use performance to serve a game design.
And the work we've done on Mafia III is just a small piece.
in the incredible potential of emergent stories through interactivity.
And I really can't wait to create and play some more.
Thank you.
Hi.
So, it wasn't quite clear to me, were any of the, is every speech action that you see, is it all self-contained or is any of it built out of component parts?
So, each dialogue ID is unique.
We organize them in blocks for visualization purposes, but really it's defined per dialogue.
Okay.
Oh, hi. Thank you for the talk.
It seemed like it was a very design-driven narrative approach, so a writer wouldn't come in and specify what they wanted writing.
You'd say, okay, here are the parameters, kind of fill in the blocks.
Did that cause any issues with writers not understanding the flow of structures, and did you have any kind of cool debugging things where they were trying to test out a specific flow of a conversation?
And then, secondly, Was there any instance where you thought, I kind of want the NPC characters to converse between themselves whilst making decisions?
Because it seemed like very much just like, you play your thing and you play your thing.
Was there any like, oh, I said something about you and they retort to that?
So the first question is related to work with writers.
My goal as a designer working on this system was to make writers work as comfortable as possible.
So I would define text conditions and really expose the game system and what I needed in dialogue Assets in Excel.
So really, hey, this is the combination of number of brackets that they hold, the interesting game state condition that I want them to reflect.
And all of that was just a very back and forth conversation and work between writers and me.
But really, the debug was done by myself and QA.
Actually, debugging dialogue is quite simple because if there's something wrong, you figure it out very, very quickly.
And your second question?
It's two-way conversations between characters.
Yes, so characters being able to bounce off of each other was done through talking positions.
So in pitches and reaction sequences, whoever speaks first, for example, bounces off of Lincoln line.
And then the character who speaks second.
I don't know if you remember the first dialogue, but Vito starts with something like, shut the fuck up.
And it actually doesn't matter whether it's Cassandra or Burke who speaks first, and that's how we create that kind of illusion.
Thank you.
Hi, I may have missed something in what you're describing, but I wasn't sure for things like the greeting where a single character speaks, is there any sort of priority given to a character who has more at stake or is more dissatisfied, or is it purely random in each sit down?
So it's a very good question.
Actually, these are the rules for choosing who speaks.
For the greeting, I prioritize angry characters than the previous pick for sit-downs.
Ultimatum is the biggest priority.
Actually, characters in ultimatum states take priority even over Lincoln lines, and they interrupt him.
For the pitch, it's the number of rackets, then the lowest loyalty level.
And the reaction is angry characters.
So yeah, the system really prioritizes angry characters over the rest, because it flows nicer.
Definitely.
Thank you.
I really enjoyed your talk.
Thank you.
And my question is, you attached a gameplay reward to choosing the different characters, a distinct gameplay reward.
And I was wondering, did you see a conflict that players had between choosing how they wanted the story to play out and supporting their own play style?
And did you see that?
as a good conflict or something that was kind of a bad choice that players had to make?
And if so, did you do anything to try to minimize that?
So conflict in choices, economy, rewards versus characters is really the base of the design and that's how it creates interesting choices.
keeping everybody happy, you don't really, there are so many variables that can drive a decision that actually differs really from players to players.
For example, in my specific playthrough, I focused on rewards first, but then I felt bad for characters and I started ignoring these rewards.
And so, yeah, it really differs from playthrough to playthrough.
Okay, thank you for attending.
