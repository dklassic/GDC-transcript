1
00:00:09,509 --> 00:00:14,911
Hello and welcome to Building Narrative Games with Yarnspinner.

2
00:00:14,911 --> 00:00:19,733
Hello, I'm John. I'm a game developer at Secret Lab, a Tasmania, Australia-based studio.

3
00:00:19,733 --> 00:00:23,414
I'm best known for working on Night in the Woods, and I'm also an author of a bunch of books,

4
00:00:23,414 --> 00:00:27,216
including the indie game programming cookbook and a few others for O'Reilly.

5
00:00:27,216 --> 00:00:29,757
And I also run a project called Yarnspinner.

6
00:00:29,937 --> 00:00:35,666
Hi, I'm Mars. I do machine learning at CSIRO, which is Australia's National Laboratories equivalent, I guess.

7
00:00:35,666 --> 00:00:42,517
I'm a programmer, but not a game maker, and I have asked my best buddy here, John, to teach me about this thing that he makes called Yarnspinner.

8
00:00:42,517 --> 00:00:43,499
What's Yarnspinner?

9
00:00:43,913 --> 00:00:45,993
So what's great about narrative games?

10
00:00:45,993 --> 00:00:47,394
They're really fun to play.

11
00:00:47,394 --> 00:00:48,514
They're also fun to make.

12
00:00:48,514 --> 00:00:51,235
They're a really easy way to get a lot of your complex world

13
00:00:51,235 --> 00:00:52,996
building in when you don't have a big team.

14
00:00:52,996 --> 00:00:57,557
Before you get to the part where you have the scale and the skills

15
00:00:57,557 --> 00:01:01,138
to show really well, it's really fun to get started on the tell.

16
00:01:01,138 --> 00:01:03,659
And sometimes that ends up standing alone in a really amazing way.

17
00:01:04,399 --> 00:01:07,221
and especially for people who are new to making games,

18
00:01:07,221 --> 00:01:10,022
making a text-based game that then grows from there

19
00:01:10,022 --> 00:01:13,043
is a really great way to get the story beats going.

20
00:01:13,043 --> 00:01:17,866
So narrative games here is like a story, but interactive.

21
00:01:19,246 --> 00:01:21,948
What a concept. So they vary a lot in scale.

22
00:01:21,948 --> 00:01:25,551
So just as there's a range of different kinds of narrative games,

23
00:01:25,551 --> 00:01:27,353
there's a range of different tools.

24
00:01:27,353 --> 00:01:32,217
So you might have heard of twine and ink and fungus and this project, Yarnspinner.

25
00:01:32,217 --> 00:01:34,078
There are others.

26
00:01:34,078 --> 00:01:37,461
And definitely in some of the really big studios, in some cases,

27
00:01:37,461 --> 00:01:40,043
if your game is a certain scope, it's worth making your own.

28
00:01:40,643 --> 00:01:45,608
it's probably not worth you riding your own when these alternatives that are out there are free,

29
00:01:45,608 --> 00:01:49,591
they're open source and there are really supportive communities that exist to help you use them.

30
00:01:49,591 --> 00:01:54,696
So there's a bunch of them out there as we just said. The three that are possibly the

31
00:01:54,696 --> 00:01:58,079
best known right now are Twine, Ink and Yarnspinner.

32
00:01:58,599 --> 00:02:04,484
Yarnspinner kind of exists halfway between Twine's complexity and Ink's complexity.

33
00:02:04,484 --> 00:02:07,727
Twine is fantastic for working with lots of text.

34
00:02:07,727 --> 00:02:11,750
Ink is fantastic for when you need to have lots and lots of logic controlling the individual lines.

35
00:02:11,750 --> 00:02:13,611
And Yarnspinner gives you the best of both worlds.

36
00:02:14,228 --> 00:02:18,852
So today we'll be showing off Yarnspinner as that nice middle between the really simple

37
00:02:18,852 --> 00:02:25,299
getting started but might soon reach the limits of twine and the really featureful but might

38
00:02:25,299 --> 00:02:29,062
struggle to get started if you're trying to make something smaller, you have to start

39
00:02:29,062 --> 00:02:31,204
a lot of bits that are there for ink.

40
00:02:31,204 --> 00:02:35,468
In Yarnspinner it's really, really easy to get started with something small but there's

41
00:02:35,468 --> 00:02:36,269
also a lot of room to grow.

42
00:02:37,170 --> 00:02:42,431
So Yarnspinner is a scripting language, a domain-specific programming language for dialogue.

43
00:02:42,431 --> 00:02:47,812
It means that you can write it like a screenplay where there are lines of text and the options that follow it that people can

44
00:02:47,812 --> 00:02:53,133
choose between in the same space, in the same script, in the same files between

45
00:02:53,133 --> 00:02:59,935
cues, like you would write a screenplay about like moving a character or changing something about their stance or

46
00:02:59,935 --> 00:03:05,476
changing something about the scene. It means that you can have someone write it as if they're setting the scene

47
00:03:05,476 --> 00:03:06,196
for this dialogue.

48
00:03:06,697 --> 00:03:11,000
It's super super fast to get started writing a branching tree of dialogue

49
00:03:11,000 --> 00:03:15,223
and they can grow very large without the files themselves getting too complex.

50
00:03:15,223 --> 00:03:18,466
So if I wanted to get started with narrative tools, John, where should I start?

51
00:03:18,466 --> 00:03:23,730
I'm glad you asked. I think you should start with a visual novel because it's a great way

52
00:03:23,730 --> 00:03:27,373
to get started in managing assets and constructing scenes and telling a story

53
00:03:27,373 --> 00:03:33,698
without the complexity of making physics-driven gameplay or movement mechanics or all the rest

54
00:03:33,698 --> 00:03:36,059
that would otherwise form part of a larger game.

55
00:03:36,520 --> 00:03:37,780
So what is a visual novel?

56
00:03:37,780 --> 00:03:42,682
Well, the most well-known examples of these kinds of games are those games with a 2D background

57
00:03:42,682 --> 00:03:45,823
where cartoon characters slide in from the sides of the screen and they talk to you,

58
00:03:45,823 --> 00:03:46,823
the player.

59
00:03:46,823 --> 00:03:51,445
Because they're quite text-based and almost always and often entirely text-based, they

60
00:03:51,445 --> 00:03:57,827
really quite lend themselves well to romance games, social themes, those kinds of things.

61
00:03:57,827 --> 00:04:02,088
The genre, though, is very, very broad and it includes anything where the primary or

62
00:04:02,088 --> 00:04:02,968
the only mechanics.

63
00:04:03,269 --> 00:04:07,910
are speaking to characters and making dialogue choices, making textual choices.

64
00:04:07,910 --> 00:04:13,632
And this is a perfect case for using Yarnspinner, because while Yarnspinner can do a lot more than this,

65
00:04:13,632 --> 00:04:17,653
if we focus entirely on dialogues, then we can start simple and go from there.

66
00:04:17,653 --> 00:04:20,694
So with that in mind, let's make one!

67
00:04:20,694 --> 00:04:25,095
So we had a bit of a debate and I won, because I like space, so we're going to make a game about being on a spaceship.

68
00:04:25,095 --> 00:04:26,336
This is why she's called Mars.

69
00:04:27,847 --> 00:04:33,709
So we're going to use Unity, we're going to use Yarnsminut, we're also going to use Visual Studio Code for doing our text editing.

70
00:04:33,709 --> 00:04:35,209
And that's really it.

71
00:04:35,209 --> 00:04:41,691
We're not starting from scratch because this is a talk about building a visual novel rather than learning how to model a 3D environment.

72
00:04:41,691 --> 00:04:47,853
So we've got that already done ahead of time and we've also put together character models, some textures, some animations.

73
00:04:47,853 --> 00:04:54,695
These all came from kenny.nl which is an excellent resource for public domain stuff with some additions by me as well.

74
00:04:55,321 --> 00:04:58,685
We've also written some code, which is just two very simple C Sharp scripts

75
00:04:58,685 --> 00:05:02,689
that include very minimal utilities just for moving cameras around

76
00:05:02,689 --> 00:05:06,393
or for placing textures on characters that we'll go through as we use them.

77
00:05:06,393 --> 00:05:09,616
All of this is available right now on GitHub for free

78
00:05:09,616 --> 00:05:12,800
that you can download at this point so that you can do this along with us

79
00:05:12,800 --> 00:05:14,562
and make your own, which we would love to see.

80
00:05:14,562 --> 00:05:16,464
If you do make your own, please tweet at us.

81
00:05:16,464 --> 00:05:16,804
Thank you.

82
00:05:17,983 --> 00:05:19,283
So what are we going to do today?

83
00:05:19,283 --> 00:05:21,204
Well, we're going to download and install Yarnspinner.

84
00:05:21,204 --> 00:05:23,385
We're going to make a basic Yarn script and hook it up.

85
00:05:23,385 --> 00:05:25,226
We're going to block out our story structure and logic.

86
00:05:25,226 --> 00:05:27,947
We're going to set the scene by incorporating multiple characters and locations.

87
00:05:27,947 --> 00:05:29,108
We're going to add a bit of polish.

88
00:05:29,108 --> 00:05:32,549
And then we're going to replace our placeholder text with the final saucy story.

89
00:05:32,549 --> 00:05:32,809
Fantastic.

90
00:05:33,390 --> 00:05:37,494
We don't have time to cover every single feature of Yarnspinner in a very short talk,

91
00:05:37,494 --> 00:05:40,456
so we're going to focus on a few of the core features of it.

92
00:05:40,456 --> 00:05:43,659
We're going to talk about branching dialogue, variable-driven options,

93
00:05:43,659 --> 00:05:47,543
and also making some custom commands for managing the camera, characters, and the transitions.

94
00:05:47,543 --> 00:05:52,227
So I've created a new empty Unity scene. I'm using Unity 2020.3 today.

95
00:05:52,227 --> 00:05:59,193
This is a completely blank situation. Let's begin by adding the Yarnspinner package.

96
00:05:59,994 --> 00:06:06,558
So I'll go to the window menu and choose Package Manager. I'll click on the plus button and add a

97
00:06:06,558 --> 00:06:10,159
package from the git URL and I'll enter in the URL for Yarnspinner. Today I'm using the most

98
00:06:10,159 --> 00:06:13,461
recent beta of Yarnspinner, but if you're watching this in the future, then a future

99
00:06:13,461 --> 00:06:17,263
version might have been released since then, so make sure you use the most recent version.

100
00:06:25,199 --> 00:06:28,821
So Unity will download and install YarnSpinner into my empty project.

101
00:06:28,821 --> 00:06:33,184
Cool! Now that we have YarnSpinner installed, we should also have a good text editor.

102
00:06:33,184 --> 00:06:34,525
I like Visual Studio Code!

103
00:06:34,525 --> 00:06:40,209
Me too! So luckily for both of us, we've got a good extension for Visual Studio Code that we can just install.

104
00:06:40,209 --> 00:06:47,973
I'll go to the extensions list, and I'll type in YarnSpinner, and hit enter, and there it is, the official YarnSpinner plugin.

105
00:06:48,502 --> 00:06:52,025
I'll click install, click the reload button, and now the extension is installed.

106
00:06:52,025 --> 00:06:55,688
So before we get started with our Yarn script, we have to decide what kind of story we want to tell.

107
00:06:55,688 --> 00:07:00,392
And so we made this little slice where you're starting on a spaceship, because I love them,

108
00:07:00,392 --> 00:07:04,215
and you have the choice between speaking to one of three different people on the ship.

109
00:07:04,215 --> 00:07:08,719
And if you choose to speak to the engineer, he has a big complaint to you about his job.

110
00:07:08,719 --> 00:07:12,182
And if you speak to a crewmate, you end up chatting and...

111
00:07:12,642 --> 00:07:17,725
It slowly derails, and you try to convince her to give you more of her rations.

112
00:07:17,725 --> 00:07:22,408
And if you speak to the captain, she talks about how ready she thinks you are for a crisis.

113
00:07:22,408 --> 00:07:25,910
And you have this back and forth where you can either convince her that you are totally

114
00:07:25,910 --> 00:07:29,573
ready for a crisis, or that you're woefully unprepared.

115
00:07:29,573 --> 00:07:32,214
And then, moments later, pirates attack the ship.

116
00:07:32,214 --> 00:07:36,277
And depending on whether you spoke to the captain, and whether you convinced her that

117
00:07:36,277 --> 00:07:38,038
you were totally ready for a crisis...

118
00:07:38,899 --> 00:07:43,523
If you succeeded, she'll send you to go and save the day against these pirates.

119
00:07:43,523 --> 00:07:47,688
But if you didn't speak to the captain, or if you did but you didn't manage to convince her

120
00:07:47,688 --> 00:07:51,892
that you were prepared for a crisis, she will send the garbage crewmate instead

121
00:07:51,892 --> 00:07:54,334
to go and save the day. And she probably won't save the day.

122
00:07:55,275 --> 00:07:58,175
So we have this tree structure where you always start

123
00:07:58,175 --> 00:08:00,596
in the same spot in the corridor on the ship.

124
00:08:00,596 --> 00:08:02,996
You have one of three conversations that you can have

125
00:08:02,996 --> 00:08:05,057
with one of the different people on the ship.

126
00:08:05,057 --> 00:08:05,717
And in different ways,

127
00:08:05,717 --> 00:08:07,718
they end up in one of these two different endings.

128
00:08:07,718 --> 00:08:09,198
So how can we represent that in Yarn?

129
00:08:09,198 --> 00:08:10,738
So to get started,

130
00:08:10,738 --> 00:08:13,359
let's drop in the basic skeleton of the scene.

131
00:08:13,359 --> 00:08:15,699
So just the bare bones of what we need

132
00:08:15,699 --> 00:08:17,340
to start telling our story.

133
00:08:17,340 --> 00:08:19,360
So here we have a fresh download of the assets

134
00:08:19,360 --> 00:08:20,160
that I mentioned earlier,

135
00:08:20,160 --> 00:08:22,561
and we'll add them to our empty Unity project.

136
00:08:23,152 --> 00:08:26,113
We'll click import and they'll all get copied into the project.

137
00:08:26,113 --> 00:08:28,894
The place to start is in the scenes folder.

138
00:08:28,894 --> 00:08:31,254
So in scenes, start point.

139
00:08:31,254 --> 00:08:31,835
So here's our scene.

140
00:08:31,835 --> 00:08:37,716
We also have a couple of additional things in here that aren't visible.

141
00:08:37,716 --> 00:08:41,057
So two of these game objects, Corridor and Bridge,

142
00:08:41,057 --> 00:08:45,358
these are containers that contain just objects that are markers

143
00:08:45,358 --> 00:08:50,120
for where the camera is going to go to and where the characters should get placed.

144
00:08:50,120 --> 00:08:51,520
That's our environment.

145
00:08:52,200 --> 00:08:55,724
Let's now start adding in some Yarnspinner objects into the scene.

146
00:08:55,724 --> 00:08:59,748
Yarnspinner works with a collection of script files that we call Yarn files.

147
00:08:59,748 --> 00:09:05,634
These are just plain text documents and you'll write the contents of your dialogue into them.

148
00:09:05,634 --> 00:09:08,376
So let's begin by creating our very first Yarn script.

149
00:09:09,080 --> 00:09:12,402
We'll go into our dialog folder that I've made here, and we'll right-click,

150
00:09:12,402 --> 00:09:17,667
create, yarn spinner, yarn script, and we'll call it space journey.

151
00:09:17,667 --> 00:09:20,188
Great. So here's our new empty file.

152
00:09:20,188 --> 00:09:23,311
We'll also create a second file called a yarn project,

153
00:09:23,311 --> 00:09:26,694
and a yarn project exists to link multiple yarn scripts together.

154
00:09:26,694 --> 00:09:29,856
Now, today, we're only going to work with one yarn script,

155
00:09:29,856 --> 00:09:32,338
but in larger projects, you'll end up working with many,

156
00:09:32,338 --> 00:09:34,320
and they all get linked together using the yarn project.

157
00:09:34,460 --> 00:09:42,908
Please do not make a large game using only one yarn file even though is technically possible. It is highly irresponsible. Don't do that

158
00:09:42,908 --> 00:09:46,171
You'll get headaches and you Ryan

159
00:09:46,171 --> 00:09:53,017
So let's also create our yarn project will right-click create yarn spinner. I'll create a yarn project and I'll call it

160
00:09:53,017 --> 00:09:54,699
space

161
00:09:54,699 --> 00:09:56,080
journey

162
00:09:56,080 --> 00:09:57,181
project

163
00:09:57,602 --> 00:10:00,763
Great, we'll now add that script into the project.

164
00:10:00,763 --> 00:10:03,864
So we'll drag the space journey script onto source scripts.

165
00:10:03,864 --> 00:10:05,225
There we go.

166
00:10:05,225 --> 00:10:09,527
So now it's in the list and we can click apply and we're good to go.

167
00:10:09,527 --> 00:10:14,169
Now that the files exist, let's create some game objects in the scene that will use these files.

168
00:10:14,169 --> 00:10:18,931
The dialog runner is a component on a game object that runs yarn code.

169
00:10:19,711 --> 00:10:26,759
It receives lines and options and also commands from the yarn scripts and uses them in the scene.

170
00:10:26,759 --> 00:10:31,564
It makes lines appear, it shows options to the player and also responds to commands,

171
00:10:31,564 --> 00:10:32,746
which we'll get to in a second.

172
00:10:32,746 --> 00:10:36,470
You can find a prefab version of the Dialog Runner inside the Packages folder

173
00:10:36,470 --> 00:10:38,693
by going to Packages, Yarn Spinner,

174
00:10:39,033 --> 00:10:44,135
Prefabs and there you'll find a thing called dialog system which contains among other things a

175
00:10:44,135 --> 00:10:49,498
Dialog runner as well as a full canvas for showing lines. So let's drag it into the scene

176
00:10:49,498 --> 00:10:54,620
I'll select it and just hit the F key in the scene view to see it all here is our

177
00:10:54,620 --> 00:11:00,463
Canvas for showing lines and options the key thing to know about the dialog system is

178
00:11:00,463 --> 00:11:02,083
That it's got the dialog runner component on it

179
00:11:02,183 --> 00:11:06,145
The dialog runner needs a yarn project, which is what we created a second ago.

180
00:11:06,145 --> 00:11:08,667
So we'll drag this into the right position here.

181
00:11:08,667 --> 00:11:11,688
We'll go to our dialog folder and we'll drag the yarn project

182
00:11:11,688 --> 00:11:13,429
into the yarn project slot. Cool.

183
00:11:13,429 --> 00:11:15,810
If we hit the play button right now, nothing would happen

184
00:11:15,810 --> 00:11:17,611
because we haven't written any lines yet.

185
00:11:17,611 --> 00:11:18,892
So let's do that now.

186
00:11:19,192 --> 00:11:22,734
So because a yarn project can be made up of multiple yarn files,

187
00:11:22,734 --> 00:11:25,795
when you make a new yarn file, it gives the first node

188
00:11:25,795 --> 00:11:27,135
the name of the file you gave it.

189
00:11:27,135 --> 00:11:31,157
However, a yarn project will always start running lines

190
00:11:31,157 --> 00:11:33,238
from the first node called start.

191
00:11:33,238 --> 00:11:34,438
So we need to call this node start.

192
00:11:34,438 --> 00:11:37,479
And we want to give it some very basic content.

193
00:11:37,479 --> 00:11:38,840
So here's some I prepared earlier.

194
00:11:38,840 --> 00:11:41,581
We've got two lines of text in a node called start.

195
00:11:41,581 --> 00:11:44,182
And if we run this in Unity, it should feed us

196
00:11:44,182 --> 00:11:45,983
these two lines one at a time.

197
00:11:46,263 --> 00:11:48,683
Now that we're back in Unity, we're almost ready to hit start.

198
00:11:48,683 --> 00:11:51,184
We're going to turn off a couple things we don't need right now.

199
00:11:51,184 --> 00:11:55,225
We'll turn off the fade layer and we'll also turn off the title for the moment.

200
00:11:55,225 --> 00:11:56,145
We'll come back to those later on.

201
00:11:56,145 --> 00:11:57,245
And now we'll hit play.

202
00:11:57,245 --> 00:11:58,145
There's our first line.

203
00:11:58,145 --> 00:11:58,785
Hello world.

204
00:11:58,785 --> 00:12:01,626
And click continue to move to the next one.

205
00:12:01,626 --> 00:12:01,866
This is me.

206
00:12:01,866 --> 00:12:02,286
Oh, I made you sad.

207
00:12:02,286 --> 00:12:03,486
I made you quote the SoundCloud GBC.

208
00:12:12,244 --> 00:12:15,650
Yarnspinner will send lines one at a time into the game.

209
00:12:15,650 --> 00:12:18,516
It'll also send other things like options and commands.

210
00:12:18,516 --> 00:12:19,257
We'll come to those.

211
00:12:19,916 --> 00:12:22,037
So let's get started with our three different characters.

212
00:12:22,037 --> 00:12:25,418
If we want to make it so that you can pick between which of these three

213
00:12:25,418 --> 00:12:28,478
different characters you want to speak to, let's make this note again.

214
00:12:28,478 --> 00:12:30,019
We're going to give it some options.

215
00:12:30,019 --> 00:12:33,380
Here, we're using the first and probably most popular part

216
00:12:33,380 --> 00:12:37,441
of the Jansmanner syntax, which is these little arrows that mean options.

217
00:12:37,441 --> 00:12:40,842
After this first line is played, another day in space fleet

218
00:12:40,842 --> 00:12:41,802
might go have a chat.

219
00:12:41,802 --> 00:12:46,784
These three options will be presented, the things that are preceded by arrows.

220
00:12:47,479 --> 00:12:51,460
You can choose to go see the engineer as per the orders you were given.

221
00:12:51,460 --> 00:12:54,881
You can choose to meet up with your friend, the crewmate.

222
00:12:54,881 --> 00:12:57,062
Or you can choose to go and talk with the captain.

223
00:12:57,062 --> 00:13:00,883
Then depending on which one you chose, the nested dialogue is shown.

224
00:13:00,883 --> 00:13:01,903
So we're going to save.

225
00:13:01,903 --> 00:13:03,964
We're going to go back into Unity.

226
00:13:03,964 --> 00:13:07,285
And if we play again, this time it should present us with that option.

227
00:13:07,285 --> 00:13:09,765
So it's another day in Space Fleet, and I might go have a chat.

228
00:13:09,765 --> 00:13:12,486
I'm going to decide to go and talk to the captain.

229
00:13:12,486 --> 00:13:14,287
And she says, hello, I am the captain.

230
00:13:14,287 --> 00:13:16,067
So now that we have these different options,

231
00:13:16,447 --> 00:13:19,529
What if we wanted to add further and more complex branches?

232
00:13:19,529 --> 00:13:21,750
We could add them inside the same node.

233
00:13:21,750 --> 00:13:24,211
We could keep nesting, and they would give us more options.

234
00:13:24,211 --> 00:13:26,772
But at a certain point, that would become way too complex.

235
00:13:26,772 --> 00:13:28,193
So instead, we use this node system.

236
00:13:28,193 --> 00:13:31,295
Let's instead make it that each of these sub-branches

237
00:13:31,295 --> 00:13:34,396
of that first conversation are instead their own node.

238
00:13:34,396 --> 00:13:35,837
Here's one I prepared earlier.

239
00:13:35,837 --> 00:13:38,458
Instead of having those nested dialog options here,

240
00:13:38,458 --> 00:13:39,339
they just jump.

241
00:13:39,939 --> 00:13:42,860
using the jump command to go to the node that's called that thing.

242
00:13:42,860 --> 00:13:45,641
If we played this it would do exactly the same thing as before,

243
00:13:45,641 --> 00:13:49,523
but it's a more nicely laid out file that better lends itself to expansion.

244
00:13:49,523 --> 00:13:51,783
So the game starts the same way every time,

245
00:13:51,783 --> 00:13:55,945
in that we get the choice to speak to the captain, the engineer, or the crewmate.

246
00:13:55,945 --> 00:14:01,247
But no matter which one we choose we end up on the bridge because space pirates have attacked.

247
00:14:01,247 --> 00:14:04,048
And we want to now add in that ending.

248
00:14:04,865 --> 00:14:06,846
Here we add a new node called bridge ending.

249
00:14:06,846 --> 00:14:08,646
And if we want to add jumps to it,

250
00:14:08,646 --> 00:14:11,328
we can just put it at the bottom of each of those conversation nodes.

251
00:14:11,328 --> 00:14:13,069
Now, no matter which one you pick,

252
00:14:13,069 --> 00:14:15,430
afterwards, you jump to the bridge ending node.

253
00:14:15,430 --> 00:14:16,010
Let's see this in action.

254
00:14:16,010 --> 00:14:17,010
We'll run the game.

255
00:14:17,010 --> 00:14:18,471
We'll talk to the captain.

256
00:14:18,471 --> 00:14:19,772
Everyone picks the captain.

257
00:14:19,772 --> 00:14:21,012
Everyone picks the captain.

258
00:14:21,012 --> 00:14:22,473
And then, pirates!

259
00:14:22,473 --> 00:14:23,133
Oh no!

260
00:14:23,133 --> 00:14:25,254
Crewmate, go deal with those pirates.

261
00:14:25,254 --> 00:14:26,335
Fantastic. That's our story.

262
00:14:26,335 --> 00:14:27,415
Well done. That's going to win awards.

263
00:14:27,781 --> 00:14:30,964
But what if we want to make the ending change depending on what you did?

264
00:14:30,964 --> 00:14:33,947
Let's instead make it have those multiple endings that we talked about before,

265
00:14:33,947 --> 00:14:37,150
where either you can save the day or they'll send the useless crewmate.

266
00:14:37,150 --> 00:14:39,292
We have to make it so that when you talk to the captain,

267
00:14:39,292 --> 00:14:42,396
you have different conversation options that let you convince her

268
00:14:42,396 --> 00:14:45,118
that you are totally up for the challenge if a crisis happens.

269
00:14:45,418 --> 00:14:48,540
But we also want to make it that you can fail if you choose the wrong thing.

270
00:14:48,540 --> 00:14:49,841
Here we're just going to make it really simple.

271
00:14:49,841 --> 00:14:51,581
She's going to ask you if you think you're ready.

272
00:14:51,581 --> 00:14:53,903
You're going to say, I want to go on more missions.

273
00:14:53,903 --> 00:14:56,004
And she's going to say, do you think you're ready?

274
00:14:56,004 --> 00:14:59,325
And if you say yes, instead of saying no, we're going to set a variable.

275
00:15:00,735 --> 00:15:03,475
Variables store information in Yarnspinner.

276
00:15:03,475 --> 00:15:05,016
Right now, we're just using a number.

277
00:15:05,016 --> 00:15:06,636
We're storing it inside of a variable

278
00:15:06,636 --> 00:15:08,656
called away mission readiness.

279
00:15:08,656 --> 00:15:12,557
And so we say, set away mission readiness plus equals one,

280
00:15:12,557 --> 00:15:14,477
which means it goes up by one.

281
00:15:14,477 --> 00:15:17,078
Variables in Yarnspinner begin with a dollar sign.

282
00:15:17,078 --> 00:15:19,599
After we have set that, we'll see another line

283
00:15:19,599 --> 00:15:21,239
where the captain says, really?

284
00:15:21,239 --> 00:15:22,979
And then we'll get another set of options.

285
00:15:22,979 --> 00:15:26,360
These options and that line will only appear

286
00:15:26,360 --> 00:15:28,120
if we chose yes at the start.

287
00:15:29,105 --> 00:15:34,507
If we say yes, then away mission readiness will go up by one again.

288
00:15:34,507 --> 00:15:39,609
Now that's important because we want the good ending to only happen if away

289
00:15:39,609 --> 00:15:43,791
mission readiness is high enough and high enough in this case means two.

290
00:15:43,791 --> 00:15:46,572
And now we're going to start with our first conditionals where we're going to

291
00:15:46,572 --> 00:15:49,553
get different behavior in the ending, depending on the value of this

292
00:15:49,553 --> 00:15:50,253
numeric variable.

293
00:15:51,085 --> 00:15:55,109
Here, we're going to replace the contents of the bridge ending node to add this extra part.

294
00:15:55,109 --> 00:15:59,173
Now, either way, the captain will say, pirates, and you will say, oh no.

295
00:15:59,173 --> 00:16:04,257
And if you didn't manage to speak to the captain or convince her that you are ready for this,

296
00:16:04,257 --> 00:16:08,901
then she will have the same ending as previously, where she will ask the crewmate to go and deal

297
00:16:08,901 --> 00:16:14,026
with those pirates. However, in the else clause, which will be activated if your away mission

298
00:16:14,026 --> 00:16:18,029
readiness is two, which means you said yes twice,

299
00:16:18,748 --> 00:16:22,871
then you were just telling her how ready you are for crises.

300
00:16:22,871 --> 00:16:25,233
So she tells you to go deal with those pirates.

301
00:16:25,233 --> 00:16:26,574
And you're very excited about that.

302
00:16:26,574 --> 00:16:27,715
So let's go back in Unity

303
00:16:27,715 --> 00:16:29,777
and see how we can get to these different endings.

304
00:16:29,777 --> 00:16:31,058
John, do you wanna have a go?

305
00:16:31,058 --> 00:16:31,398
I do.

306
00:16:31,398 --> 00:16:34,421
So let's talk to the captain.

307
00:16:34,421 --> 00:16:35,542
All right, they are the captain.

308
00:16:35,542 --> 00:16:37,663
And we want to go on more missions.

309
00:16:37,663 --> 00:16:39,505
Do you think you're ready?

310
00:16:39,505 --> 00:16:40,766
You're so in love with the captain.

311
00:16:40,766 --> 00:16:43,588
Every time you pick the captain.

312
00:16:43,588 --> 00:16:44,969
My one true love.

313
00:16:44,969 --> 00:16:45,750
Am I ready?

314
00:16:45,750 --> 00:16:46,891
Yes.

315
00:16:46,891 --> 00:16:47,672
Really?

316
00:16:47,672 --> 00:16:48,252
Yes?

317
00:16:49,443 --> 00:16:54,647
Pirates? Oh no! Okay, but we were just telling the captain how ready for this we are.

318
00:16:54,647 --> 00:16:56,869
So time to go deal with the pirates. Hooray.

319
00:16:56,869 --> 00:17:01,232
However, let's run that again, but this time we're going to do it a bit of a different way.

320
00:17:01,232 --> 00:17:05,295
We're going to talk to the captain, and this time only.

321
00:17:05,295 --> 00:17:06,676
Listen, I got reasons for this.

322
00:17:11,432 --> 00:17:15,133
Am I ready? Yes. Am I really ready? No.

323
00:17:15,133 --> 00:17:18,895
Okay. Now when we get to the ending, the crewmate goes and deals with them.

324
00:17:18,895 --> 00:17:22,637
So because we didn't hit both of the points where we changed the value of that

325
00:17:22,637 --> 00:17:25,198
variable, the condition wasn't met.

326
00:17:25,198 --> 00:17:27,740
And that means that different content ran.

327
00:17:27,740 --> 00:17:31,562
You are only away mission readiness one, John, step it up.

328
00:17:33,210 --> 00:17:34,131
One day I'll get there.

329
00:17:34,131 --> 00:17:35,933
So we've had a great time looking at this empty sky

330
00:17:35,933 --> 00:17:37,855
and watching our story unfold thus far.

331
00:17:37,855 --> 00:17:39,397
But what about all those assets that John made?

332
00:17:39,397 --> 00:17:42,501
How are we going to see the visuals of this story?

333
00:17:42,501 --> 00:17:44,943
And how are we going to make that work through Yarnspinner

334
00:17:44,943 --> 00:17:46,105
without having to write too much code?

335
00:17:46,105 --> 00:17:46,365
Over to John.

336
00:17:47,927 --> 00:17:53,749
So, so far we've been working with lines and options. Lines are things that we get to see on screen, that's the text.

337
00:17:53,749 --> 00:17:54,869
Options are the buttons we get to click on.

338
00:17:54,869 --> 00:18:00,292
But there's a third kind of thing that we want to be able to send from Yarnspinner into Unity and that's commands.

339
00:18:00,292 --> 00:18:06,774
Commands are like stage directions. They tell the game to do something that isn't show some text.

340
00:18:06,774 --> 00:18:12,957
So, what we need to do is to have a command that makes the camera be in a certain location.

341
00:18:12,957 --> 00:18:16,718
Now remember how we showed you those markers in the scene, the corridor and the bridge?

342
00:18:17,119 --> 00:18:21,063
we're going to add some code that makes the camera be in the right location

343
00:18:21,063 --> 00:18:25,307
and also make it so that YarnSpinner can invoke those functions.

344
00:18:25,307 --> 00:18:28,971
We've written some scripts that contains the code that we need to make this happen.

345
00:18:28,971 --> 00:18:32,315
So that's in a file called visualnovel.cs.

346
00:18:32,315 --> 00:18:36,199
Being a component, it needs to be added to a GameObject, so we'll add that in now.

347
00:18:36,199 --> 00:18:36,940
In the scripts folder.

348
00:18:37,544 --> 00:18:45,450
Here's Visual Novel, so I'll go to the GameObject menu, create an empty, I'll name it VisualNovel,

349
00:18:45,450 --> 00:18:50,494
and I'll drag the VisualNovel component into it. Let's open up the code for VisualNovel.

350
00:18:51,908 --> 00:18:57,012
And in here, I've got my function changeCameraLocation.

351
00:18:57,012 --> 00:18:58,993
So our next step is to make it

352
00:18:58,993 --> 00:19:01,455
so that Yarnspinner can call this function.

353
00:19:01,455 --> 00:19:03,416
We need to make sure that the commands

354
00:19:03,416 --> 00:19:06,798
are known to Yarnspinner before any Yarn scripts run,

355
00:19:06,798 --> 00:19:08,760
because otherwise we might end up in a situation

356
00:19:08,760 --> 00:19:10,261
where the Yarn script tries to run a command

357
00:19:10,261 --> 00:19:11,161
that doesn't yet exist.

358
00:19:11,922 --> 00:19:17,846
So we'll do this in the awake function which is called before anything else happens for the script

359
00:19:17,846 --> 00:19:23,069
So inside awake, we'll find the dialer grunner and store in a variable dialer grunner

360
00:19:23,069 --> 00:19:26,852
we'll also get the fade overlay that's for later and

361
00:19:26,852 --> 00:19:31,955
Then I'm going to add in the call to add command handler add command handler

362
00:19:31,955 --> 00:19:36,698
Registers a command with the dialer grunner here. We're saying the command is called camera

363
00:19:36,698 --> 00:19:39,900
It takes a parameter which is a location

364
00:19:41,379 --> 00:19:47,303
and when the command is run it calls this function changeCameraLocation, that's this here.

365
00:19:47,303 --> 00:19:52,206
Now we can use this command in our Yarn scripts to change the camera location.

366
00:19:52,206 --> 00:19:56,349
So if we go back to our Yarn script, we know that at the start of the game we want to start

367
00:19:56,349 --> 00:20:01,332
in the corridor. So at the start of the start node we put a cameraCorridor. It's going to call that

368
00:20:01,332 --> 00:20:06,456
setCameraLocation with the parameter corridor. That's going to go and find in the scene that

369
00:20:06,456 --> 00:20:10,359
maca we put at a location in the corridor called corridor. Now

370
00:20:10,739 --> 00:20:15,322
When we want to switch to the bridge, we're going to put a line in that says camera bridge.

371
00:20:15,322 --> 00:20:18,645
The camera will move to the bridge and it will seem like you, as the player point of

372
00:20:18,645 --> 00:20:20,426
view, have moved to the bridge.

373
00:20:20,426 --> 00:20:23,968
Now if we play it, this should display us moving around the different parts of the environment.

374
00:20:23,968 --> 00:20:26,430
And there we are, we begin in the corridor.

375
00:20:26,430 --> 00:20:27,791
We're going to go see your favourite captain.

376
00:20:27,791 --> 00:20:31,694
We do the conversation about whether we're ready to go on away missions.

377
00:20:31,694 --> 00:20:33,075
Totally not ready.

378
00:20:33,075 --> 00:20:34,636
And then there are pirates!

379
00:20:34,636 --> 00:20:36,037
Now it's pirates on the bridge.

380
00:20:36,854 --> 00:20:38,658
Because we've moved the camera into the right location.

381
00:20:38,658 --> 00:20:41,183
I must admit, it's way scarier than Pirates in the Corridor.

382
00:20:41,183 --> 00:20:42,425
What if they end up in the Caribbean?

383
00:20:45,055 --> 00:20:47,316
So as nice as it is speaking to an empty corridor,

384
00:20:47,316 --> 00:20:48,856
we probably want to use those characters

385
00:20:48,856 --> 00:20:50,237
that John has made for us.

386
00:20:50,237 --> 00:20:51,657
So if we have a look at our characters,

387
00:20:51,657 --> 00:20:53,818
we can see that we have that engineer,

388
00:20:53,818 --> 00:20:56,859
that crewmate, and that captain as different models.

389
00:20:56,859 --> 00:20:58,920
But how can we make them appear in the different scenes

390
00:20:58,920 --> 00:21:01,700
as if we're speaking to them depending on our actions?

391
00:21:01,700 --> 00:21:03,601
Back in our visual novel.cs,

392
00:21:03,601 --> 00:21:05,021
we actually have a function for that.

393
00:21:05,021 --> 00:21:07,222
We're going to have place character,

394
00:21:07,222 --> 00:21:08,803
take a character name,

395
00:21:08,803 --> 00:21:11,543
which is either going to be engineer, crewmate, or captain,

396
00:21:12,184 --> 00:21:15,626
and a marker name in the scene to move that character asset to.

397
00:21:15,626 --> 00:21:17,907
This is then going to find the prefab.

398
00:21:17,907 --> 00:21:20,809
If it has never been in the scene before, it's going to make it.

399
00:21:20,809 --> 00:21:22,410
And if it has been in the scene in a different location,

400
00:21:22,410 --> 00:21:24,672
it's going to move it to the new spot we want it to be in.

401
00:21:24,672 --> 00:21:27,234
Then, like before, like we did with the camera,

402
00:21:27,234 --> 00:21:29,795
we're just going to find the marker with the name that we wanted,

403
00:21:29,795 --> 00:21:33,277
and then we're going to set the character asset's position and rotation to that.

404
00:21:33,858 --> 00:21:36,399
We can add a command for this in our awake function

405
00:21:36,399 --> 00:21:37,900
in the same way that we did for camera.

406
00:21:37,900 --> 00:21:40,081
Now we're going to have a command in yarn called place.

407
00:21:40,081 --> 00:21:43,543
And it's going to take two parameters, string and string,

408
00:21:43,543 --> 00:21:45,865
for the character model you want to move

409
00:21:45,865 --> 00:21:47,786
and the location marker you want to move it to.

410
00:21:47,786 --> 00:21:51,048
This means now we can put cues in our yarn file

411
00:21:51,048 --> 00:21:53,029
that move our characters around.

412
00:21:53,029 --> 00:21:54,510
If we want to speak to the engineer,

413
00:21:54,510 --> 00:21:56,291
we want the engineer to appear.

414
00:21:56,291 --> 00:21:57,111
If we speak to the crewmate,

415
00:21:57,111 --> 00:21:59,112
instead we want the crewmate to appear.

416
00:21:59,112 --> 00:22:00,453
If we speak to the captain,

417
00:22:00,453 --> 00:22:02,034
instead we want the captain to appear.

418
00:22:02,154 --> 00:22:07,781
The bridge ending is different because we want different characters to appear based on what our ending is going to be.

419
00:22:07,781 --> 00:22:09,843
So we'll always have the captain visible.

420
00:22:09,843 --> 00:22:10,684
And the engineer.

421
00:22:10,684 --> 00:22:15,510
But we'll only see the crewmate if the captain decides that the crewmate should go and deal with the pirates.

422
00:22:15,510 --> 00:22:17,973
Otherwise, the crewmate doesn't even come to the bridge.

423
00:22:17,973 --> 00:22:21,097
Probably shamed by how awesome you are getting chosen to go on the away mission.

424
00:22:21,097 --> 00:22:21,337
I would be.

425
00:22:22,211 --> 00:22:24,092
So we're almost done. Let's go back to Unity.

426
00:22:24,092 --> 00:22:27,935
The visual novel script makes use of an asset called character list,

427
00:22:27,935 --> 00:22:33,098
which just contains the collection of references to character prefabs.

428
00:22:33,098 --> 00:22:37,741
So that's this asset here. And all this is, is just a list of prefabs.

429
00:22:37,741 --> 00:22:41,264
So to make the visual novel script aware of that list, we'll just drag it in.

430
00:22:41,264 --> 00:22:44,866
And then we'll hit play. We see our opening lines. And just to annoy Mars,

431
00:22:44,866 --> 00:22:46,187
I'll talk to the captain.

432
00:22:46,767 --> 00:22:47,588
And there they are.

433
00:22:47,588 --> 00:22:47,988
Great.

434
00:22:47,988 --> 00:22:50,630
So there's our character appearing on screen.

435
00:22:50,630 --> 00:22:52,251
And now we have the engineer on the left

436
00:22:52,251 --> 00:22:55,933
and the captain in the right locations on the bridge.

437
00:22:55,933 --> 00:22:57,534
So maybe it's a bit weird that the captain is

438
00:22:57,534 --> 00:22:59,395
so happy about there being pirates,

439
00:22:59,395 --> 00:23:00,936
and we want the models to look slightly different

440
00:23:00,936 --> 00:23:01,717
in different contexts.

441
00:23:01,717 --> 00:23:03,898
So how about we change the character poses

442
00:23:03,898 --> 00:23:06,079
and facial expressions to one of a few predefined options?

443
00:23:06,670 --> 00:23:11,814
The last two commands we added were done by calling addCommandHandler on the dialog runner.

444
00:23:11,814 --> 00:23:17,878
And that works really well because those kinds of commands are things that relate to the scene as a whole.

445
00:23:17,878 --> 00:23:23,121
We're changing the location of the camera, we're creating a new object into the scene.

446
00:23:23,121 --> 00:23:29,966
But setting the expression or the pose of a character is something that's quite specific to that character.

447
00:23:29,966 --> 00:23:35,650
So what we should do is add our commands onto scripts on the characters themselves.

448
00:23:36,410 --> 00:23:40,856
All three of these character prefabs have a character script attached.

449
00:23:40,856 --> 00:23:42,778
This exists for two reasons.

450
00:23:42,778 --> 00:23:46,382
It contains just the list of all the expressions that they can have,

451
00:23:46,382 --> 00:23:48,305
and it also contains a bit of logic.

452
00:23:48,305 --> 00:23:52,029
There's two methods in here that we want to make use of.

453
00:23:52,029 --> 00:23:52,329
Set pose.

454
00:23:53,110 --> 00:23:54,331
and set expression.

455
00:23:54,331 --> 00:23:58,353
setPose uses an animator to set the pose of the character

456
00:23:58,353 --> 00:24:01,174
and setExpression finds an appropriate texture

457
00:24:01,174 --> 00:24:02,535
and applies it to the face.

458
00:24:02,535 --> 00:24:05,496
We want these two methods to be able to be called.

459
00:24:05,496 --> 00:24:09,498
The yarn command attribute allows you to make a function

460
00:24:09,498 --> 00:24:12,539
on a script visible to Yarnspinner.

461
00:24:12,539 --> 00:24:15,840
So by saying yarn command pose,

462
00:24:15,840 --> 00:24:17,821
we're able to say pose,

463
00:24:18,382 --> 00:24:22,353
name of a game object, and then any other parameters that we want to pass in.

464
00:24:22,353 --> 00:24:25,743
So we could say, for example, pose, engineer, hand on hip.

465
00:24:27,370 --> 00:24:32,712
And what yarnspin will do is it will find the appropriate game object and call the appropriate method.

466
00:24:32,712 --> 00:24:35,493
So we've added the pose command.

467
00:24:35,493 --> 00:24:39,914
While we're at it, we'll also add the expression command, which works in the exact same way.

468
00:24:39,914 --> 00:24:42,675
And now we can make use of these commands inside of our Yarn script.

469
00:24:42,675 --> 00:24:48,998
The most emotional part of the entire story is the high stress situation where the space pirates attack.

470
00:24:49,418 --> 00:24:53,699
So what we'll do is we'll have our characters react with emotion.

471
00:24:53,699 --> 00:24:57,280
When the engineer and the captain are visible in the scene,

472
00:24:57,280 --> 00:25:00,341
we'll use the pose and expression commands that we just added

473
00:25:00,341 --> 00:25:04,643
to tell these two characters to adjust their pose and expression.

474
00:25:04,643 --> 00:25:08,464
We'll tell the engineer to have a hands-on hips pose

475
00:25:08,464 --> 00:25:11,585
and we'll have the captain have a hand-at-mouth pose.

476
00:25:11,585 --> 00:25:14,306
The engineer will be angry and so will the captain.

477
00:25:15,166 --> 00:25:17,207
If we're not going to go on the away mission,

478
00:25:17,207 --> 00:25:19,188
then when the crewmate arrives,

479
00:25:19,188 --> 00:25:21,189
we'll have the crewmate be extremely happy.

480
00:25:21,189 --> 00:25:23,371
We'll change the expression to a happy one

481
00:25:23,371 --> 00:25:24,531
after the captain says,

482
00:25:24,531 --> 00:25:25,712
crewmate, go deal with the pirates.

483
00:25:25,712 --> 00:25:27,813
And we'll also make the captain

484
00:25:27,813 --> 00:25:29,974
have a pointing gesture as well.

485
00:25:29,974 --> 00:25:33,396
But if the captain doesn't want to send the crewmate,

486
00:25:33,396 --> 00:25:34,777
they want to send you, the player,

487
00:25:34,777 --> 00:25:36,718
then we'll use a different expression

488
00:25:36,718 --> 00:25:39,079
and actually the same pose.

489
00:25:39,079 --> 00:25:39,940
All right.

490
00:25:39,940 --> 00:25:41,521
With that, I think we're ready to test it out.

491
00:25:42,781 --> 00:25:44,642
OK, so let's get to that point in the story.

492
00:25:44,642 --> 00:25:47,743
So we'll go talk to this character.

493
00:25:47,743 --> 00:25:48,523
Great.

494
00:25:48,523 --> 00:25:51,865
And now they're responding with different expressions

495
00:25:51,865 --> 00:25:54,006
and different poses.

496
00:25:54,006 --> 00:25:56,407
So by adding in that attribute onto those methods,

497
00:25:56,407 --> 00:25:59,168
it makes it very easy to just call those functions

498
00:25:59,168 --> 00:25:59,788
from within your script.

499
00:25:59,788 --> 00:26:00,448
Mars hand on hip, intrigued.

500
00:26:00,448 --> 00:26:00,949
John, eyebrow raised.

501
00:26:08,617 --> 00:26:11,081
Alright, so we have our visuals, but it's not very zazzy yet.

502
00:26:11,081 --> 00:26:14,728
So how about we add that magical polish that everyone talks about?

503
00:26:14,728 --> 00:26:16,772
John, polish.

504
00:26:16,772 --> 00:26:17,493
Now?

505
00:26:17,493 --> 00:26:18,214
Yes.

506
00:26:18,214 --> 00:26:18,415
So.

507
00:26:19,470 --> 00:26:21,892
One of the greatest ways to establish

508
00:26:21,892 --> 00:26:23,273
that we're changing the location

509
00:26:23,273 --> 00:26:26,315
is with the classic fade out, fade back in.

510
00:26:26,315 --> 00:26:26,975
Let's do that.

511
00:26:26,975 --> 00:26:31,378
The UI overlay just contains a fade canvas group

512
00:26:31,378 --> 00:26:34,440
and the canvas group, you can modify the alpha value of.

513
00:26:34,440 --> 00:26:35,921
So what you just animate this.

514
00:26:35,921 --> 00:26:39,824
Inside that by the way is just an image set to fully black.

515
00:26:39,824 --> 00:26:41,525
So that's how we get our fade to black.

516
00:26:41,525 --> 00:26:43,946
So we wanna be able to make the fade overlay,

517
00:26:43,946 --> 00:26:45,107
fade in and fade out.

518
00:26:45,447 --> 00:26:49,770
We could do this with the yarn command attribute like we did with the poses and expressions,

519
00:26:49,770 --> 00:26:54,913
but because the fade is kind of like a global scene thing rather than a per object thing,

520
00:26:54,913 --> 00:26:59,796
it makes more sense, I think, for it to be a command that we register globally using

521
00:26:59,796 --> 00:27:06,220
addCommandHandler. So let's go back into visualnovel.cs and in our awake function

522
00:27:06,220 --> 00:27:13,964
we will add in the two commands fadeIn and fadeOut. And these just invoke these functions here.

523
00:27:13,964 --> 00:27:14,344
fadeIn

524
00:27:15,165 --> 00:27:21,188
Fade out one thing that's different about these commands is you'll notice these return a coroutine

525
00:27:21,188 --> 00:27:28,231
Which means when we say return start coroutine yarn spinner will actually wait for that coroutine to finish before continuing

526
00:27:28,231 --> 00:27:31,073
So now if we go back to our space journey dot yarn

527
00:27:31,073 --> 00:27:35,395
We can add fade ins and outs every time we change something about the scene here

528
00:27:35,395 --> 00:27:39,337
Well, we move the camera to the common corridor at the beginning of the game. We then fade in

529
00:27:39,337 --> 00:27:43,179
We're going to fade in from black as we start each other node. We're going to fade out

530
00:27:43,899 --> 00:27:48,263
Place all the characters we want to be in the scene and then fade in so that they are already there

531
00:27:48,263 --> 00:27:52,166
And when we move to the bridge, we're going to fade out before we move the camera

532
00:27:52,166 --> 00:27:58,171
Place all those characters change their pose and expressions so that when we fade back in all of that's already there

533
00:27:58,171 --> 00:28:00,833
It should seem a bit cinematic

534
00:28:00,833 --> 00:28:02,354
That's cinema

535
00:28:02,354 --> 00:28:04,296
baby, baby

536
00:28:04,296 --> 00:28:09,480
And as we go from node to node, we'll also see fade outs and then fade back in and that's great

537
00:28:09,480 --> 00:28:12,242
This is pretty good. But Mars, I think it's missing something

538
00:28:12,580 --> 00:28:13,781
You mean my zazzy title.

539
00:28:13,781 --> 00:28:15,261
I mean your zazzy title.

540
00:28:15,261 --> 00:28:16,081
Yeah, you do.

541
00:28:16,081 --> 00:28:18,322
So back in our Yarn script, just like we did before

542
00:28:18,322 --> 00:28:20,343
to move the camera to different parts of the scene,

543
00:28:20,343 --> 00:28:22,083
we can also move the camera to right in front

544
00:28:22,083 --> 00:28:24,744
of that title we had floating out in the void in space.

545
00:28:24,744 --> 00:28:28,805
And it's going to look like a 2D effect has appeared on screen.

546
00:28:28,805 --> 00:28:30,906
So we can use that same corridor command.

547
00:28:30,906 --> 00:28:33,626
But then we can also add that fade in and fade out,

548
00:28:33,626 --> 00:28:35,707
like we want to for cinema effect.

549
00:28:35,707 --> 00:28:38,588
And in between, we have a wait so that it doesn't just

550
00:28:38,588 --> 00:28:40,809
fade in and immediately fade out before you had a chance

551
00:28:40,809 --> 00:28:42,149
to read my awesome title screen.

552
00:28:42,925 --> 00:28:45,646
So wait is a command that's built into Yarnspinner.

553
00:28:45,646 --> 00:28:47,767
We don't have to define it, it's just there.

554
00:28:47,767 --> 00:28:50,429
And it takes one parameter, which is an amount in seconds.

555
00:28:50,429 --> 00:28:53,451
So we are going to fade in, wait for two seconds, then fade out.

556
00:28:53,451 --> 00:28:55,092
Easily adjustable if you want to be gratuitous.

557
00:28:55,092 --> 00:28:58,393
So back in Unity, we actually have to turn our title canvas back on,

558
00:28:58,393 --> 00:29:01,035
because we hit it earlier, well, before we were doing anything with it.

559
00:29:01,035 --> 00:29:04,577
And now when we press play, we should get some gravitas,

560
00:29:04,577 --> 00:29:06,738
some fanfare, space journey.

561
00:29:09,905 --> 00:29:12,366
All right, there's one last bit here.

562
00:29:12,366 --> 00:29:15,347
And because this is nothing to do with

563
00:29:15,347 --> 00:29:17,268
how to use Yarnspinner and more,

564
00:29:17,268 --> 00:29:19,929
what if you just had the script written,

565
00:29:19,929 --> 00:29:21,310
we're just gonna go to the script.

566
00:29:22,192 --> 00:29:28,355
that was written. And structurally this is the exact same thing. We start with our fade-ins and

567
00:29:28,355 --> 00:29:33,857
our open lines and our initial choices. Our start node. Yep, and then based on what we chose we go

568
00:29:33,857 --> 00:29:40,240
into a longer conversation. The only difference to what we did before is there's just more lines

569
00:29:40,240 --> 00:29:45,523
as well as some more instructions to pose the character or set an expression. We've got some

570
00:29:45,523 --> 00:29:46,743
additional choices.

571
00:29:47,123 --> 00:29:53,386
Here we are in the captain node and we're using the away mission readiness variable here as before.

572
00:29:53,386 --> 00:29:56,527
We also have another variable called captain is friend.

573
00:29:56,527 --> 00:29:59,969
We set that to true if we've hit a certain point in the conversation tree.

574
00:29:59,969 --> 00:30:00,949
Otherwise it's set to false.

575
00:30:02,950 --> 00:30:04,272
And it defaults to false as well.

576
00:30:04,272 --> 00:30:08,239
The bridge ending remains, again, very very similar.

577
00:30:08,239 --> 00:30:11,624
If our away mission readiness is less than the threshold it needs to be,

578
00:30:11,624 --> 00:30:15,190
then we get the crewmate going off to have adventures.

579
00:30:15,190 --> 00:30:16,732
Or, to betray us, who can say.

580
00:30:17,974 --> 00:30:21,795
Otherwise, we get to go and defeat the pirates.

581
00:30:21,795 --> 00:30:25,336
And then we make use of the captain is friend variable that we set earlier

582
00:30:25,336 --> 00:30:26,856
to control whether the captain says,

583
00:30:26,856 --> 00:30:28,477
I'll miss you if you die, friend,

584
00:30:28,477 --> 00:30:30,917
or I'm sure somebody will miss you if you die.

585
00:30:30,917 --> 00:30:32,878
And that's it. That's the visual novel.

586
00:30:32,878 --> 00:30:34,918
We made that super, super quickly.

587
00:30:34,918 --> 00:30:36,779
And while we didn't start from completely scratch...

588
00:30:37,925 --> 00:30:39,525
There wasn't really much beyond what we did here.

589
00:30:39,525 --> 00:30:42,887
This is a template that you can make use of.

590
00:30:42,887 --> 00:30:45,348
The code and all the assets are available for free

591
00:30:45,348 --> 00:30:47,448
on GitHub for you to use and build off.

592
00:30:47,448 --> 00:30:50,330
If you end up doing something more with this,

593
00:30:50,330 --> 00:30:50,970
I'd love to see it.

594
00:30:50,970 --> 00:30:52,070
Please let us know.

595
00:30:52,070 --> 00:30:53,631
So today we've only covered a tiny fraction

596
00:30:53,631 --> 00:30:54,451
of what Yarnspinner can do,

597
00:30:54,451 --> 00:30:55,852
and you might be wondering,

598
00:30:55,852 --> 00:30:56,752
if I've become an

599
00:30:56,892 --> 00:31:00,798
expert at this level I've made awesome little visual novels. Where do I want to go to next

600
00:31:00,798 --> 00:31:05,083
to find more functionality of Yarnspinner? Well, you can try adding voiceover support

601
00:31:05,083 --> 00:31:10,250
or localization which are very easy with built-in systems for Yarnspinner and Unity. You can

602
00:31:10,250 --> 00:31:14,316
add more advanced logic like we started to hint at in our longer script and it can...

603
00:31:14,837 --> 00:31:17,699
expand as far as you like with those same conditionals.

604
00:31:17,699 --> 00:31:19,701
There are other conditionals in Yarnspinner

605
00:31:19,701 --> 00:31:22,624
and other types of variables that we haven't shown examples of.

606
00:31:22,624 --> 00:31:25,967
And of course, using those commands that speak to C Sharp and Unity,

607
00:31:25,967 --> 00:31:29,590
you can have all sorts of behavior that is only bounded by what your game engine can do.

608
00:31:29,950 --> 00:31:37,238
The game that Yarnspinner was originally written for, Night in the Woods, makes extremely heavy use of the command system that's available.

609
00:31:37,238 --> 00:31:46,468
So everything ranging from camera locations, character poses, triggers of animations, sound effects, it's all done through commands in Yarnspinner.

610
00:31:46,468 --> 00:31:50,072
Basically, every time there's a cutscene, then that's Yarnspinner at work.

611
00:31:50,432 --> 00:31:54,975
Yarnspinner is available from GitHub at this address. It is freely available under the terms

612
00:31:54,975 --> 00:31:59,938
of the MIT open source license, which basically means that you can use it for commercial and

613
00:31:59,938 --> 00:32:03,920
personal work as long as you just give us a credit. You can find the official site for

614
00:32:03,920 --> 00:32:09,804
Yarnspinner at yarnspinner.dev and the official twitter at yarnspinnertool, although really that

615
00:32:09,804 --> 00:32:16,028
is just me posting online. You can also join our wonderful and super friendly community on discord

616
00:32:16,028 --> 00:32:18,189
at discord.gg slash yarnspinner.

617
00:32:18,645 --> 00:32:20,386
Thank you so much for following along with us today.

618
00:32:20,386 --> 00:32:22,747
This has been Jon and you can find him at Displezzder on Twitter.

619
00:32:22,747 --> 00:32:25,248
And that was Marz, you can find her at The Martian Life on Twitter.

620
00:32:25,248 --> 00:32:27,869
Again, thank you so much for being a part of this.

621
00:32:27,869 --> 00:32:30,710
We hope you find that inspirational, educational.

622
00:32:30,710 --> 00:32:34,051
Go and make something cool with this.

623
00:32:34,051 --> 00:32:34,752
And then show us.

624
00:32:34,752 --> 00:32:36,052
Please do.

625
00:32:36,052 --> 00:32:39,834
And also, don't forget to fill out your speaker reviews because it helps us make more awesome

626
00:32:39,834 --> 00:32:41,014
content like this.

627
00:32:41,014 --> 00:32:42,374
Thank you and have a great GDC.

628
00:32:42,374 --> 00:32:42,615
Bye.

629
00:32:46,685 --> 00:32:47,028
you

