1
00:00:07,378 --> 00:00:09,119
Thanks a lot for coming along today.

2
00:00:09,140 --> 00:00:15,083
I always wondered if you had to request that sort of funky music before it starts, but

3
00:00:15,103 --> 00:00:18,205
it just happens automatically, which is really cool.

4
00:00:18,665 --> 00:00:20,766
Yeah, a couple of reminders before we get going.

5
00:00:20,926 --> 00:00:25,469
I'm sure by this point in the week you all know these things, but to begin with, could

6
00:00:25,509 --> 00:00:29,611
you please ensure the volume's turned down on your Nintendo Switches?

7
00:00:32,678 --> 00:00:38,180
And the other thing is, like, don't feel the need to record this with your mobile devices.

8
00:00:38,240 --> 00:00:42,361
It's all going to be on the vault and, you know, it's being recorded.

9
00:00:42,742 --> 00:00:48,203
And hopefully they're recording that 4K checkerboard upscaling rendering talk as well so we can

10
00:00:48,223 --> 00:00:50,084
all catch up on that at a later date.

11
00:00:51,493 --> 00:00:53,895
Okay, let's get started. My name is Jamie Wood.

12
00:00:53,955 --> 00:00:56,337
I'm the lead lighting artist at Playground Games.

13
00:00:56,898 --> 00:01:00,721
And welcome to the ambitious HDR time-lapse skies

14
00:01:00,781 --> 00:01:01,862
of Forza Horizon 3.

15
00:01:01,922 --> 00:01:05,765
The Forza franchise has been around

16
00:01:06,185 --> 00:01:09,268
since the original Xbox days and is owned by Turn 10,

17
00:01:09,788 --> 00:01:13,591
who make the incredible Forza Motorsport game series.

18
00:01:14,152 --> 00:01:15,893
At Playground in the UK, we create.

19
00:01:16,732 --> 00:01:19,253
the open world Forza Horizon games.

20
00:01:19,493 --> 00:01:22,274
So to date, the studio has released Forza Horizon,

21
00:01:22,294 --> 00:01:24,435
Forza Horizon 2, and Forza Horizon 3.

22
00:01:25,535 --> 00:01:27,776
And it's the Sky technology of Forza Horizon 3

23
00:01:27,816 --> 00:01:29,517
that I'll be speaking about today.

24
00:01:31,435 --> 00:01:38,660
The technique that we used involves a lot of practical photography as we shoot these

25
00:01:38,961 --> 00:01:44,465
high resolution, high dynamic range, time lapse image sequences which we use to project

26
00:01:44,545 --> 00:01:47,147
onto the sky and inform the lighting on the ground.

27
00:01:48,027 --> 00:01:53,531
And I would say there's a lot of talks at GDC that will claim to speed up your workflow,

28
00:01:53,651 --> 00:01:56,593
improve your pipeline, save your company lots of time and money.

29
00:01:57,794 --> 00:01:59,736
and this talk is definitely not one of those.

30
00:01:59,876 --> 00:02:03,018
This is gonna cause you a whole lot of pain

31
00:02:03,058 --> 00:02:07,921
and additional work, and yeah, a whole bunch more effort.

32
00:02:08,021 --> 00:02:09,902
But hopefully by the end of the talk,

33
00:02:09,922 --> 00:02:12,864
you'll understand why we chose to use this technique

34
00:02:13,204 --> 00:02:14,725
and what it brought us in the game.

35
00:02:15,305 --> 00:02:17,106
So to begin with, I'm gonna play the trailer

36
00:02:17,126 --> 00:02:19,008
for anyone that's unfamiliar with the game

37
00:02:19,408 --> 00:02:21,169
and just to give an idea of what it's all about.

38
00:02:46,691 --> 00:02:48,734
What a wicked game to play

39
00:02:48,774 --> 00:02:50,456
Don't make me feel this way

40
00:04:02,548 --> 00:04:05,711
Okay, so the game was released in September of last year,

41
00:04:05,931 --> 00:04:07,792
and everything inside this presentation,

42
00:04:07,812 --> 00:04:09,153
the screenshots and videos,

43
00:04:09,393 --> 00:04:11,995
are from the Xbox One version of the game.

44
00:04:12,776 --> 00:04:14,937
We also released on Windows PC.

45
00:04:16,598 --> 00:04:18,260
And what I'll go through today then is,

46
00:04:18,520 --> 00:04:20,681
first of all, why we chose to invest in this guy,

47
00:04:20,721 --> 00:04:23,183
why we felt that was an important part of our game.

48
00:04:24,132 --> 00:04:26,713
I'll speak about the practical photography process

49
00:04:26,753 --> 00:04:28,914
of shooting these skies and how we clean up

50
00:04:28,994 --> 00:04:30,155
and process that data.

51
00:04:30,835 --> 00:04:32,836
But if you're not into photography, don't worry,

52
00:04:32,876 --> 00:04:34,256
because I'll get on to the game side

53
00:04:34,316 --> 00:04:37,638
where I will explain the animation of the sky

54
00:04:37,978 --> 00:04:40,919
and all of the important lighting benefits

55
00:04:40,959 --> 00:04:43,500
we get from leveraging that sky data.

56
00:04:44,381 --> 00:04:46,662
And then finally, I'll speak about our adventures

57
00:04:46,702 --> 00:04:49,303
in Australia capturing the Australian skies

58
00:04:49,383 --> 00:04:51,163
for our game that was set in Australia.

59
00:04:52,608 --> 00:04:54,729
So why is the sky important to us?

60
00:04:55,450 --> 00:04:57,231
Well, there's a number of good reasons.

61
00:04:57,291 --> 00:05:00,354
First of all, the sheer screen space that the sky takes up

62
00:05:00,414 --> 00:05:01,474
in our particular game.

63
00:05:01,534 --> 00:05:03,216
So we're a driving game.

64
00:05:03,816 --> 00:05:06,578
We often talk internally about the car, the road,

65
00:05:06,638 --> 00:05:08,560
and the sky being what makes up the frame,

66
00:05:08,600 --> 00:05:10,481
and they're the things that we need to really nail.

67
00:05:12,003 --> 00:05:16,666
And the sky can be a third or two thirds of the screen space.

68
00:05:17,747 --> 00:05:20,009
We also, in the Horizon games, have built up a

69
00:05:21,010 --> 00:05:24,132
a reputation for having dynamic time of day and weather.

70
00:05:24,333 --> 00:05:26,314
That is something the fans really enjoy,

71
00:05:26,334 --> 00:05:28,136
and that is something that we always want to push,

72
00:05:28,176 --> 00:05:29,597
and the sky is part of that.

73
00:05:30,658 --> 00:05:33,340
The sky also informs a lot of the lighting,

74
00:05:33,380 --> 00:05:37,644
so we drive a lot of parameters from that base sky,

75
00:05:37,684 --> 00:05:42,348
so getting that realistic base is really important to us.

76
00:05:42,448 --> 00:05:44,750
Finally, the sky really supports gameplay

77
00:05:44,770 --> 00:05:46,191
in a number of conditions.

78
00:05:47,473 --> 00:05:54,521
action-packed kind of career that we have a bit more control over like dictating what times of day and weather are used in particular races

79
00:05:55,101 --> 00:06:00,207
But we also have the chilled out free roam gameplay that these picturesque backdrops really support

80
00:06:01,892 --> 00:06:04,935
So I'd like to speak a little bit about our previous system.

81
00:06:04,995 --> 00:06:09,561
On Forza Horizon 2 we had a system for representing the sky

82
00:06:09,621 --> 00:06:15,008
that you'll see common in still a lot of open world games today

83
00:06:15,969 --> 00:06:19,032
or anything with a dynamic time of day cycle, I should say.

84
00:06:20,454 --> 00:06:22,655
And that was a base sky simulation

85
00:06:23,355 --> 00:06:25,535
that is based on the sun's position

86
00:06:25,815 --> 00:06:27,616
and modeling the scattering of light

87
00:06:27,736 --> 00:06:31,456
to create the kind of gradients you'd expect as a base

88
00:06:31,656 --> 00:06:33,017
at different times of day.

89
00:06:33,857 --> 00:06:36,517
And then on top of that, we would layer cloud sets

90
00:06:36,998 --> 00:06:40,578
that were particular moments of clouds,

91
00:06:40,638 --> 00:06:42,199
particular shapes that were created

92
00:06:42,259 --> 00:06:43,999
by concept artists in our case.

93
00:06:44,619 --> 00:06:47,221
And that would be like the cutout shape of the cloud,

94
00:06:47,501 --> 00:06:50,344
the way it would fade in, different layers to dictate

95
00:06:50,544 --> 00:06:54,747
how we would pump in light values to change these clouds

96
00:06:54,807 --> 00:06:55,548
over time of day.

97
00:06:55,748 --> 00:06:57,669
And in our particular implementation,

98
00:06:57,949 --> 00:06:59,130
we had 128 animated curves to control per.

99
00:07:01,973 --> 00:07:07,357
lighting for a cloud set. So that was a lot of onerous information to handle.

100
00:07:08,358 --> 00:07:12,882
It also, you know, there's room for error there where we're dictating things like

101
00:07:13,082 --> 00:07:17,867
atmospheric fog, ambient light, all kind of artist-driven sets of curves.

102
00:07:18,968 --> 00:07:25,674
And what that gave us then, like if you had a random chance, a dice roll,

103
00:07:25,734 --> 00:07:28,976
to have a cloudy day, you might see the same cloud set.

104
00:07:30,109 --> 00:07:34,710
throughout the whole day and there's not really any dynamic change in the shape of the clouds there and

105
00:07:35,050 --> 00:07:37,930
All you get is the the different artist driven

106
00:07:39,771 --> 00:07:45,792
Lighting that's input to that so but we achieved some really nice stuff with the system

107
00:07:45,852 --> 00:07:52,033
So the game was critically acclaimed everyone really liked the visuals of it and and we we got what we wanted out of it

108
00:07:52,053 --> 00:07:54,534
But we decided for Forza Horizon 3 that we didn't want

109
00:07:55,274 --> 00:07:57,496
a nice imitation of the real thing.

110
00:07:57,516 --> 00:07:59,537
We wanted the actual real sky.

111
00:07:59,557 --> 00:08:01,758
We wanted all the layered complexity

112
00:08:02,479 --> 00:08:04,420
that you can see in these images

113
00:08:04,500 --> 00:08:08,602
that's just really hard to model in that previous technique.

114
00:08:08,703 --> 00:08:11,164
We also wanted these massive volumous clouds

115
00:08:11,264 --> 00:08:14,486
with sharp lighting and cloud fronts.

116
00:08:14,646 --> 00:08:16,407
We wanted killer sunsets.

117
00:08:16,427 --> 00:08:17,788
We wanted these one-off natural.

118
00:08:18,589 --> 00:08:25,992
occurrences, and we just wanted this complexity from nature in the lighting and layering that

119
00:08:26,012 --> 00:08:31,595
we hadn't seen done in any simulation or mock-up. So we started to talk internally about why

120
00:08:31,635 --> 00:08:37,898
not just play a video of the sky, which sounds like a nice simple idea, but when you start

121
00:08:37,938 --> 00:08:44,202
having conversations about that, there's some very good objections. For instance, the disc

122
00:08:44,222 --> 00:08:47,543
space, like one hour of 4K video would...

123
00:08:48,147 --> 00:08:49,408
fill up the entire Blu-ray,

124
00:08:49,428 --> 00:08:51,069
we need to get the rest of the game on there,

125
00:08:51,290 --> 00:08:52,631
and one hour is not really enough.

126
00:08:53,992 --> 00:08:55,593
We also have this big open world

127
00:08:55,613 --> 00:08:57,634
that we drive through at 200 miles an hour,

128
00:08:57,714 --> 00:09:01,277
so we are already putting a lot of strain on streaming,

129
00:09:01,297 --> 00:09:05,020
so having a heavy video asset in the sky

130
00:09:05,180 --> 00:09:06,861
is not really going to make people happy.

131
00:09:08,222 --> 00:09:10,544
And we also did not want to take a step backwards

132
00:09:10,584 --> 00:09:13,366
in image quality, so we are used to these textured assets

133
00:09:13,386 --> 00:09:14,827
that we can create that are sharp.

134
00:09:14,887 --> 00:09:17,009
We do not want to add video compression into the mix.

135
00:09:17,929 --> 00:09:21,951
And when we started to talk about a still frame sequence,

136
00:09:22,292 --> 00:09:23,632
it was much the same trouble.

137
00:09:23,893 --> 00:09:25,553
We assumed you'd need too many frames

138
00:09:25,694 --> 00:09:29,176
to be able to do this, to have a smooth animation.

139
00:09:30,316 --> 00:09:32,818
And so that seemed like it was impossible, too.

140
00:09:32,838 --> 00:09:34,478
And then there's a really good reason, as well,

141
00:09:34,639 --> 00:09:37,200
in terms of production, where we've got this Sky

142
00:09:37,240 --> 00:09:38,181
system that worked.

143
00:09:38,361 --> 00:09:40,042
We've just shipped a game that everyone loved.

144
00:09:41,362 --> 00:09:43,443
Why would we add risk to the project

145
00:09:43,504 --> 00:09:45,024
and try and change things up?

146
00:09:46,005 --> 00:09:48,107
But we were really set on this real sky.

147
00:09:48,127 --> 00:09:49,128
We wanted the real thing.

148
00:09:49,168 --> 00:09:54,112
So we set about going out there, despite the warnings

149
00:09:54,132 --> 00:09:55,053
from the rest of the team.

150
00:09:55,994 --> 00:09:58,476
And we thought, right, let's go and capture some data,

151
00:09:58,636 --> 00:10:01,238
and we'll work out how to make it work.

152
00:10:02,459 --> 00:10:02,960
So that meant.

153
00:10:04,194 --> 00:10:07,015
going outside in the winter in the UK,

154
00:10:07,775 --> 00:10:10,937
experiencing things like fresh air and natural light

155
00:10:10,977 --> 00:10:13,778
that game developers don't usually get a chance to experience.

156
00:10:15,019 --> 00:10:18,180
And this process was really starting out

157
00:10:18,520 --> 00:10:22,102
with testing individual cameras just for the suitability

158
00:10:22,142 --> 00:10:23,923
of shooting these long time lapses.

159
00:10:25,044 --> 00:10:27,004
And then it developed to that shot

160
00:10:27,044 --> 00:10:29,646
where I'm standing looking quite miserable in the...

161
00:10:30,666 --> 00:10:32,327
It's because I'm really miserable at the time.

162
00:10:34,155 --> 00:10:36,096
And that's kind of the more developed rig.

163
00:10:36,216 --> 00:10:39,617
And even at one point, they gave us some accommodation

164
00:10:39,797 --> 00:10:41,338
in the form of that motor home on the end.

165
00:10:42,138 --> 00:10:44,499
No Lamborghinis there.

166
00:10:45,659 --> 00:10:48,960
So the actual photography side of things

167
00:10:49,300 --> 00:10:52,461
has a lot of challenges with what we were attempting to do.

168
00:10:52,561 --> 00:10:55,442
So if you're a time-lapse photographer,

169
00:10:55,462 --> 00:10:56,802
or if you're into that at all, you

170
00:10:56,822 --> 00:11:00,403
will have heard the term a holy grail shoot, which is.

171
00:11:01,102 --> 00:11:06,425
what they refer to as any time lapse that goes through either sunrise or sunset.

172
00:11:06,986 --> 00:11:10,308
Because of all those changing light conditions, it's called the Holy Grail because it's really

173
00:11:10,368 --> 00:11:11,108
difficult to do.

174
00:11:11,528 --> 00:11:16,371
You've got to get good exposure settings and you've also got to kind of post-process that

175
00:11:16,411 --> 00:11:18,132
to give you a smooth transition.

176
00:11:18,433 --> 00:11:25,497
We wanted to do two of these shoots in HDR every day so that we'd have a consistent kind

177
00:11:25,537 --> 00:11:26,317
of game asset.

178
00:11:26,337 --> 00:11:27,618
We didn't want loads of different...

179
00:11:29,165 --> 00:11:34,690
like random exposures that will come back to us in a bit of a mess and every sky be

180
00:11:34,710 --> 00:11:36,532
sort of different and graded differently.

181
00:11:37,613 --> 00:11:38,854
So that's a big challenge.

182
00:11:38,874 --> 00:11:40,515
You also have this contradictory.

183
00:11:42,530 --> 00:11:46,916
thing between like trying to expose the clouds quickly,

184
00:11:47,096 --> 00:11:48,658
like and have nice sharp clouds,

185
00:11:48,698 --> 00:11:51,281
but also we wanted to capture the full dynamic range

186
00:11:51,321 --> 00:11:52,502
of the sun and sky.

187
00:11:52,602 --> 00:11:56,647
So that meant we were using neutral density filters

188
00:11:56,727 --> 00:11:58,809
to reduce dramatically the amount of light

189
00:11:58,849 --> 00:11:59,851
coming into the camera,

190
00:12:00,051 --> 00:12:01,212
which directly contradicts.

191
00:12:01,650 --> 00:12:04,771
it contradicts trying to take a quick shot that's well exposed.

192
00:12:04,791 --> 00:12:07,672
So you have to balance these two things together.

193
00:12:08,392 --> 00:12:09,973
And also things like lens flare.

194
00:12:10,013 --> 00:12:13,915
So having a very tiny aperture will actually

195
00:12:13,955 --> 00:12:15,995
increase the amount of baked lens flare

196
00:12:16,015 --> 00:12:17,176
that you're getting in these shots.

197
00:12:17,876 --> 00:12:19,417
So you have to find a sweet spot there.

198
00:12:22,963 --> 00:12:26,086
We were also using a multiple camera rig

199
00:12:26,106 --> 00:12:28,868
because we wanted a big future-proof resolution.

200
00:12:28,948 --> 00:12:32,751
So that meant there was more things that could go wrong.

201
00:12:32,831 --> 00:12:33,051
So the.

202
00:12:34,097 --> 00:12:37,119
The actual rig that we ended up with, as I say, it's a three-camera rig,

203
00:12:38,179 --> 00:12:40,720
and we have this portable battery.

204
00:12:41,320 --> 00:12:44,062
It's just a recreational vehicle battery at the bottom of the rig

205
00:12:44,142 --> 00:12:47,483
that supplies mains power to these three cameras.

206
00:12:47,543 --> 00:12:49,964
And we used Canon 1DX cameras.

207
00:12:50,164 --> 00:12:53,946
Like, I don't want this to be like a shopping list for going out and doing this.

208
00:12:53,986 --> 00:12:56,827
Like, there's many ways that you could do something similar,

209
00:12:56,907 --> 00:13:01,569
but we used the 1DX with some 15mm fisheye lenses.

210
00:13:02,151 --> 00:13:03,243
to get our full coverage.

211
00:13:04,971 --> 00:13:10,416
And one of the reasons we picked the 1DX was because it has such good internal bracketing.

212
00:13:11,236 --> 00:13:16,641
So it shoots at 12 frames per second, which means you've got very small gaps between the

213
00:13:17,161 --> 00:13:18,162
exposures that you need.

214
00:13:18,182 --> 00:13:24,307
Because we take seven exposures on each camera every 30 seconds, so that was our process.

215
00:13:24,627 --> 00:13:29,771
And another advantage of the 1DX is that it has two memory card slots, which means we

216
00:13:29,791 --> 00:13:34,215
could shoot entire 24-hour periods without interfering really.

217
00:13:36,399 --> 00:13:42,185
And you really need to get used to these dramatic changing light levels and how to handle that.

218
00:13:43,146 --> 00:13:49,592
It's an absolutely amazing education for any lighting artist to just get out there with a camera,

219
00:13:49,652 --> 00:13:56,799
kind of experience what this planet does as it goes from day to night, and I'd definitely recommend it.

220
00:13:58,276 --> 00:14:00,317
So the cameras were monitored at all times.

221
00:14:00,337 --> 00:14:03,240
We didn't find a way to leave this rig in a field

222
00:14:03,300 --> 00:14:06,582
and come back three weeks later and pick up all the skies.

223
00:14:06,862 --> 00:14:09,664
This was a very active shoot.

224
00:14:10,004 --> 00:14:12,826
And the way we dealt with all the changing light levels

225
00:14:12,886 --> 00:14:15,148
was to have a fixed aperture of

226
00:14:17,232 --> 00:14:23,338
F8 which was kind of a sweet spot between that lens flare and sharpness and then we'd just ramp

227
00:14:23,599 --> 00:14:26,221
ISO to deal with the changing light levels so someone's

228
00:14:26,802 --> 00:14:31,367
There with a light meter reading how much the lights changing and then adjusting the cameras accordingly

229
00:14:33,777 --> 00:14:38,300
And one little trick that we did was, because we needed these neutral density filters in the day

230
00:14:39,141 --> 00:14:43,585
to stop down the light and get those exposures of the disc of the sun,

231
00:14:45,046 --> 00:14:49,970
we didn't want to fiddle around taking the filters out for a night and we didn't want to leave them

232
00:14:50,050 --> 00:14:55,875
in because then we'd have to use such high ISO to capture the night sky. So we actually swapped

233
00:14:55,915 --> 00:15:01,119
the lenses physically, which was faster than fiddling around with lenses. So we had two sets

234
00:15:01,159 --> 00:15:01,559
of lenses.

235
00:15:03,835 --> 00:15:10,142
And I put this image in just to show how kind of like low tech this was.

236
00:15:10,182 --> 00:15:14,727
Like I'm really proud of how clobbered together this looks at this stage.

237
00:15:14,967 --> 00:15:18,671
So we had our art manager turned electrician for this.

238
00:15:18,711 --> 00:15:21,814
There's really just like a small group of us trying to make this work.

239
00:15:22,035 --> 00:15:23,156
And so he.

240
00:15:24,139 --> 00:15:29,845
board all the holes in here and set up this transformer to supply mains power to all the

241
00:15:29,865 --> 00:15:35,591
gear. And our head of production as well is really into astronomy so he could recommend

242
00:15:36,092 --> 00:15:43,200
dew heaters to reduce the condensation on the lenses. And whilst we've got a picture

243
00:15:43,220 --> 00:15:45,382
of some exposed electronics, I should mention that we...

244
00:15:46,388 --> 00:15:52,552
We didn't shoot in the rain, so we decided that rather than try to come up with something,

245
00:15:52,972 --> 00:15:56,274
like, because people were already laughing at us in the studio, so we didn't want to

246
00:15:56,314 --> 00:16:01,317
make, like, a rig that had, like, hair dryers on it, trying to, like, deflect the rain or

247
00:16:01,357 --> 00:16:06,521
anything, so we decided that we'd shoot skies that looked a bit rainy and then layer that

248
00:16:06,561 --> 00:16:08,842
stuff on digitally later on.

249
00:16:10,263 --> 00:16:11,584
And I have to mention the...

250
00:16:13,707 --> 00:16:18,069
the production effort here because when we started thinking about these kind of

251
00:16:18,129 --> 00:16:23,311
big time-lapse shoots and trying to look for a location, we really realized that we

252
00:16:23,351 --> 00:16:28,373
needed like a producer on this. So we spent about three months even finding

253
00:16:28,393 --> 00:16:33,795
like a test location that had like 360 degrees in all directions, no light

254
00:16:33,835 --> 00:16:38,917
pollution, which is really difficult in the UK where we're based because since

255
00:16:38,957 --> 00:16:41,658
the Industrial Revolution everyone's got streetlights everywhere.

256
00:16:43,435 --> 00:16:48,377
And just finding things like secure land that you have permissions to use

257
00:16:49,657 --> 00:16:54,800
was something that really was a lot of work and not something we anticipated.

258
00:16:56,660 --> 00:17:01,402
So, yeah, just to summarize the actual practical photography side of things,

259
00:17:02,383 --> 00:17:03,783
as I say, a big production task.

260
00:17:05,325 --> 00:17:08,948
iterative process to get the rig right. It took us about six months from the

261
00:17:09,529 --> 00:17:14,613
first times we were out with a camera to actually having our production ready rig

262
00:17:15,674 --> 00:17:20,378
and it generates a huge amount of data to process which brings me on to the

263
00:17:20,419 --> 00:17:20,939
next section.

264
00:17:24,763 --> 00:17:26,244
So we

265
00:17:27,475 --> 00:17:31,156
use two programs to clean up and process the data

266
00:17:31,196 --> 00:17:32,576
and get it ready for game.

267
00:17:32,617 --> 00:17:35,757
So that's Lightroom for cleanup and Nuke,

268
00:17:35,817 --> 00:17:37,458
which is a compositing package.

269
00:17:37,618 --> 00:17:40,418
We use that because it's like a node-based system

270
00:17:40,458 --> 00:17:43,459
that is quite adaptable to whatever you need.

271
00:17:43,719 --> 00:17:47,680
And that kind of gets the images ready for the game format

272
00:17:47,700 --> 00:17:49,340
that we want to output.

273
00:17:51,809 --> 00:17:56,092
And yeah, each shoot with the seven exposures every 30 seconds

274
00:17:57,913 --> 00:18:00,555
generates 20,000 raw photos.

275
00:18:01,296 --> 00:18:07,260
So that's 1.2 terabytes of data to handle every time we do a shoot.

276
00:18:07,740 --> 00:18:11,883
And this image here, you can see like the dark to light exposures.

277
00:18:12,803 --> 00:18:15,205
So we take shots like that every 30 seconds.

278
00:18:16,106 --> 00:18:19,789
And that's about half an hour's worth of one camera's data.

279
00:18:19,809 --> 00:18:27,074
So you can imagine what a daunting prospect it is looking at all the images from three cameras from 24 hours.

280
00:18:29,704 --> 00:18:34,147
And we knew at this stage that we had this challenge of getting this 1.2 terabytes down to

281
00:18:35,248 --> 00:18:41,992
less than 2 gig which was what we plucked out of the air as the sensible, like you can probably

282
00:18:42,052 --> 00:18:48,037
fit this on the disk if you make it less than 2 gigabytes. So we had a long way to go. Just to

283
00:18:48,077 --> 00:18:53,240
show you what one of the images looks like then, so you can see like the spherical distortion.

284
00:18:54,645 --> 00:18:57,826
And down in the unused part of the image in the bottom left,

285
00:18:57,967 --> 00:19:01,488
we attached a diffuse light probe to the rig.

286
00:19:01,528 --> 00:19:04,910
So we always have this point of reference of the lighting.

287
00:19:04,950 --> 00:19:08,652
And I'll speak a bit more about that as we go in terms

288
00:19:08,692 --> 00:19:09,392
of how we used that.

289
00:19:12,131 --> 00:19:17,158
So in Lightroom we batch process the chromatic aberration

290
00:19:17,198 --> 00:19:19,121
and vignette from the image.

291
00:19:19,201 --> 00:19:22,806
So that's just using a lens profile

292
00:19:22,947 --> 00:19:25,490
that you can download to suit the lens.

293
00:19:26,797 --> 00:19:30,481
And we also do quite simple color grading of this.

294
00:19:30,541 --> 00:19:34,645
So all we do is we have two X-Rite color corrections,

295
00:19:34,785 --> 00:19:38,890
one for when we have the neutral density filter in

296
00:19:38,990 --> 00:19:39,991
and one for when we don't.

297
00:19:40,131 --> 00:19:42,113
So all we're doing with the grading

298
00:19:42,253 --> 00:19:45,176
is kind of grading out that neutral filter

299
00:19:45,196 --> 00:19:46,317
that isn't exactly neutral.

300
00:19:48,102 --> 00:19:50,644
And then we stick with daylight white balance on the cameras

301
00:19:50,764 --> 00:19:52,645
throughout the whole shoot.

302
00:19:53,286 --> 00:19:56,007
And also we use Lightroom to clean things up,

303
00:19:56,107 --> 00:20:00,970
like spot removal, dust, dirt, insects on the lens,

304
00:20:01,030 --> 00:20:03,712
all this organic stuff that we're not used to dealing with.

305
00:20:04,092 --> 00:20:05,733
And sometimes even people's faces,

306
00:20:05,814 --> 00:20:08,215
if you don't get out of the way in time when it shoots.

307
00:20:08,235 --> 00:20:11,217
So looking miserable again.

308
00:20:14,953 --> 00:20:16,534
Then we're ready to move on to Nuke.

309
00:20:17,214 --> 00:20:19,716
So we bring in our cleaned up images

310
00:20:20,756 --> 00:20:25,758
and we have these like sets of seven image sequences

311
00:20:26,279 --> 00:20:27,319
per camera and we.

312
00:20:27,920 --> 00:20:30,482
merge them into an HDR source for each camera.

313
00:20:30,662 --> 00:20:33,365
We unwrap that spherical distortion

314
00:20:33,885 --> 00:20:35,347
and stitch the images together

315
00:20:35,387 --> 00:20:37,589
to give you something much more familiar

316
00:20:37,969 --> 00:20:40,652
as a lat-long map that you'd use on a sky.

317
00:20:41,613 --> 00:20:44,816
And we also removed the stars here as well, so.

318
00:20:46,269 --> 00:20:50,489
We found that no matter what resolution we use these in the final game,

319
00:20:52,070 --> 00:20:55,590
you do not want pixel stars, because we have a photo mode in the game,

320
00:20:55,610 --> 00:20:59,031
so you can use like a really long lens if you want and take a zoomed in photo,

321
00:20:59,451 --> 00:21:03,932
and you do not want those stars to turn into like big squares behind the subject.

322
00:21:03,972 --> 00:21:08,593
So, we decided to remove the stars from the images in Nuke,

323
00:21:08,733 --> 00:21:12,273
and then we have a star field that we plot as...

324
00:21:13,394 --> 00:21:15,915
the replacement for that and we also create a

325
00:21:16,335 --> 00:21:19,816
cloud mask which is really based to

326
00:21:20,416 --> 00:21:22,377
show when to show through that

327
00:21:23,317 --> 00:21:26,298
star simulation so we need to know where

328
00:21:27,119 --> 00:21:29,619
we're allowed to see that and where this cloud that should occlude that.

329
00:21:31,350 --> 00:21:36,932
So, yeah, and we also use Nuke in the light probe analysis,

330
00:21:36,972 --> 00:21:38,593
which I will get to.

331
00:21:39,613 --> 00:21:41,194
So, one other little trick that we do,

332
00:21:42,114 --> 00:21:45,155
which is probably quite particular to our racing game,

333
00:21:46,416 --> 00:21:50,417
is that we bias the resolution to the horizon.

334
00:21:50,477 --> 00:21:52,398
So, we are driving along, most of the time,

335
00:21:52,418 --> 00:21:55,239
we are interested in that bottom half of the sky.

336
00:21:56,458 --> 00:22:04,685
So here you can see the top image is traditional kind of lat long format where as you go up the vertical direction

337
00:22:05,246 --> 00:22:10,070
you've got an even number of pixels per degree as you go up.

338
00:22:10,671 --> 00:22:14,814
We in our single down sample as we get the frame ready for game,

339
00:22:15,435 --> 00:22:22,101
we just bias that resolution to the horizon so that we've got almost double the vertical resolution there.

340
00:22:23,294 --> 00:22:25,716
And one other trick that we do, which I don't have a slide of,

341
00:22:25,876 --> 00:22:30,421
but we decided that because of that importance

342
00:22:30,521 --> 00:22:33,383
in our particular case where the bottom half of the sky

343
00:22:33,423 --> 00:22:37,207
is much more important, we actually cut the image in half

344
00:22:37,487 --> 00:22:39,529
and quarter res the top half of the image.

345
00:22:39,569 --> 00:22:44,033
So we save 3 8ths of the footprint of this as well.

346
00:22:46,195 --> 00:22:46,335
So.

347
00:22:48,254 --> 00:22:55,275
processing stuff is, you know, a big deal. We had a big IT effort on this as well. So we had 80

348
00:22:56,376 --> 00:23:02,237
terabytes of NAS storage replicated off site. We had artists workstations that had to be

349
00:23:02,277 --> 00:23:08,398
equipped with large capacity SSDs for those Nuke networks where they're very read write heavy.

350
00:23:11,458 --> 00:23:15,739
And as much as we streamlined the cleanup process as much as we could.

351
00:23:16,607 --> 00:23:20,171
There's still a lot of manual work there just because of the nature of all these images

352
00:23:20,231 --> 00:23:25,897
So we we had to hire a full-time artist for sky cleanup on the project

353
00:23:27,018 --> 00:23:32,243
But now we have this asset ready to test so we've got this thing ready to go in game

354
00:23:32,323 --> 00:23:35,186
So let's have a look at the comparison. So

355
00:23:36,507 --> 00:23:40,871
Opus was the code name for Forza Horizon 3, so that's what that word means.

356
00:23:41,972 --> 00:23:46,456
But here you see again the Forza Horizon 2 process,

357
00:23:47,217 --> 00:23:53,062
where the cloud shapes are very static, they're just moving gradually,

358
00:23:53,182 --> 00:23:58,246
and then you've got all these artist-driven values for what those clouds look like,

359
00:23:58,326 --> 00:23:58,606
what the...

360
00:23:59,729 --> 00:24:01,430
ambient lighting on the ground looks like.

361
00:24:02,011 --> 00:24:05,294
And here's our first full day test of the new system

362
00:24:05,334 --> 00:24:06,655
and what that looks like in game.

363
00:24:07,456 --> 00:24:10,538
So you can see the moment to moment variation,

364
00:24:10,838 --> 00:24:16,023
the way the lighting on the ground always matches perfectly

365
00:24:16,043 --> 00:24:17,264
with what's going on in the sky,

366
00:24:17,304 --> 00:24:19,866
we've removed that kind of margin for error

367
00:24:20,166 --> 00:24:22,889
and you can see there's a whole lot more value

368
00:24:23,730 --> 00:24:25,431
moment to moment in this asset.

369
00:24:29,532 --> 00:24:35,336
So at this point we were starting to convince people that this was quite a good idea.

370
00:24:35,417 --> 00:24:43,402
So we still had this challenge to solve where we have this image sequence where we're going

371
00:24:43,463 --> 00:24:46,125
between these nice moments in the sky, but we knew...

372
00:24:46,800 --> 00:24:49,443
that we needed to keep that frame rate really, really low

373
00:24:49,603 --> 00:24:52,646
in order to have any chance of actually shipping it on a disc.

374
00:24:52,826 --> 00:24:56,049
So, the next section talks about the motion,

375
00:24:56,069 --> 00:24:58,611
which is really the key part of doing that.

376
00:24:58,751 --> 00:25:01,714
Use a low frame rate and translate between the frames

377
00:25:03,155 --> 00:25:03,936
in a clever way.

378
00:25:05,917 --> 00:25:07,879
The first thing that we tried then was a ...

379
00:25:09,301 --> 00:25:13,185
perspective correct dominant single direction

380
00:25:13,885 --> 00:25:15,026
of movement on the sky.

381
00:25:15,347 --> 00:25:20,111
So this debug view has longer lines overhead,

382
00:25:20,411 --> 00:25:23,394
where this represents like a faster distance

383
00:25:23,454 --> 00:25:24,915
traveled between frames.

384
00:25:24,955 --> 00:25:28,158
So that's like the pixel motion that we have input

385
00:25:28,198 --> 00:25:30,440
to drive one frame to the next.

386
00:25:30,681 --> 00:25:30,961
But this.

387
00:25:31,930 --> 00:25:34,453
this motion kind of disappears to a vanishing point

388
00:25:34,713 --> 00:25:37,035
and slows down as it goes further away

389
00:25:37,115 --> 00:25:39,177
from where the camera's positioned.

390
00:25:39,217 --> 00:25:42,079
So this is generally correct.

391
00:25:42,119 --> 00:25:44,361
Like that's sort of how skies move

392
00:25:44,421 --> 00:25:46,083
if you go outside and have a look.

393
00:25:47,864 --> 00:25:48,044
But.

394
00:25:49,423 --> 00:25:51,864
it does rely on an artist-driven curve again.

395
00:25:51,924 --> 00:25:55,446
So we have to input a direction and the speed

396
00:25:55,506 --> 00:25:58,328
that we want this sky to move in.

397
00:25:58,908 --> 00:26:01,429
And if you get that wrong at any particular time of day,

398
00:26:01,549 --> 00:26:04,491
you'll get this kind of sort of zigzagging effect

399
00:26:04,571 --> 00:26:06,732
and that's not very natural.

400
00:26:07,953 --> 00:26:14,979
And the other problem we have is that a sky has a load of contradictory motion built into it.

401
00:26:15,059 --> 00:26:20,984
So, for instance, the sun, it doesn't really care what the clouds are doing, right?

402
00:26:21,504 --> 00:26:23,085
It moves on its own trajectory.

403
00:26:23,105 --> 00:26:27,048
It is, you know, it doesn't care about this wind direction that you've input.

404
00:26:27,618 --> 00:26:29,760
The stars rotate around the pole star.

405
00:26:29,780 --> 00:26:32,162
The moon does whatever it wants on an evening.

406
00:26:32,442 --> 00:26:37,266
And you can't just drive it all with this single direction.

407
00:26:37,346 --> 00:26:37,506
So.

408
00:26:38,691 --> 00:26:42,073
We started to develop a system where we would track the sun,

409
00:26:43,474 --> 00:26:45,435
which is what this red circle is.

410
00:26:45,495 --> 00:26:49,277
So that's like us key framing where the sun position is.

411
00:26:49,377 --> 00:26:51,999
And then we would mask away that cloud movement

412
00:26:52,379 --> 00:26:55,481
so that the sun and everything around it

413
00:26:55,521 --> 00:26:57,042
in a sort of feathered blend

414
00:26:57,182 --> 00:26:58,863
would move along with the sun.

415
00:27:00,464 --> 00:27:01,764
So what that looks like then is.

416
00:27:03,169 --> 00:27:07,433
sort of a bit weird because everything around the sun is very static and you get this sort of

417
00:27:07,553 --> 00:27:16,521
stretching away from the sun. And yeah, like sometimes that's not really the correct

418
00:27:16,681 --> 00:27:20,644
movement there. These clouds could have been moving quite quickly in a different direction to

419
00:27:20,664 --> 00:27:24,007
the sun and having them pinned like that really didn't, um,

420
00:27:25,166 --> 00:27:30,072
suit what we needed. So we started looking at other methods and what we settled on was

421
00:27:30,893 --> 00:27:32,835
using motion vectors

422
00:27:33,035 --> 00:27:34,237
to drive the motion.

423
00:27:38,055 --> 00:27:43,440
So what this is then is we pass in our full image sequence into Nuke,

424
00:27:43,660 --> 00:27:46,823
and using Nuke's built-in vector generator node,

425
00:27:47,083 --> 00:27:51,486
we would output this set of textures.

426
00:27:51,546 --> 00:27:55,229
And for anyone who's not familiar with texture-driven motion,

427
00:27:55,310 --> 00:27:59,933
this is a four-channel floating-point 32-bit texture

428
00:28:00,073 --> 00:28:01,935
where two of the channels describe

429
00:28:03,068 --> 00:28:08,594
UV animation from one frame of the sequence to meet the next frame halfway,

430
00:28:08,754 --> 00:28:13,879
and then the other two channels with positive and negative pixel values

431
00:28:14,160 --> 00:28:17,863
will move the frame back in time to meet the previous frame.

432
00:28:18,618 --> 00:28:22,541
They are describing actual Texture Space motion

433
00:28:23,082 --> 00:28:26,444
in each channel.

434
00:28:27,025 --> 00:28:28,606
This is an example.

435
00:28:28,806 --> 00:28:34,891
This sequence is a two-minute gap per shot.

436
00:28:34,971 --> 00:28:37,693
That is a very jumpy thing that does not really look

437
00:28:37,754 --> 00:28:40,216
like a video that you would want to play in your game.

438
00:28:40,936 --> 00:28:43,058
But the same number of frames,

439
00:28:43,158 --> 00:28:46,981
just with a motion vector driving the motion between them,

440
00:28:47,822 --> 00:28:51,723
gives you a much smoother interpolation.

441
00:28:52,244 --> 00:28:54,365
It's kind of local enough that it actually

442
00:28:54,405 --> 00:28:59,347
describes some more of those kind of smaller clouds

443
00:28:59,407 --> 00:29:02,068
and how they're morphing and changing for the next frame.

444
00:29:03,189 --> 00:29:06,770
And it means that we can play this at any frame rate we want,

445
00:29:06,810 --> 00:29:08,651
because we're making the in-betweens up.

446
00:29:08,691 --> 00:29:10,692
So we can play this at 60 frames if we want,

447
00:29:10,732 --> 00:29:13,493
just with those one shot every two minutes.

448
00:29:16,057 --> 00:29:21,599
And if I've done my maths correctly, that 0.008 frames

449
00:29:21,639 --> 00:29:25,000
per second was the frame rate that we have there.

450
00:29:25,060 --> 00:29:29,962
So that's a significant saving from something like 30 or 60

451
00:29:30,442 --> 00:29:32,363
frames per second with the number of images

452
00:29:32,383 --> 00:29:32,943
that we need.

453
00:29:35,884 --> 00:29:37,965
And we also discovered through testing

454
00:29:38,305 --> 00:29:41,907
that we only needed a quarter res motion vector.

455
00:29:41,927 --> 00:29:42,027
So.

456
00:29:43,624 --> 00:29:46,946
We didn't see much in the way of diminished motion

457
00:29:46,986 --> 00:29:50,047
by court rezzing that, so that was a saving there.

458
00:29:50,187 --> 00:29:52,168
And we made a further saving by,

459
00:29:52,288 --> 00:29:55,409
instead of storing the full 32-bit image,

460
00:29:55,629 --> 00:30:00,692
we would keep an XML that went along with the frame data.

461
00:30:00,772 --> 00:30:05,614
So each frame would be given a maximum pixel movement,

462
00:30:07,345 --> 00:30:11,187
which was found per channel in the original motion vector.

463
00:30:11,807 --> 00:30:15,368
We would map that 0 to 255 on an 8-bit Texture,

464
00:30:15,709 --> 00:30:19,310
which is the much more pretty looking one below.

465
00:30:20,631 --> 00:30:23,012
Then when we are back in game, we can look at the XML,

466
00:30:23,992 --> 00:30:27,274
and we can remap those values to the original range of motion

467
00:30:27,794 --> 00:30:29,055
per channel, per frame.

468
00:30:29,555 --> 00:30:31,816
That was like a really nice optimization,

469
00:30:31,836 --> 00:30:34,437
because that Texture compresses much better in game.

470
00:30:36,395 --> 00:30:39,199
So to summarize the motion side of things then,

471
00:30:40,421 --> 00:30:43,426
you've got to solve those contradictory motions in the sky.

472
00:30:43,486 --> 00:30:44,387
The way we did that was.

473
00:30:45,187 --> 00:30:48,369
with the automatic motion vectors.

474
00:30:49,030 --> 00:30:51,551
We also had the ability, if anything ever

475
00:30:51,711 --> 00:30:53,593
kind of didn't pick up correctly,

476
00:30:53,873 --> 00:30:57,275
we could easily input on that original frame data,

477
00:30:58,376 --> 00:31:01,317
like markers that Nuke would pick up easier.

478
00:31:01,358 --> 00:31:04,199
So if, for instance, the motion of a moon

479
00:31:04,259 --> 00:31:08,302
didn't quite pick up, we could draw big red blobs over it,

480
00:31:08,382 --> 00:31:10,463
and then Nuke will kind of track that.

481
00:31:11,024 --> 00:31:13,386
a bit like our original methods

482
00:31:13,846 --> 00:31:15,587
with the dominant direction stuff.

483
00:31:15,627 --> 00:31:19,731
So the motion vectors were the way we did that.

484
00:31:20,031 --> 00:31:21,993
And this is really crucial to being able

485
00:31:22,013 --> 00:31:25,035
to use the whole technique. Without a low frame rate,

486
00:31:25,395 --> 00:31:28,057
this does not happen. And I am sure that is probably

487
00:31:28,098 --> 00:31:29,619
something that has put other people off

488
00:31:29,859 --> 00:31:31,060
this kind of technique before.

489
00:31:33,282 --> 00:31:36,544
So I would like to speak about the most important part

490
00:31:36,564 --> 00:31:38,546
of this whole thing from my point of view,

491
00:31:38,566 --> 00:31:39,046
which is the.

492
00:31:40,279 --> 00:31:41,660
lighting benefits in the game.

493
00:31:42,160 --> 00:31:44,320
It is not just about what is going on,

494
00:31:44,701 --> 00:31:47,581
on the pixels on the dome.

495
00:31:48,722 --> 00:31:51,623
We saw some real benefits in the game lighting

496
00:31:51,643 --> 00:31:52,803
and rendering as well.

497
00:31:54,684 --> 00:31:57,865
To begin with then, the light probe calibration

498
00:31:58,025 --> 00:31:59,145
that I promised.

499
00:32:00,165 --> 00:32:01,766
You can see in the top of that image,

500
00:32:01,786 --> 00:32:05,467
you might be able to see the original gray ball there,

501
00:32:05,527 --> 00:32:07,868
the light probe that we have in every photograph.

502
00:32:08,899 --> 00:32:11,921
And so what I've done here is just cropped in on that image

503
00:32:13,741 --> 00:32:16,042
like just the pixels of that ball and

504
00:32:16,863 --> 00:32:20,824
because in the shoots if we're in the northern hemisphere we face the

505
00:32:21,965 --> 00:32:25,446
The gray ball to the north and if we're in the southern hemisphere

506
00:32:25,486 --> 00:32:30,228
we face it to the south and that means you've always got generally normally you've always got a

507
00:32:30,889 --> 00:32:35,233
point of reference on this ball throughout the day from sunrise to sunset.

508
00:32:35,694 --> 00:32:41,219
And so I've plotted the max luminance found on that sphere here in the graph below.

509
00:32:42,180 --> 00:32:45,284
And there's some really interesting things that you can see from that.

510
00:32:45,324 --> 00:32:47,626
So the sort of wavy...

511
00:32:49,441 --> 00:32:52,343
break up on the first part of the graph.

512
00:32:52,383 --> 00:32:53,524
So that's when the sun rises.

513
00:32:54,585 --> 00:32:56,787
That's because there was like sort of broken cloud

514
00:32:56,827 --> 00:33:00,070
in front of the sun, and it's just sort of diminishing

515
00:33:00,210 --> 00:33:02,371
and changing the intensity.

516
00:33:02,532 --> 00:33:04,693
And then it kind of levels out

517
00:33:05,354 --> 00:33:08,096
to a more consistent relationship between the RGB.

518
00:33:08,697 --> 00:33:12,259
And then you've got these like huge dips in intensity,

519
00:33:12,360 --> 00:33:16,543
which is when the sun's actually behind like full cloud

520
00:33:16,603 --> 00:33:18,685
and you drop down to just the ambient levels.

521
00:33:20,834 --> 00:33:22,035
That is really interesting,

522
00:33:22,055 --> 00:33:25,839
because that means the rig itself was in full shadow there,

523
00:33:26,599 --> 00:33:29,222
and that means that our player should be in full shadow

524
00:33:29,282 --> 00:33:31,844
when they are on that part of the image sequence.

525
00:33:31,864 --> 00:33:35,768
We can use this data to model that in game

526
00:33:36,048 --> 00:33:38,190
and give a real kind of true idea

527
00:33:38,210 --> 00:33:41,253
of what the lighting was like at that time

528
00:33:41,273 --> 00:33:42,274
when we captured the sky.

529
00:33:43,576 --> 00:33:45,697
So just to give you an example of that then,

530
00:33:45,737 --> 00:33:48,438
that's the original photography in Nuke

531
00:33:48,618 --> 00:33:49,578
on the left hand side.

532
00:33:50,899 --> 00:33:54,660
And in Pix, which is one of the Xbox development tools

533
00:33:54,680 --> 00:33:57,541
that we use, you can see in a test bed

534
00:33:57,681 --> 00:34:01,103
the full intensity of the sun on the bottom

535
00:34:01,263 --> 00:34:03,003
and then where we've knocked it out

536
00:34:03,023 --> 00:34:04,404
with cloud shadow in the top.

537
00:34:04,464 --> 00:34:04,844
So we don't.

538
00:34:05,380 --> 00:34:07,641
We don't ever change the intensity of the sun

539
00:34:07,882 --> 00:34:08,702
to model this.

540
00:34:08,742 --> 00:34:10,624
We do it much like real life,

541
00:34:10,664 --> 00:34:14,947
where you actually just knock that out with the shadows.

542
00:34:15,968 --> 00:34:20,271
So this gives you, like, a really nice balance

543
00:34:20,311 --> 00:34:22,252
between the sun, the sky, and the lighting.

544
00:34:22,292 --> 00:34:25,295
And thanks to the hard work of the environment team

545
00:34:25,695 --> 00:34:28,597
at Playground, you can see the balance between â€”

546
00:34:29,298 --> 00:34:33,501
so the images on the left are our near-final Australian track.

547
00:34:34,603 --> 00:34:37,765
And the images on the right are our actual sky captures.

548
00:34:38,085 --> 00:34:41,048
And you can see that that relationship really comes through

549
00:34:41,328 --> 00:34:44,350
and it's a realistic kind of balance.

550
00:34:44,571 --> 00:34:47,453
And that happens throughout all times of day.

551
00:34:47,493 --> 00:34:50,836
So the tricky kind of low light times of day

552
00:34:52,497 --> 00:34:52,857
where you're

553
00:34:54,220 --> 00:34:59,789
you really depend on that relationship between the sky intensity and the ground to look really

554
00:34:59,829 --> 00:35:07,743
realistic that all comes along with this kind of more scientific approach of analyzing what

555
00:35:07,763 --> 00:35:08,604
the lighting is doing.

556
00:35:11,077 --> 00:35:14,981
And because our time of day cycle is now an image sequence

557
00:35:15,261 --> 00:35:16,862
or several image sequences,

558
00:35:17,323 --> 00:35:21,066
we can make other images to go along with those sky frames.

559
00:35:21,146 --> 00:35:26,510
So one such image is the fog cube map that we have per frame.

560
00:35:26,851 --> 00:35:33,456
So this is a simple Gaussian blur of the sky

561
00:35:33,736 --> 00:35:37,359
that is flipped to give some negative directions

562
00:35:37,439 --> 00:35:38,200
if you're looking down.

563
00:35:39,541 --> 00:35:40,882
and you want to find a fog value.

564
00:35:41,482 --> 00:35:43,724
And we actually analyze this image

565
00:35:43,784 --> 00:35:45,085
before creating the cube map,

566
00:35:45,766 --> 00:35:48,367
find the brightest point, which we assume to be the sun,

567
00:35:48,668 --> 00:35:50,949
and we clone that out automatically in a tool.

568
00:35:52,850 --> 00:36:00,795
And this kind of blurred 360-degree cube map gives you a really nice fog color as you disappear into the distance.

569
00:36:00,855 --> 00:36:08,239
So we have... that's actually a screenshot from Forza Horizon 2 where I've used the Forza Horizon 3 system.

570
00:36:08,339 --> 00:36:09,720
But you can...

571
00:36:10,540 --> 00:36:17,247
kind of see those distant mountains just like matching up perfectly with the sky in the distance.

572
00:36:17,967 --> 00:36:23,473
And that's like a replacement for directly an artist-driven thing where we would have been

573
00:36:23,513 --> 00:36:29,138
picking a fog color and we would have had practically no chance of matching that all

574
00:36:29,178 --> 00:36:30,740
the time to whatever clouds or...

575
00:36:32,576 --> 00:36:35,839
simulated gradients were in the sky.

576
00:36:35,939 --> 00:36:37,740
So that's really nice.

577
00:36:38,361 --> 00:36:46,088
And on a similar note, we have this diffuse sky

578
00:36:46,328 --> 00:36:48,370
indirect cube map.

579
00:36:48,410 --> 00:36:52,134
So we take the sky image with an infinite.

580
00:36:52,863 --> 00:36:56,124
black ground plane, and we convolve that offline.

581
00:36:56,144 --> 00:37:00,146
So we've got the opportunity to do really nice high resolution

582
00:37:00,226 --> 00:37:02,306
input cube convolves.

583
00:37:02,526 --> 00:37:05,307
So 180 degree cosine blur.

584
00:37:06,148 --> 00:37:09,709
And that is just the indirect diffuse contribution

585
00:37:09,769 --> 00:37:15,451
of the sky, as if you're standing on top of a hill

586
00:37:15,511 --> 00:37:16,732
and there's no ground.

587
00:37:16,772 --> 00:37:19,333
So it's not really.

588
00:37:20,282 --> 00:37:25,684
a practical thing to have, that's never a scenario that we have, but what we do is occlude

589
00:37:25,724 --> 00:37:33,127
that with our voxel based GI system, so we have voxel based AO that will reduce this

590
00:37:33,607 --> 00:37:38,790
diffuse skylight and then we get the rest of our diffuse lighting from the voxel based

591
00:37:38,850 --> 00:37:39,290
radiance.

592
00:37:40,774 --> 00:37:44,456
that system backs this up to ensure that at all times of day,

593
00:37:45,136 --> 00:37:48,198
we have this nice relationship in the shadows

594
00:37:48,318 --> 00:37:52,080
between the sky and the indirect lighting.

595
00:37:52,140 --> 00:37:53,921
So as you can see in those images,

596
00:37:53,981 --> 00:37:56,722
we've got this automatic confidence

597
00:37:56,822 --> 00:38:01,405
that those levels match the sky.

598
00:38:01,905 --> 00:38:05,227
Another texture that we have is the cloud mask,

599
00:38:05,287 --> 00:38:06,187
as I mentioned earlier.

600
00:38:09,186 --> 00:38:13,454
So that's used to reveal where the stars are seen or not seen.

601
00:38:14,155 --> 00:38:17,462
But we also use that on the distant cloud shadows.

602
00:38:19,837 --> 00:38:25,983
take this black and white mask, we turn it into a cube map, and then assuming that the clouds are all

603
00:38:26,124 --> 00:38:31,910
two kilometers overhead, that's just a number that we used, we can look at any distant terrain pixel,

604
00:38:33,432 --> 00:38:38,958
you know, project up to where the clouds would be, and then look up as to whether

605
00:38:38,998 --> 00:38:40,620
that's in or out of shadow. And that...

606
00:38:42,132 --> 00:38:52,640
We found that to work really nicely, so having a relationship clearly between the clouds that are in the sky and what's on the ground felt really natural.

607
00:38:52,800 --> 00:38:58,805
Obviously, in an ideal world you'd want to model these things in 3D and ray trace through a shadow,

608
00:38:58,825 --> 00:39:03,569
and that always wouldn't be that what you see in the sky is projected on the ground.

609
00:39:03,649 --> 00:39:06,151
But having that relationship seemed really natural to us.

610
00:39:09,290 --> 00:39:11,371
this moves along with the player,

611
00:39:11,652 --> 00:39:15,735
like the sky has to follow the player as it moves.

612
00:39:16,636 --> 00:39:19,298
That meant it was not really suitable to be used at the car,

613
00:39:19,358 --> 00:39:21,920
so you do not want to, as you drive,

614
00:39:21,960 --> 00:39:24,742
all the clouds move with you because that is really weird.

615
00:39:25,263 --> 00:39:29,306
We have a scrolling texture solution for up close.

616
00:39:29,686 --> 00:39:33,289
This video is really sped up so that you can see it,

617
00:39:33,649 --> 00:39:35,971
or maybe it is playing really slowly and slowed down.

618
00:39:36,011 --> 00:39:37,032
But you can see the...

619
00:39:38,245 --> 00:39:40,747
the clouds coming and going there around the car.

620
00:39:40,947 --> 00:39:43,048
And that's a different system entirely.

621
00:39:43,088 --> 00:39:46,910
So we have a scrolling texture such as the one that's there.

622
00:39:47,730 --> 00:39:49,291
And that will move in the direction

623
00:39:49,691 --> 00:39:52,412
that we input that the clouds are moving in.

624
00:39:54,184 --> 00:39:58,206
That is a curve that goes along with each sky.

625
00:39:58,226 --> 00:40:00,548
That means that you can drive towards clouds,

626
00:40:00,588 --> 00:40:01,969
they can come and pass over you,

627
00:40:02,169 --> 00:40:03,430
and all the things you are used to seeing

628
00:40:03,490 --> 00:40:07,052
when you drive in the real world, you will get with this.

629
00:40:07,332 --> 00:40:13,216
We can also vary the cloud shadow at car intensity

630
00:40:13,296 --> 00:40:16,578
based on that original graph that we draw from Nuke,

631
00:40:16,638 --> 00:40:21,161
where we can make sure that when the rig was in shadow,

632
00:40:21,181 --> 00:40:22,842
the player is in shadow using this system.

633
00:40:25,672 --> 00:40:31,403
And I wanted to mention the weather which we developed for Forza Horizon 2.

634
00:40:33,904 --> 00:40:42,828
The weather system was something that we worked really hard on for that game and it plugs into this new SkyTech as well.

635
00:40:42,868 --> 00:40:53,693
So based on the porosity of the materials in the world, we're able to tag with the sky sequences that come along,

636
00:40:53,753 --> 00:40:55,954
like this point here has a chance of rain.

637
00:40:56,568 --> 00:41:00,951
And then that will happen really naturally as the clouds come in, the ground gets wet,

638
00:41:01,471 --> 00:41:06,033
the sort of weather systems move on and then you get those nice post-rain moments as well.

639
00:41:06,133 --> 00:41:10,535
So all of that stuff just kind of plugged in really nicely.

640
00:41:12,448 --> 00:41:18,650
And one other benefit, suddenly having a constant with these photographic skies.

641
00:41:18,730 --> 00:41:23,673
So we've got these images that we've controlled, we've taken all the exposures, we've got the

642
00:41:23,693 --> 00:41:26,134
metadata for how those skies were captured.

643
00:41:26,894 --> 00:41:31,336
That means we've got the opportunity to take other photographic reference and see that

644
00:41:32,056 --> 00:41:37,418
in the global hierarchy of lighting next to the sky to give a really nice relationship.

645
00:41:37,478 --> 00:41:39,199
So one example of that.

646
00:41:40,760 --> 00:41:42,881
is just seen in this test here.

647
00:41:42,901 --> 00:41:45,083
So this is just early pre-production stuff,

648
00:41:45,103 --> 00:41:47,745
and that's some images I took from my car

649
00:41:47,885 --> 00:41:49,846
and turned into an HDR texture.

650
00:41:51,408 --> 00:41:51,688
But we.

651
00:41:52,763 --> 00:42:00,008
You can see at this twilight period that things like your gauges are starting to come alive

652
00:42:00,068 --> 00:42:02,489
as you'd expect as things get dark.

653
00:42:02,690 --> 00:42:07,573
And then headlights are blowing out, brake lights are seeming really hot.

654
00:42:08,233 --> 00:42:14,037
And then as we move to a daytime condition where there's a lot more light, the game camera's

655
00:42:14,097 --> 00:42:15,918
exposure has had to adapt to that.

656
00:42:16,478 --> 00:42:21,261
The same texture appears naturally to change as you'd expect.

657
00:42:22,182 --> 00:42:23,963
you can see that those gauges recede,

658
00:42:24,043 --> 00:42:26,344
the headlights are less blown out in the day,

659
00:42:26,544 --> 00:42:29,106
and the same with the brake lights as well.

660
00:42:29,166 --> 00:42:31,528
So that was like another advantage

661
00:42:31,568 --> 00:42:34,710
of suddenly having this kind of known quantity of the sky.

662
00:42:37,632 --> 00:42:40,453
So yeah, to summarize the kind of game side stuff,

663
00:42:40,734 --> 00:42:44,496
it's certainly as big a part of.

664
00:42:46,725 --> 00:42:49,768
this whole technique as sort of what's going on in the sky,

665
00:42:50,228 --> 00:42:53,991
on the sky dome, we benefit an awful lot

666
00:42:54,171 --> 00:42:56,613
on the kind of jump in realism

667
00:42:56,673 --> 00:42:58,354
just from using the sky technique

668
00:42:58,454 --> 00:43:00,595
based on what the other stuff

669
00:43:00,615 --> 00:43:01,816
that was going on on the ground.

670
00:43:06,000 --> 00:43:08,482
So finally, I'd just like to speak a little bit

671
00:43:08,662 --> 00:43:11,224
about our adventures to Australia,

672
00:43:11,304 --> 00:43:15,027
where we sort of decided that once we have this rig

673
00:43:15,187 --> 00:43:17,589
and a process that can capture real skies

674
00:43:17,649 --> 00:43:19,390
and our game is set in Australia,

675
00:43:19,430 --> 00:43:22,292
then where better to shoot the skies?

676
00:43:22,353 --> 00:43:25,715
So we shipped the whole rig out to Australia.

677
00:43:25,735 --> 00:43:29,878
We went on location, me and the art manager,

678
00:43:30,018 --> 00:43:33,341
and we trained up two groups of photographers out there

679
00:43:33,401 --> 00:43:35,463
who did a really great job over...

680
00:43:36,301 --> 00:43:42,005
the summer of 2015, so that's like December 2015,

681
00:43:42,245 --> 00:43:45,007
the year before we shipped,

682
00:43:45,268 --> 00:43:46,709
and over the course of the whole summer,

683
00:43:46,749 --> 00:43:50,452
they captured 25 full 24-hour days,

684
00:43:50,872 --> 00:43:52,893
and that was like our pool of data

685
00:43:53,474 --> 00:43:55,375
to use as our skies for the game.

686
00:43:56,736 --> 00:43:58,277
They took two million photographs.

687
00:43:59,430 --> 00:44:03,391
It's just a big number, not really significant, but just showing off.

688
00:44:04,311 --> 00:44:11,514
So this is a video of us out there and it was really like something I'm really glad

689
00:44:11,534 --> 00:44:13,834
that we did, like go out to the real location.

690
00:44:13,894 --> 00:44:14,455
It's like a really...

691
00:44:15,565 --> 00:44:21,049
romantic idea to kind of take the lighting from the actual real world location and kind

692
00:44:21,089 --> 00:44:23,390
of transport that to the player wherever they may be.

693
00:44:25,212 --> 00:44:31,556
And as well as kind of just that being like a cool thing to do, we got the sun arc.

694
00:44:33,385 --> 00:44:35,186
included in that data as well.

695
00:44:35,226 --> 00:44:37,789
So normally we would kind of go to great lengths

696
00:44:37,809 --> 00:44:40,311
to kind of work out the timings of the sky

697
00:44:40,371 --> 00:44:43,914
and where the sun would be positioned

698
00:44:44,014 --> 00:44:45,856
and how long sunsets would last.

699
00:44:45,936 --> 00:44:48,478
And like, we got all of that stuff in the data,

700
00:44:48,518 --> 00:44:49,058
which was like.

701
00:44:49,980 --> 00:44:51,642
just that other level of realism.

702
00:44:52,142 --> 00:44:57,427
And we also had this survey of all the weather in Australia.

703
00:44:57,487 --> 00:44:59,609
So we'd been there for the whole summer.

704
00:44:59,649 --> 00:45:03,012
We knew how long it rained for and when it was cloudy

705
00:45:03,092 --> 00:45:04,953
and when we had these full clear days.

706
00:45:04,993 --> 00:45:08,697
And we could use that data when it comes to setting chances

707
00:45:08,797 --> 00:45:11,219
of these things in our weather system in the game.

708
00:45:15,398 --> 00:45:21,620
So here's some of those Australian skies in our near final Australian track then.

709
00:45:21,740 --> 00:45:27,342
So these are obviously sped up to look cool as time lapses, but this stuff would roll

710
00:45:27,362 --> 00:45:34,965
at a natural speed in game and gives you that kind of nice feeling of things just evolving

711
00:45:35,005 --> 00:45:39,066
without you really noticing, much like you do when you kind of spend the day outside.

712
00:45:40,018 --> 00:45:42,800
And then all of those images that I showed you at the start

713
00:45:42,840 --> 00:45:44,701
where I said we wanted to capture the real sky,

714
00:45:44,761 --> 00:45:47,623
they were, of course, things that we captured in Australia.

715
00:45:47,703 --> 00:45:49,805
All of those things made it into the final game.

716
00:45:50,625 --> 00:45:53,547
And that gives us this kind of wealth of options

717
00:45:53,567 --> 00:45:58,791
when it comes to setting up the races or online events

718
00:45:58,971 --> 00:45:59,992
or whatever it may be.

719
00:46:00,032 --> 00:46:04,955
We've got this really nice full range of different moody,

720
00:46:06,711 --> 00:46:09,032
dramatic conditions.

721
00:46:09,212 --> 00:46:10,593
Some shots from the DLC there.

722
00:46:10,973 --> 00:46:13,635
And I think that that final shot's actually from one of

723
00:46:13,695 --> 00:46:17,857
our players from a community competition,

724
00:46:17,977 --> 00:46:19,057
which I really liked.

725
00:46:21,590 --> 00:46:26,272
And yeah, just to kind of sum the whole thing up then, having been through it,

726
00:46:28,412 --> 00:46:36,435
you may have gathered it kind of represents a huge cross-discipline amount of additional work

727
00:46:36,515 --> 00:46:37,995
to do this. Like, we definitely...

728
00:46:38,715 --> 00:46:43,257
touched on all departments, I think, from art, engineering,

729
00:46:43,897 --> 00:46:46,858
design, with the way they set up the races,

730
00:46:46,878 --> 00:46:50,359
the leadership team taking on this kind of crazy idea,

731
00:46:50,379 --> 00:46:53,079
the IT effort, the production effort,

732
00:46:53,199 --> 00:46:57,280
and not least my partner in crime on the rendering side.

733
00:46:57,320 --> 00:47:00,241
So the rendering engineer that was

734
00:47:00,301 --> 00:47:02,042
assigned to this part of the project

735
00:47:02,082 --> 00:47:05,703
did a crazy good job of implementing all of this stuff.

736
00:47:05,743 --> 00:47:05,823
And.

737
00:47:06,603 --> 00:47:08,444
really wouldn't have happened without him.

738
00:47:10,345 --> 00:47:16,448
So there's also this huge investment of effort on the practical capture side as well.

739
00:47:16,509 --> 00:47:21,651
So it's almost like this new department we've got where it's almost like an audio team

740
00:47:21,731 --> 00:47:24,913
or getting into photogrammetry or whatever.

741
00:47:25,373 --> 00:47:29,776
You've got to kind of understand that that's kind of a huge investment there.

742
00:47:31,488 --> 00:47:36,917
But the Sky System, as I say, has really benefited the visuals and a kind of jump in realism.

743
00:47:38,580 --> 00:47:44,530
And it's removed all of those artist-driven data curves that I spoke about earlier on as well.

744
00:47:45,956 --> 00:47:52,080
We had barely any meetings, if any, during the project where we were sitting scratching

745
00:47:52,120 --> 00:47:55,162
our heads and going, oh, there's something a bit weird with the lighting.

746
00:47:55,202 --> 00:47:55,622
What is it?

747
00:47:55,742 --> 00:48:03,547
Like, because it was done in a sort of measured kind of scientific manner, so we had sort

748
00:48:03,567 --> 00:48:06,029
of confidence in it as we went along.

749
00:48:07,441 --> 00:48:15,106
And finally, whilst obviously shooting natural skies and doing time-lapse photography shoots

750
00:48:15,166 --> 00:48:22,491
that can be reined off as adding a whole lot of unpredictability and risk on the production

751
00:48:22,551 --> 00:48:23,092
side of things.

752
00:48:24,012 --> 00:48:27,375
That unpredictability is also the biggest benefit of this.

753
00:48:27,495 --> 00:48:29,137
Like, nature is in control.

754
00:48:29,157 --> 00:48:31,779
You have got this kind of wonderful performance

755
00:48:31,859 --> 00:48:33,500
of the clouds and the lighting,

756
00:48:33,540 --> 00:48:36,563
and that is really the strength as well of the system.

757
00:48:36,603 --> 00:48:38,645
Like, having that stuff captured and preserved

758
00:48:38,685 --> 00:48:40,726
and being able to show that in the game

759
00:48:40,806 --> 00:48:45,911
is something that I am really pleased that we managed to do.

760
00:48:46,771 --> 00:48:48,393
Yeah, that is everything. Thanks very much.

761
00:48:57,719 --> 00:49:00,502
I think we have time for questions.

762
00:49:02,304 --> 00:49:03,265
No one seems to know.

763
00:49:03,886 --> 00:49:04,267
I'll check.

764
00:49:04,947 --> 00:49:07,911
Yeah, I think we have like 10 minutes, so if anyone has a question, then...

765
00:49:08,312 --> 00:49:09,193
Great talk.

766
00:49:09,273 --> 00:49:09,733
Thank you.

767
00:49:10,714 --> 00:49:15,180
Did you consider shooting HDR since you're using it for lighting?

768
00:49:17,479 --> 00:49:23,347
So the images that we created were HDR sources, yeah.

769
00:49:23,387 --> 00:49:27,552
So the exposures were later combined to give us the full

770
00:49:28,153 --> 00:49:30,617
dynamic range, actually, of the sun and sky.

771
00:49:32,633 --> 00:49:36,035
We actually didn't use that full range in the end,

772
00:49:36,115 --> 00:49:39,837
so that's something that maybe we'd do differently.

773
00:49:39,897 --> 00:49:43,700
Like, it's not always a benefit to have that baked,

774
00:49:43,820 --> 00:49:45,961
really intense sun in the image,

775
00:49:46,041 --> 00:49:50,003
so you're sometimes better offloading that to the key light.

776
00:49:50,583 --> 00:49:53,485
But yeah, so the images were full HDR, yeah.

777
00:49:53,565 --> 00:49:56,226
So had you used that HDR, would you have normalized it

778
00:49:56,266 --> 00:49:58,207
and then used the game camera's exposure to...

779
00:50:01,918 --> 00:50:06,782
So I think just simply not having such a hot, extreme sun

780
00:50:06,822 --> 00:50:10,765
in the image would be actually slightly improved.

781
00:50:10,885 --> 00:50:16,430
So we were very conscious not to kind of tinker

782
00:50:16,470 --> 00:50:17,871
with the data coming in.

783
00:50:17,911 --> 00:50:21,814
We wanted a very kind of linear kind of process

784
00:50:21,854 --> 00:50:25,417
from the raw photography right up to getting it into the game.

785
00:50:25,437 --> 00:50:26,518
So we didn't want to do any like.

786
00:50:27,118 --> 00:50:29,079
grading on top of it or anything.

787
00:50:29,139 --> 00:50:32,940
So I think just, you know, it'll be different for every game,

788
00:50:33,000 --> 00:50:37,022
but just being very conscious about how much range

789
00:50:37,062 --> 00:50:39,823
you actually want in there, because it depends on kind

790
00:50:39,863 --> 00:50:41,983
of your rendering pipeline as well,

791
00:50:42,003 --> 00:50:43,924
whether you're actually clipping out,

792
00:50:44,004 --> 00:50:47,525
like offering this huge intense hot spot on the image.

793
00:50:47,925 --> 00:50:48,545
Right.

794
00:50:48,685 --> 00:50:50,346
So you didn't white balance it or anything?

795
00:50:50,366 --> 00:50:51,966
You just took it raw from the camera?

796
00:50:52,006 --> 00:50:54,587
Just, yeah, just daylight white balance shots,

797
00:50:54,647 --> 00:50:54,867
and then...

798
00:50:56,427 --> 00:51:00,069
white balance as a kind of process

799
00:51:00,129 --> 00:51:01,889
when we go through Lightroom,

800
00:51:01,949 --> 00:51:04,310
just assume it was shot as daylight.

801
00:51:04,450 --> 00:51:09,792
Then you have got the option in-game then to white balance

802
00:51:10,072 --> 00:51:11,373
however you would like.

803
00:51:11,413 --> 00:51:12,433
Yeah, so.

804
00:51:12,853 --> 00:51:13,393
Cool, thank you.

805
00:51:13,653 --> 00:51:14,014
Thank you.

806
00:51:16,595 --> 00:51:18,635
Good talk. I got two questions.

807
00:51:19,376 --> 00:51:20,216
One of them is like,

808
00:51:20,276 --> 00:51:22,097
how do you define the final value

809
00:51:22,117 --> 00:51:23,637
of the direction lights in the game?

810
00:51:23,877 --> 00:51:25,218
And the second one would be.

811
00:51:26,907 --> 00:51:33,022
How do you pick the final exposures for the in-game especially at night time where you know designers sometimes well the real life is too dark

812
00:51:33,343 --> 00:51:33,784
Yeah, cool

813
00:51:35,207 --> 00:51:41,992
Good question, yeah. So the first one was the sun intensity. So that's really taken

814
00:51:42,052 --> 00:51:52,719
from that light probe data, so where I'm analysing the max luminance found on that sphere. That's

815
00:51:52,759 --> 00:51:56,602
not directly what you would want as your sun intensity, because that obviously includes

816
00:51:56,642 --> 00:52:01,966
the ambient light, but we would model that not really by using the...

817
00:52:02,611 --> 00:52:04,852
exact value we found in that graph,

818
00:52:04,932 --> 00:52:09,293
but by using a modeled, like, PBR,

819
00:52:09,333 --> 00:52:11,594
diffuse light probe in our game as well.

820
00:52:11,634 --> 00:52:13,835
So, like, I'm able to ...

821
00:52:13,875 --> 00:52:15,316
So, we have some debug options

822
00:52:15,356 --> 00:52:17,716
so that I can mouse over the screen

823
00:52:17,756 --> 00:52:21,078
and see, like, the exact kind of linear

824
00:52:21,138 --> 00:52:23,699
and final values on the gray ball,

825
00:52:24,139 --> 00:52:27,280
and I can compare that in the original photography

826
00:52:27,320 --> 00:52:28,840
to the values I'm seeing there.

827
00:52:28,860 --> 00:52:29,681
So, it's kind of like a ...

828
00:52:31,342 --> 00:52:37,045
diffuse plus key light equals this and then I'm able to balance it that way.

829
00:52:37,425 --> 00:52:39,767
And what was the other question?

830
00:52:40,988 --> 00:52:45,110
The final exposures for night time, because on the horizons,

831
00:52:45,511 --> 00:52:48,773
compared to day time, it's a completely different value.

832
00:52:49,253 --> 00:52:53,736
So we actually kept the original difference in the images.

833
00:52:55,537 --> 00:52:58,659
That was kind of hard to fit into the texture format.

834
00:53:00,512 --> 00:53:02,934
the rendering engineer on this project actually had to do

835
00:53:03,774 --> 00:53:07,196
a kind of scaling factor to fit it into the Texture format

836
00:53:07,236 --> 00:53:10,238
because of that range being so low.

837
00:53:10,298 --> 00:53:13,561
And like your night shots are very, very small values

838
00:53:13,621 --> 00:53:15,962
when you save it, so we actually boost them up

839
00:53:16,142 --> 00:53:17,603
to save out the Texture,

840
00:53:17,763 --> 00:53:21,266
and then we reduce them back to get the full range back.

841
00:53:21,286 --> 00:53:22,206
So we did not actually ...

842
00:53:23,102 --> 00:53:25,424
Cheat night? We did have a very, very dark night.

843
00:53:25,504 --> 00:53:30,770
Like, if you play the game, it's really, like, headlights only that you can drive with,

844
00:53:31,972 --> 00:53:35,075
which was something, yeah, the art director really wanted that.

845
00:53:36,669 --> 00:53:38,611
so we tried to stick to it as much as possible.

846
00:53:38,631 --> 00:53:41,934
We do have some ambient controls,

847
00:53:41,974 --> 00:53:47,238
so we can use the underlying star simulation

848
00:53:47,298 --> 00:53:50,301
to actually contribute to the diffuse light,

849
00:53:50,561 --> 00:53:52,943
but I kept that really to a minimum.

850
00:53:53,383 --> 00:53:57,507
We pretty much kept the really dark nights, actually.

851
00:53:57,527 --> 00:53:57,647
Yeah.

852
00:53:57,807 --> 00:53:58,127
Thank you.

853
00:53:58,428 --> 00:53:58,688
Cheers.

854
00:54:00,009 --> 00:54:01,150
Hi, fantastic talk.

855
00:54:01,350 --> 00:54:02,351
Thanks for sharing that.

856
00:54:03,051 --> 00:54:07,934
And my question is, you showed time lapses at 30 seconds intervals,

857
00:54:08,274 --> 00:54:11,916
but end up using two minute intervals?

858
00:54:12,056 --> 00:54:13,457
Yeah, yeah, that's right.

859
00:54:13,517 --> 00:54:19,561
So I think shooting at 30 seconds is a really good idea

860
00:54:19,601 --> 00:54:23,063
because wind speed actually really affects this.

861
00:54:23,143 --> 00:54:28,026
So you can imagine like the amount that the kind of speed of clouds varies.

862
00:54:28,106 --> 00:54:28,466
It's like...

863
00:54:29,204 --> 00:54:33,471
sometimes it will be easily like four times faster and therefore you'd get like

864
00:54:34,272 --> 00:54:38,198
in terms of what you're asking the motion vector to do you would be wanting

865
00:54:38,238 --> 00:54:43,346
to move you know four times as much with so it's at the original

866
00:54:44,087 --> 00:54:49,229
kind of frame gaps doesn't always relate to the amount you're trying to move the clouds.

867
00:54:49,269 --> 00:54:54,832
So our target was two minutes, that's what we found to give us the zip size we wanted.

868
00:54:54,912 --> 00:54:59,974
But there were skies that had faster wind speed that we had to use at one minute intervals,

869
00:55:00,034 --> 00:55:03,035
which kind of the 30 seconds gave us that option to do that.

870
00:55:03,576 --> 00:55:08,658
And I think there were some skies that we managed to play back at much bigger intervals.

871
00:55:08,718 --> 00:55:09,398
So if you have a...

872
00:55:10,433 --> 00:55:16,695
a clear sky without many clouds and all you're really doing is kind of tracking the sun we found you could use like much bigger

873
00:55:16,715 --> 00:55:17,375
um

874
00:55:18,215 --> 00:55:21,656
you know frame gaps for that so we used it variably but

875
00:55:22,376 --> 00:55:25,017
um, it's really down to wind speed more than

876
00:55:25,737 --> 00:55:27,498
kind of time lapse

877
00:55:27,558 --> 00:55:29,398
intervals that dictates that so

878
00:55:30,359 --> 00:55:33,600
Yeah, because it could save you a lot of space when you

879
00:55:34,384 --> 00:55:40,168
when you know the end of interval that requires certain sky.

880
00:55:41,489 --> 00:55:47,232
And also my second question is, can you say about technical details,

881
00:55:47,353 --> 00:55:53,917
how much, what is the end of resolution for full time lapse and how much it requires on a disk space?

882
00:55:54,771 --> 00:56:00,593
Yeah, so we used 4K final Textures in the end.

883
00:56:01,593 --> 00:56:06,195
That's obviously with the 3.8 saving

884
00:56:06,215 --> 00:56:08,316
where we down-res the top portion,

885
00:56:08,356 --> 00:56:16,319
so it was like a 4K by 512 and then a 2K by 256 Texture,

886
00:56:16,359 --> 00:56:19,200
so that was our final resolution that we used.

887
00:56:20,790 --> 00:56:27,035
And on disk, we ended up using up about 7 gig of the disk

888
00:56:27,075 --> 00:56:30,318
budget, so it's a pretty significant commitment.

889
00:56:31,299 --> 00:56:31,499
Yeah.

890
00:56:32,740 --> 00:56:37,844
Yeah, and my last question is, you have a dynamic weather

891
00:56:37,884 --> 00:56:41,667
system, and it means that you can mix different skies, like

892
00:56:42,048 --> 00:56:44,029
completely different time lapses?

893
00:56:44,882 --> 00:56:50,946
Yeah, so we had that system, so we developed a way to put blend points,

894
00:56:50,986 --> 00:56:56,429
and we could have as many blend points as we like between the different 24-hour tracks.

895
00:56:57,410 --> 00:57:00,372
We actually kind of reined in how much we used that,

896
00:57:00,412 --> 00:57:05,214
because we found that we really loved the kind of natural transitions that we were getting,

897
00:57:05,435 --> 00:57:09,517
and when we used our kind of manufactured ones, it felt like we were kind of...

898
00:57:10,523 --> 00:57:12,845
putting part of it back to that previous system

899
00:57:12,886 --> 00:57:15,428
where it's like sort of made up stuff, not real stuff.

900
00:57:15,448 --> 00:57:18,652
So we tend to only use that when we needed to.

901
00:57:18,752 --> 00:57:21,115
For instance, like obviously at the end of the day,

902
00:57:21,155 --> 00:57:24,238
you have to kind of blend to a different portion.

903
00:57:25,600 --> 00:57:27,742
So yeah, we had that system in place.

904
00:57:27,962 --> 00:57:30,425
We didn't use it as much as we thought we would though.

905
00:57:31,661 --> 00:57:31,901
Thanks.

906
00:57:32,262 --> 00:57:32,562
Thanks.

907
00:57:33,623 --> 00:57:33,923
Over here.

908
00:57:34,283 --> 00:57:34,463
Hi.

909
00:57:34,704 --> 00:57:35,184
That's great.

910
00:57:35,945 --> 00:57:37,466
Thanks.

911
00:57:37,686 --> 00:57:40,309
How many skies did you shoot and what was the selection process like?

912
00:57:40,349 --> 00:57:42,050
Did you have reviews on the time lapse?

913
00:57:42,631 --> 00:57:45,994
Yeah, so it was, so we shot 25.

914
00:57:48,711 --> 00:57:53,355
Australian skies for the pool of skies that we used in Australia.

915
00:57:54,816 --> 00:58:02,203
And we shipped with four, like we reduced that down to four 24-hour periods.

916
00:58:02,443 --> 00:58:08,228
So but that's, you know, you can see from the video where I showed the comparison between

917
00:58:08,268 --> 00:58:13,272
Horizon 2 and 3, like there's so much variety in each day that four was actually quite a

918
00:58:13,312 --> 00:58:14,013
huge number.

919
00:58:14,033 --> 00:58:14,553
Like we had a...

920
00:58:15,417 --> 00:58:17,820
a whole lot of stuff to choose from in that.

921
00:58:17,860 --> 00:58:20,464
And the review process was quite difficult

922
00:58:20,504 --> 00:58:22,687
because if you see the format that they come in.

923
00:58:23,578 --> 00:58:25,799
where you've got the kind of spherical distortion

924
00:58:25,839 --> 00:58:27,400
and the single camera sequences,

925
00:58:27,440 --> 00:58:31,002
and they're all in bracketed orders as well.

926
00:58:31,042 --> 00:58:33,484
Like, it's very difficult to get an idea

927
00:58:33,524 --> 00:58:35,125
of what that would be like to play.

928
00:58:35,225 --> 00:58:38,647
So, we developed some tools to get around that.

929
00:58:38,687 --> 00:58:42,229
So, we would, in every raw image,

930
00:58:42,269 --> 00:58:44,410
you can actually extract a JPEG,

931
00:58:45,551 --> 00:58:46,851
which is embedded in that raw.

932
00:58:48,252 --> 00:58:51,454
So we automatically found the brightest exposures,

933
00:58:51,474 --> 00:58:53,495
which are normally like the well-exposed ones,

934
00:58:53,615 --> 00:58:56,536
and we'd extract the JPEG sequence,

935
00:58:57,176 --> 00:59:00,138
and then we'd automatically kind of write that to a video.

936
00:59:00,278 --> 00:59:03,299
But it was still quite challenging to kind of know

937
00:59:03,319 --> 00:59:04,460
that you were making the right choices,

938
00:59:04,520 --> 00:59:06,661
because you're still kind of flicking through.

939
00:59:08,466 --> 00:59:13,610
these big, big expansive skies when you're going to be looking at this kind of little part of it on the horizon.

940
00:59:13,670 --> 00:59:18,953
So it's definitely something I would probably improve if we do it again.

941
00:59:20,174 --> 00:59:22,416
My second question is, are you going to do this again?

942
00:59:22,436 --> 00:59:31,142
I don't know, I can't really speak about anything in the future that the studio is really doing.

943
00:59:31,242 --> 00:59:31,442
Sorry.

944
00:59:34,166 --> 00:59:34,466
Thanks.

945
00:59:35,327 --> 00:59:37,449
Yeah, I think last question then, because we're out of time.

946
00:59:37,649 --> 00:59:37,929
Great.

947
00:59:38,029 --> 00:59:38,490
I'm lucky.

948
00:59:38,550 --> 00:59:39,931
It's the last.

949
00:59:40,031 --> 00:59:41,252
Great talk, really.

950
00:59:41,552 --> 00:59:42,993
The best of the week for me.

951
00:59:43,113 --> 00:59:45,075
So it was, I learned a lot of things.

952
00:59:45,295 --> 00:59:47,397
And I do HDRI myself.

953
00:59:48,098 --> 00:59:48,198
And...

954
00:59:49,339 --> 00:59:57,231
we get some kind of problems when we are making HDRI's of the skies because as you mentioned

955
00:59:57,251 --> 01:00:02,440
you have to have all these time-lapse, you have to make some motion vectors to make in

956
01:00:02,460 --> 01:00:03,201
between motion.

957
01:00:04,923 --> 01:00:11,545
to get what is missing, but also in the bracketing, in the different photographs, you have 7,

958
01:00:11,925 --> 01:00:17,206
the time is not exactly the same, and you depend a lot on the shutter speed, and because

959
01:00:17,226 --> 01:00:24,268
you are using neutral density filters, sometimes the shooting time is quite long, so do you

960
01:00:24,288 --> 01:00:24,428
have...

961
01:00:25,369 --> 01:00:32,117
You do you have some advice about this? Well, what do you use? Yeah, so we we didn't do any like offsetting of

962
01:00:32,798 --> 01:00:38,565
frames as sort of clouds move like which I've seen people do where they sort of try to

963
01:00:38,585 --> 01:00:42,790
Adapt for the the motion on each exposure. I mean our

964
01:00:43,551 --> 01:00:44,933
exposures because we're using the

965
01:00:46,121 --> 01:00:50,983
the 1DX, our exposures were less than three seconds,

966
01:00:51,163 --> 01:00:55,185
even though that's still quite a little bit of blur there.

967
01:00:56,005 --> 01:00:58,566
But I think we kind of survived

968
01:00:58,626 --> 01:01:01,067
because our source resolution was so huge.

969
01:01:01,127 --> 01:01:02,547
So like with the three cameras,

970
01:01:02,708 --> 01:01:05,629
we end up with like a 13,000 pixel source.

971
01:01:05,649 --> 01:01:06,869
So by the time you...

972
01:01:09,850 --> 01:01:12,552
kind of crush that down to 4K.

973
01:01:12,832 --> 01:01:16,673
Those small movements are, you know...

974
01:01:17,074 --> 01:01:20,775
So it's because it's just 3 seconds that it doesn't matter so much?

975
01:01:21,476 --> 01:01:24,057
Yeah, I guess so. I mean, are you using longer

976
01:01:25,958 --> 01:01:28,999
times than that when you do your HDRI stuff?

977
01:01:29,119 --> 01:01:32,961
Yeah, so probably we manage with that, yeah.

978
01:01:33,573 --> 01:01:42,015
Do you change the setting considering the lighting condition, the cloud speed, the wind speed?

979
01:01:42,375 --> 01:01:46,056
If there is a lot of wind, maybe you try to shoot faster?

980
01:01:47,836 --> 01:01:57,778
So we didn't. I mean, that would be quite nice in one way, but also we wanted to keep it quite a structured, processed thing.

981
01:01:57,818 --> 01:02:01,139
Because we were going to shoot so many, we wanted to make sure we always had like the...

982
01:02:01,782 --> 01:02:05,577
the same exposures coming back and like no surprises when you're cleaning it up

983
01:02:05,597 --> 01:02:06,381
where someone's like

984
01:02:07,475 --> 01:02:12,758
maybe quickly taking the ND filters out and then done quicker shots because it's all overcast or something.

985
01:02:12,818 --> 01:02:17,540
And so we opted for that consistency over doing that.

986
01:02:17,580 --> 01:02:19,100
But yeah, you could definitely get a quality.

987
01:02:19,160 --> 01:02:24,423
So the advice is to find the right setting for quite all the situation

988
01:02:24,503 --> 01:02:28,144
and try to stick to this for the best workflow?

989
01:02:29,225 --> 01:02:33,687
I think that's probably quite specific to our needs on the game.

990
01:02:33,767 --> 01:02:34,187
So like...

991
01:02:36,427 --> 01:02:40,130
Yeah, we wanted these consistent things.

992
01:02:40,190 --> 01:02:44,633
I suppose if you're taking a time lapse of fast moving

993
01:02:45,054 --> 01:02:47,035
clouds, and you know it's fast moving,

994
01:02:47,055 --> 01:02:48,637
and you have time to adapt to it,

995
01:02:48,717 --> 01:02:52,000
I think you'll probably get a better quality from doing that.

996
01:02:52,040 --> 01:02:53,761
But yeah.

997
01:02:54,302 --> 01:02:55,523
OK, thanks a lot.

998
01:02:55,543 --> 01:02:56,583
All right, thanks a lot.

999
01:02:57,124 --> 01:02:57,644
Cheers, everyone.

