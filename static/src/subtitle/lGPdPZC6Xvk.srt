1
00:00:05,201 --> 00:00:11,749
Hello, my name is Kate Johnson. I'm a senior designer at Hangar 13 and this is Sergio Oteog.

2
00:00:11,870 --> 00:00:16,515
He is our AI lead at Hangar 13 and we'd like to welcome you to our talk,

3
00:00:16,656 --> 00:00:21,261
Triage on the Frontline, Improving Mafia 3 in AI and a Live Product.

4
00:00:23,419 --> 00:00:26,142
So over the next 30 minutes, we're gonna start talking

5
00:00:26,202 --> 00:00:29,246
about our approach to the post-launch improvement

6
00:00:29,326 --> 00:00:32,550
of Mafia III's AI, specifically a patch.

7
00:00:33,631 --> 00:00:36,094
We are going to start by sort of going over

8
00:00:36,214 --> 00:00:38,177
what the AI was in Mafia III,

9
00:00:38,277 --> 00:00:39,598
sort of talk about our gameplay.

10
00:00:40,379 --> 00:00:42,741
We're gonna talk a little bit about why we decided to patch

11
00:00:42,841 --> 00:00:44,502
and what our goals were for this patch.

12
00:00:44,983 --> 00:00:46,584
We're gonna go into the patch process

13
00:00:47,024 --> 00:00:50,847
and we're gonna specifically focus on triage

14
00:00:50,967 --> 00:00:54,050
and how we identified problems to solve.

15
00:00:55,231 --> 00:00:57,512
And then we're gonna sort of wrap everything up

16
00:00:57,552 --> 00:00:59,534
with a few examples to hopefully get you guys

17
00:01:00,355 --> 00:01:01,756
seeing how our process sort of worked

18
00:01:01,816 --> 00:01:05,819
and there will also be some cautionary tales in there

19
00:01:06,359 --> 00:01:06,720
for sure.

20
00:01:09,960 --> 00:01:12,701
So Mafia III released in October of 2016,

21
00:01:12,741 --> 00:01:16,123
and it is an open world crime drama

22
00:01:16,183 --> 00:01:19,385
set in the city of New Bordeaux in the turbulent 1960s.

23
00:01:20,386 --> 00:01:22,767
The gameplay in Mafia III consisted of

24
00:01:22,787 --> 00:01:26,029
a combination of stealth, we had driving,

25
00:01:26,109 --> 00:01:27,750
and then we had a whole bunch of combat.

26
00:01:31,642 --> 00:01:34,464
And to support this gameplay and also to sort of realize

27
00:01:34,504 --> 00:01:38,428
the world of Mafia III, we populated the city

28
00:01:38,788 --> 00:01:42,171
with a mix of enemies, allies, police, and civilian NPCs.

29
00:01:43,172 --> 00:01:45,774
And all of these NPCs have a bunch of different ways

30
00:01:45,834 --> 00:01:47,195
that the player can interact with them.

31
00:01:49,993 --> 00:01:51,933
The way that they were implemented was

32
00:01:53,334 --> 00:01:57,515
through both systemic and scripted encounters.

33
00:01:58,195 --> 00:02:00,836
The scripted stuff was focused more on the pre-combat.

34
00:02:00,876 --> 00:02:02,456
We wanted to set up all these really cool

35
00:02:02,517 --> 00:02:04,677
narrative vignettes so that the player

36
00:02:04,697 --> 00:02:06,198
would really feel this living world

37
00:02:06,218 --> 00:02:08,278
that we were building in New Bordeaux.

38
00:02:08,859 --> 00:02:11,479
And then as far as systemic behaviors,

39
00:02:12,060 --> 00:02:14,820
most of our search, combat, and wander AI

40
00:02:14,880 --> 00:02:16,001
was all fully systemic.

41
00:02:17,122 --> 00:02:20,267
So as an AI team on this project,

42
00:02:20,387 --> 00:02:22,831
we really had this goal of supporting

43
00:02:23,232 --> 00:02:25,536
the best possible quality in both of those areas.

44
00:02:27,545 --> 00:02:30,068
And by the time we shipped, we felt like we had actually

45
00:02:30,088 --> 00:02:31,189
achieved a lot of this stuff.

46
00:02:31,229 --> 00:02:35,113
We had gone a long way towards achieving our list of goals.

47
00:02:36,114 --> 00:02:41,299
However, between the upcoming DLC needs, the sort of wish

48
00:02:41,319 --> 00:02:44,542
list that we had, just of things that we had wanted to

49
00:02:44,582 --> 00:02:47,245
improve over the course of the project, but couldn't for one

50
00:02:47,265 --> 00:02:48,006
reason or another.

51
00:02:49,127 --> 00:02:52,349
And then finally, player feedback.

52
00:02:52,389 --> 00:02:55,211
We paid a lot of attention to forum comments

53
00:02:55,271 --> 00:02:56,872
and things like that, and sort of were seeing

54
00:02:56,932 --> 00:02:58,113
how players were receiving the game.

55
00:03:00,014 --> 00:03:01,635
We still had a lot of work to do.

56
00:03:03,197 --> 00:03:05,358
So the first thing that we decided after we shipped

57
00:03:05,458 --> 00:03:07,580
was that we were gonna sit down and figure out

58
00:03:07,640 --> 00:03:10,141
how to make a patch, and I'm gonna hand off to Sergio.

59
00:03:12,092 --> 00:03:14,994
Yeah, so we are all game developers, right?

60
00:03:15,234 --> 00:03:19,376
And we spend big parts of our lives working on these things.

61
00:03:19,576 --> 00:03:23,117
Like we spend weeks, we spend months, years

62
00:03:23,197 --> 00:03:23,898
working on this thing.

63
00:03:25,058 --> 00:03:27,820
And we are very passionate about what we do.

64
00:03:28,020 --> 00:03:31,601
And we always want to do things as best as we can.

65
00:03:31,702 --> 00:03:33,142
And we are always trying to improve.

66
00:03:33,202 --> 00:03:34,923
And we are never happy with what we do, right?

67
00:03:35,583 --> 00:03:37,504
So that's where we were at the end of Mafia.

68
00:03:39,152 --> 00:03:41,375
happy but not happy at the same time, right?

69
00:03:41,395 --> 00:03:43,037
We wanted to do things better.

70
00:03:43,217 --> 00:03:46,281
And at the same time, well, around that time

71
00:03:46,321 --> 00:03:47,303
is when I joined the studio.

72
00:03:47,343 --> 00:03:49,806
I joined the studio two months before Shipping Mafia.

73
00:03:50,767 --> 00:03:53,070
And when I joined, we were also looking at the future.

74
00:03:53,130 --> 00:03:56,294
What's the future going to be for the studio in terms of AI?

75
00:03:58,737 --> 00:04:04,121
So we decided to put both things together and start applying some of the new ideas and

76
00:04:04,161 --> 00:04:08,525
new things to Mafia, because we had a good testbed in there for us.

77
00:04:10,126 --> 00:04:13,869
So the first thing that we did was just assemble a strike team.

78
00:04:14,550 --> 00:04:17,492
And the strike team was a group of people from different departments.

79
00:04:17,672 --> 00:04:21,115
We had engineers, an animator, a designer.

80
00:04:21,996 --> 00:04:26,419
We had QA, and we were fully dedicated to this process.

81
00:04:27,100 --> 00:04:29,542
During two, three months, we were just every day

82
00:04:29,622 --> 00:04:30,963
just looking at the game and thinking,

83
00:04:30,983 --> 00:04:32,644
you know what, can we do better for the game

84
00:04:32,684 --> 00:04:33,905
to make it look even better?

85
00:04:35,246 --> 00:04:37,788
So with this in mind, we set our goals.

86
00:04:38,929 --> 00:04:39,850
And basically, we had two.

87
00:04:40,370 --> 00:04:42,272
The first one was to make it better, obviously.

88
00:04:44,239 --> 00:04:45,740
That was the main thing, right?

89
00:04:45,780 --> 00:04:51,363
We wanted to go and fix all those things that we were not super happy about, all the things

90
00:04:51,403 --> 00:04:57,027
that players were not having so much fun with, and we wanted to try and do it for as many

91
00:04:57,047 --> 00:05:01,029
people as possible because we wanted this thing to really change the perception of the

92
00:05:01,089 --> 00:05:02,110
AI in the game, right?

93
00:05:03,311 --> 00:05:07,453
But the second objective we had was equally important to the first one.

94
00:05:07,733 --> 00:05:08,613
It's do no harm.

95
00:05:09,214 --> 00:05:13,096
So we had so many systems in the game, and they were interconnected everywhere,

96
00:05:13,236 --> 00:05:16,858
and we wanted to make sure that whatever we changed, we never broke anything.

97
00:05:17,758 --> 00:05:20,800
So that was key for us.

98
00:05:20,880 --> 00:05:24,122
Like, do things better, but don't do things worse.

99
00:05:24,522 --> 00:05:25,923
Always go forward, never regress.

100
00:05:26,743 --> 00:05:29,745
And now Kate is going to talk a little bit about the process.

101
00:05:32,026 --> 00:05:32,166
So...

102
00:05:34,402 --> 00:05:38,604
Once we had formed the Strike team and identified that we wanted to start building this patch,

103
00:05:39,165 --> 00:05:42,766
we sort of came up with a daily process that we went through.

104
00:05:44,067 --> 00:05:48,809
And this was, we would get together, well actually first we would all play the game

105
00:05:48,849 --> 00:05:50,610
at our desk and we'd play the latest build.

106
00:05:51,030 --> 00:05:55,092
We would look at whatever had gone in the previous day and we all had sort of an idea

107
00:05:55,252 --> 00:05:57,673
of what the changes were that we had implemented before.

108
00:05:58,133 --> 00:06:00,754
we would be evaluating each individually

109
00:06:01,074 --> 00:06:03,155
to make sure that the changes we had implemented

110
00:06:03,375 --> 00:06:05,635
were in and doing what they were supposed to do.

111
00:06:06,215 --> 00:06:07,756
And we were also looking to make sure

112
00:06:07,776 --> 00:06:09,516
that we didn't introduce any new issues.

113
00:06:11,257 --> 00:06:14,477
Once we had done this and sort of gotten an idea

114
00:06:14,497 --> 00:06:17,158
of the overall health of the game,

115
00:06:17,898 --> 00:06:20,119
we would all get together and sit down

116
00:06:20,179 --> 00:06:22,759
and we'd go over this master task list that we had

117
00:06:22,899 --> 00:06:24,700
of all of the things that we wanted to fix

118
00:06:24,760 --> 00:06:26,260
and improve in Mafia III.

119
00:06:26,620 --> 00:06:27,120
And I don't know...

120
00:06:28,501 --> 00:06:32,104
if you guys can imagine, but this was a massive list for us,

121
00:06:32,144 --> 00:06:34,827
just of all the things that we had wanted to do

122
00:06:34,947 --> 00:06:37,669
or thought would be cool or cool ways to improve the game,

123
00:06:38,430 --> 00:06:40,992
in addition to that player feedback

124
00:06:41,072 --> 00:06:43,915
and feedback from the directors that we had compiled.

125
00:06:45,236 --> 00:06:48,400
One of the first things that we had to do once we all sat down

126
00:06:48,440 --> 00:06:50,163
and looked at this list every day

127
00:06:50,203 --> 00:06:52,566
was sort of figure out how to prioritize everything.

128
00:06:52,926 --> 00:06:54,508
And when I'm talking about prioritization,

129
00:06:55,209 --> 00:06:58,934
the way we measured it was to look at impact, complexity,

130
00:06:59,114 --> 00:06:59,675
and cost.

131
00:07:02,668 --> 00:07:05,710
And when I talk about impact, it's pretty straightforward.

132
00:07:05,871 --> 00:07:08,052
It's how big of an improvement, what's the delta

133
00:07:08,933 --> 00:07:12,936
from the starting point to what we expect the change to be

134
00:07:13,056 --> 00:07:14,617
like once we've finished implementing.

135
00:07:16,079 --> 00:07:18,520
Is this going to go from being something that's okay

136
00:07:18,540 --> 00:07:20,742
to something that's great, or is it just gonna be

137
00:07:20,762 --> 00:07:21,743
a little bit of a change?

138
00:07:22,103 --> 00:07:24,005
And then the other side of this is how many people

139
00:07:24,085 --> 00:07:25,186
is this going to affect?

140
00:07:25,206 --> 00:07:25,606
So,

141
00:07:28,417 --> 00:07:30,759
We didn't have a lot of time to work on this patch.

142
00:07:30,799 --> 00:07:32,881
It was a patch cycle, so we had about three months.

143
00:07:33,081 --> 00:07:37,104
And while an issue that affected a small percentage

144
00:07:37,304 --> 00:07:40,407
of the playing population wouldn't necessarily

145
00:07:40,467 --> 00:07:43,509
fall off our radar with this prioritization process,

146
00:07:43,829 --> 00:07:47,352
we definitely put emphasis on looking at issues

147
00:07:47,412 --> 00:07:49,034
that were gonna affect the most players

148
00:07:49,054 --> 00:07:51,856
and that most people were gonna get a benefit from.

149
00:07:54,482 --> 00:07:56,903
So the next thing I'm gonna talk about a little bit

150
00:07:56,943 --> 00:07:57,804
is complexity.

151
00:07:58,784 --> 00:08:02,867
So if you take a system like our police dispatch system,

152
00:08:02,907 --> 00:08:04,568
which was sort of one of our global systems

153
00:08:04,608 --> 00:08:06,950
that the player interacted with in the game world,

154
00:08:09,231 --> 00:08:10,912
this is something where a change could be

155
00:08:10,952 --> 00:08:12,473
a really high impact change

156
00:08:12,553 --> 00:08:14,194
because it would affect a lot of players.

157
00:08:15,755 --> 00:08:16,676
But if you look at...

158
00:08:18,127 --> 00:08:21,707
all of the things that changing this police dispatch system

159
00:08:21,767 --> 00:08:24,048
could potentially affect,

160
00:08:25,288 --> 00:08:28,769
you could end up seeing a lot of potential

161
00:08:28,829 --> 00:08:31,170
for unintended consequences and knock-on effects.

162
00:08:31,630 --> 00:08:33,750
So when we looked at complexity,

163
00:08:33,790 --> 00:08:36,051
we were talking about what is the potential

164
00:08:36,091 --> 00:08:38,112
for this having unintended consequences,

165
00:08:38,152 --> 00:08:40,712
and we wanted to try and avoid that as much as possible.

166
00:08:42,505 --> 00:08:45,745
And then the third item that we talked about was cost,

167
00:08:45,805 --> 00:08:48,166
and cost is, again, straightforward.

168
00:08:48,206 --> 00:08:49,366
It's time and resources.

169
00:08:49,446 --> 00:08:51,487
We had about three months to put this patch together,

170
00:08:51,547 --> 00:08:52,747
so we didn't have a lot of time,

171
00:08:53,167 --> 00:08:56,408
which meant that we couldn't look at fixes or improvements

172
00:08:56,468 --> 00:08:59,028
that were going to take weeks and weeks of effort.

173
00:08:59,369 --> 00:09:04,150
We needed to be able to get as much into this patch as possible.

174
00:09:04,570 --> 00:09:06,790
And as far as resources, there's the human element.

175
00:09:06,830 --> 00:09:08,971
So the studio was super supportive of us,

176
00:09:09,051 --> 00:09:11,451
and they offered us all the help that we needed,

177
00:09:11,491 --> 00:09:12,292
but at the same time...

178
00:09:12,832 --> 00:09:15,954
we needed to be respectful of the fact that they were working on DLC.

179
00:09:16,895 --> 00:09:19,056
So we needed to try and avoid pulling in,

180
00:09:19,076 --> 00:09:27,782
you know, animators or artists off of what they were doing. So things that included like new barks or new animations or

181
00:09:28,123 --> 00:09:30,925
new art assets were generally off the table for us.

182
00:09:33,608 --> 00:09:38,210
So to sort of bring it all in to focus on a specific item,

183
00:09:39,070 --> 00:09:42,711
I'm going to talk about one of the things that sort of came up for us

184
00:09:44,072 --> 00:09:45,412
right after we shipped, essentially,

185
00:09:45,592 --> 00:09:48,273
one of the first things that we tried to tackle.

186
00:09:48,833 --> 00:09:50,713
And basically we discovered that we had an issue

187
00:09:50,733 --> 00:09:55,135
with the way that enemies were reacting to gunshot events,

188
00:09:55,475 --> 00:09:56,815
so the player firing a weapon.

189
00:09:58,745 --> 00:10:02,348
So the way our enemies worked is that they had

190
00:10:02,748 --> 00:10:04,209
an event-based reaction system.

191
00:10:05,190 --> 00:10:07,751
We would trigger events based on player actions.

192
00:10:08,992 --> 00:10:11,134
They would either be local to the player position

193
00:10:11,334 --> 00:10:14,156
or based on wherever a thing was happening in the world,

194
00:10:14,196 --> 00:10:15,376
for example, a bullet impact,

195
00:10:15,857 --> 00:10:18,178
and then we would use those events to trigger a reaction,

196
00:10:18,218 --> 00:10:19,759
which would then trigger a state change

197
00:10:20,040 --> 00:10:22,161
or a behavior change in our AI.

198
00:10:24,339 --> 00:10:28,760
And the gunshot was tuned to be about 40 meters.

199
00:10:29,841 --> 00:10:31,021
And that's pretty short.

200
00:10:32,082 --> 00:10:35,163
And like if you think of 40 meters for how far away

201
00:10:35,203 --> 00:10:38,585
somebody can hear a gunshot in a big game like ours,

202
00:10:39,105 --> 00:10:40,105
it's not a lot of distance.

203
00:10:40,165 --> 00:10:41,446
And we did this for a reason.

204
00:10:41,966 --> 00:10:43,867
We did this because we wanted to make sure

205
00:10:44,287 --> 00:10:48,229
that the player wasn't aggroing enemies

206
00:10:48,289 --> 00:10:50,570
that were outside of their area of focus.

207
00:10:50,610 --> 00:10:52,631
And we had a really densely packed encounter

208
00:10:53,752 --> 00:10:55,714
layout in our open world,

209
00:10:55,734 --> 00:10:58,197
and there were enemies around every corner,

210
00:10:58,237 --> 00:11:00,620
and we didn't want the player to get suddenly surprised

211
00:11:00,680 --> 00:11:01,882
by a group of guys running around

212
00:11:01,922 --> 00:11:04,225
because they had started a war

213
00:11:04,265 --> 00:11:06,567
with another group in a backyard.

214
00:11:09,668 --> 00:11:11,069
This all worked fairly well.

215
00:11:11,589 --> 00:11:13,350
We also had an event, by the way,

216
00:11:13,410 --> 00:11:17,291
that was happening outside of this 40 meter distance

217
00:11:17,491 --> 00:11:19,192
for bullet impact, like I said before,

218
00:11:19,272 --> 00:11:20,493
and also for enemies dying.

219
00:11:21,693 --> 00:11:23,974
But this would not trigger combat,

220
00:11:24,094 --> 00:11:25,614
it would trigger search behavior.

221
00:11:26,915 --> 00:11:29,116
So overall, you can kind of see how this might play out,

222
00:11:29,136 --> 00:11:30,236
and I'm gonna show an example

223
00:11:30,276 --> 00:11:32,157
of actually where it broke down.

224
00:11:35,758 --> 00:11:37,559
So this is our Get Enzo mission.

225
00:11:39,019 --> 00:11:43,725
And right now, we have the player with the sniper rifle.

226
00:11:44,286 --> 00:11:47,189
And he's outside of that 40 meter range.

227
00:11:47,249 --> 00:11:50,353
So the enemies are doing exactly what we designed them to do.

228
00:11:50,413 --> 00:11:57,282
They are going to search based on their buddies dying.

229
00:12:01,937 --> 00:12:04,097
And while this is hilarious and I kind of love it

230
00:12:04,117 --> 00:12:07,219
for what it is, it's not how we wanted this encounter

231
00:12:07,319 --> 00:12:07,959
to play out.

232
00:12:08,079 --> 00:12:10,580
This was supposed to be a combat encounter

233
00:12:10,960 --> 00:12:12,101
and it wasn't really working.

234
00:12:12,141 --> 00:12:16,422
And the way that it was set up, it was on the golden path.

235
00:12:17,323 --> 00:12:19,003
It was one of the main missions that the player

236
00:12:19,043 --> 00:12:21,004
had to play through and we put that sniper rifle

237
00:12:21,044 --> 00:12:24,545
like right there, so we were kind of asking for it.

238
00:12:26,493 --> 00:12:27,693
So it was high impact for us,

239
00:12:27,753 --> 00:12:29,054
and we really wanted to fix this,

240
00:12:29,094 --> 00:12:30,355
but we also needed to make sure

241
00:12:30,375 --> 00:12:32,776
that we were keeping this fix relatively low cost.

242
00:12:35,077 --> 00:12:37,018
So the first thing that we did was we tried to sort of

243
00:12:37,078 --> 00:12:39,339
figure out what the problem was that we were trying to solve,

244
00:12:39,379 --> 00:12:41,840
and the first thing that, or the initial problem

245
00:12:41,880 --> 00:12:44,682
that was presented to us was that enemies feel stupid

246
00:12:44,702 --> 00:12:45,722
because they don't seem to care

247
00:12:45,782 --> 00:12:46,823
that the player's killing them.

248
00:12:49,026 --> 00:12:54,430
Which is true, they really didn't look like they cared very much or they subdued, like

249
00:12:54,470 --> 00:12:55,411
a subdued caring.

250
00:12:57,472 --> 00:13:01,495
So we're going to talk about some potential fixes for this particular issue.

251
00:13:02,296 --> 00:13:05,698
So we had an infinite time and resources version where they were going to have this really

252
00:13:05,798 --> 00:13:09,501
awesome behavior where they dove into cover and then like peeked out and then sent a buddy

253
00:13:09,661 --> 00:13:10,701
up and were like watching.

254
00:13:11,202 --> 00:13:14,004
We really wanted to do this, but it required a lot of signs

255
00:13:14,064 --> 00:13:15,866
and feedback that we weren't able to provide

256
00:13:15,926 --> 00:13:18,088
as far as animations and barks and other things.

257
00:13:18,428 --> 00:13:20,530
So this was pretty much off the table right away.

258
00:13:21,811 --> 00:13:23,072
Another option that we discussed

259
00:13:23,132 --> 00:13:25,294
that was a really inexpensive option for us

260
00:13:25,314 --> 00:13:27,816
would have been to actually fix it in this mission directly

261
00:13:28,276 --> 00:13:30,418
and just say any time the player fires a weapon

262
00:13:30,838 --> 00:13:33,261
in the Get Enzo mission, everybody just goes into combat.

263
00:13:34,108 --> 00:13:35,968
And it would have solved this specific problem,

264
00:13:36,529 --> 00:13:40,010
but there are two reasons why we didn't end up going for that.

265
00:13:40,170 --> 00:13:42,191
One is that it wouldn't have solved it anywhere else.

266
00:13:42,251 --> 00:13:43,971
This is actually a systemic problem

267
00:13:44,011 --> 00:13:47,812
with the way enemies react to gunshots outside of 40 meters,

268
00:13:48,013 --> 00:13:50,173
and it could be reproduced anywhere in the world.

269
00:13:51,994 --> 00:13:53,534
And then the second side of it is that.

270
00:13:54,535 --> 00:13:56,677
It was really important to us not to take

271
00:13:56,897 --> 00:13:58,818
these sort of tools away from the player,

272
00:13:58,878 --> 00:14:01,220
and the player had silenced weapons,

273
00:14:01,580 --> 00:14:04,342
and had the ability to play through this mission in stealth,

274
00:14:04,463 --> 00:14:06,124
and we didn't want to remove that.

275
00:14:06,264 --> 00:14:08,486
So that was, again, not something

276
00:14:08,546 --> 00:14:09,987
that we felt comfortable doing.

277
00:14:11,162 --> 00:14:13,564
The third option for us was to extend

278
00:14:13,624 --> 00:14:15,765
that 40 meter distance to 60 meters.

279
00:14:16,225 --> 00:14:17,586
And that would have sort of taken care

280
00:14:17,626 --> 00:14:20,507
of what we saw right there, and it would have worked,

281
00:14:20,547 --> 00:14:22,048
and it would have worked all over the game.

282
00:14:23,329 --> 00:14:25,410
But if you remember when I talked about

283
00:14:25,450 --> 00:14:26,851
the sort of density of encounters

284
00:14:26,891 --> 00:14:28,352
that we had packed into the open world,

285
00:14:29,112 --> 00:14:30,433
it could have, it had the potential

286
00:14:30,473 --> 00:14:31,934
to break a lot of other things.

287
00:14:33,514 --> 00:14:36,056
And also, there's no reason that the player

288
00:14:36,096 --> 00:14:39,258
couldn't move to like 61 meters and cause the same issue.

289
00:14:40,315 --> 00:14:46,579
So, we sort of looked at this original problem

290
00:14:46,879 --> 00:14:49,281
and tried to rework it into something

291
00:14:49,321 --> 00:14:52,063
that was a little bit more specific and solvable for us.

292
00:14:52,543 --> 00:14:54,985
And what we came up with was that the enemies feel stupid

293
00:14:55,385 --> 00:14:57,947
because they react calmly to the loud shooting death

294
00:14:58,127 --> 00:14:59,809
of an ally in close proximity.

295
00:15:03,593 --> 00:15:10,116
Rephrasing the problem this way and looking at the specific actions and the specific thing that the enemies were doing that made them feel broken

296
00:15:11,457 --> 00:15:17,320
Sort of helped us figure out what the fix could be and we had this reaction system that I described before

297
00:15:17,740 --> 00:15:20,582
Really all we really needed to do was add a new reaction

298
00:15:20,602 --> 00:15:21,502
to a new event

299
00:15:23,584 --> 00:15:26,009
that was an event based on loud shooting,

300
00:15:27,271 --> 00:15:29,515
that would escalate them to combat instead of search.

301
00:15:29,955 --> 00:15:32,640
And so it was a super easy fix for us.

302
00:15:33,081 --> 00:15:36,006
We went ahead and tried it out, and this was the result.

303
00:15:44,211 --> 00:15:47,714
So this is much closer to sort of how we wanted

304
00:15:47,954 --> 00:15:48,995
the enemies to behave.

305
00:15:49,035 --> 00:15:52,097
And we had solved this issue pretty well, we felt.

306
00:15:52,157 --> 00:15:54,079
And we patted ourselves on the back

307
00:15:54,139 --> 00:15:55,840
and we were quite pleased.

308
00:15:58,162 --> 00:16:00,263
Which brings me to my next slide.

309
00:16:01,765 --> 00:16:05,507
So while we were all congratulating ourselves

310
00:16:05,568 --> 00:16:08,109
and breaking open the champagne for job well done,

311
00:16:10,246 --> 00:16:12,547
QA was finding an issue.

312
00:16:14,488 --> 00:16:17,170
And basically what we had done was

313
00:16:17,550 --> 00:16:20,471
we had forgotten that the pedestrians in our game

314
00:16:20,551 --> 00:16:23,273
used a completely separate reaction table from the enemies,

315
00:16:24,013 --> 00:16:26,754
and we had sort of forgotten to incorporate this event

316
00:16:26,835 --> 00:16:27,995
into their reaction table,

317
00:16:28,055 --> 00:16:29,756
so when we removed it for loud weapons,

318
00:16:29,816 --> 00:16:31,097
all of a sudden you had a bunch of enemies

319
00:16:31,137 --> 00:16:33,278
that were standing around looking like goons

320
00:16:33,318 --> 00:16:34,879
whenever the player opened fire.

321
00:16:35,459 --> 00:16:36,159
It was not great.

322
00:16:38,636 --> 00:16:42,178
We were able to fix it pretty quickly, and the fix still ultimately worked.

323
00:16:42,678 --> 00:16:46,981
But this is sort of an example of where testing really becomes important.

324
00:16:47,481 --> 00:16:51,203
So my first line in there is that you are the best person to test your work,

325
00:16:51,303 --> 00:16:55,506
and the reason I have that is because it's something I always really believe in for myself.

326
00:16:56,766 --> 00:17:00,568
that as the person who is implementing content,

327
00:17:01,808 --> 00:17:04,490
I have a responsibility to understand all of the things

328
00:17:04,550 --> 00:17:06,991
that that change is going to impact,

329
00:17:07,051 --> 00:17:08,812
all of the different systems and everything else

330
00:17:08,852 --> 00:17:10,032
that it could potentially touch,

331
00:17:10,452 --> 00:17:13,234
which means that I should know all of the potential

332
00:17:13,274 --> 00:17:15,174
weak points and pay close attention to that.

333
00:17:15,455 --> 00:17:17,075
However, I am fallible.

334
00:17:17,676 --> 00:17:19,857
So I'm going to change it a little bit.

335
00:17:21,557 --> 00:17:23,458
You are one of the best people to test your work.

336
00:17:23,558 --> 00:17:25,199
A lot of us here are fortunate to work.

337
00:17:26,105 --> 00:17:28,568
with a very talented team of QA.

338
00:17:33,213 --> 00:17:36,556
QA folks, and we definitely were.

339
00:17:36,596 --> 00:17:38,637
We had a great team at Hangar 13.

340
00:17:39,979 --> 00:17:42,801
And one of the ways that we really tried to empower them

341
00:17:43,021 --> 00:17:45,243
was by being vocal about our changes

342
00:17:45,383 --> 00:17:49,306
and making sure that anything that we introduced,

343
00:17:49,907 --> 00:17:52,008
they understood the ramifications of,

344
00:17:52,048 --> 00:17:54,851
and they understood how it worked, what the changes was,

345
00:17:55,351 --> 00:17:56,392
what all the systems were.

346
00:17:57,393 --> 00:17:59,916
and what the potential weak points were for it.

347
00:17:59,996 --> 00:18:01,898
And that allowed them to test more effectively,

348
00:18:02,298 --> 00:18:04,540
which made this turnaround a lot faster.

349
00:18:04,660 --> 00:18:06,042
So trust your QA team.

350
00:18:06,923 --> 00:18:08,484
They're probably not out to get you.

351
00:18:08,905 --> 00:18:10,766
And with that, I'm gonna pass you off to Sergio.

352
00:18:12,539 --> 00:18:14,581
All right, so now I'm going to show you

353
00:18:14,901 --> 00:18:16,642
a couple of exact examples.

354
00:18:16,742 --> 00:18:18,843
We want to illustrate the process a little bit better.

355
00:18:19,284 --> 00:18:21,025
So we want you to really understand

356
00:18:21,205 --> 00:18:24,788
what it was like for us during that period of time, right?

357
00:18:25,608 --> 00:18:28,150
So as Kate said before, the first thing that we did

358
00:18:28,590 --> 00:18:30,051
every day was basically play the game.

359
00:18:30,432 --> 00:18:32,673
And play the game looking at trying

360
00:18:32,713 --> 00:18:34,134
to find things that were broken in there

361
00:18:34,274 --> 00:18:36,095
or that didn't feel that good, right?

362
00:18:37,416 --> 00:18:40,517
So this is what we're going to do now, like all together.

363
00:18:40,557 --> 00:18:44,999
Let's look at a video from Mafia 3 and try to see what

364
00:18:45,059 --> 00:18:46,119
doesn't feel right to you.

365
00:18:50,721 --> 00:18:54,623
So in here, basically, the player is whistling at that

366
00:18:54,663 --> 00:18:55,243
group of people.

367
00:18:55,923 --> 00:18:57,644
And one of them is going to come over.

368
00:18:58,884 --> 00:19:00,305
And the player just takes him down.

369
00:19:05,106 --> 00:19:05,226
OK.

370
00:19:07,459 --> 00:19:17,876
Yeah, we didn't have audio in there.

371
00:19:17,896 --> 00:19:17,936
So.

372
00:19:21,379 --> 00:19:22,841
What did not feel right to you?

373
00:19:23,141 --> 00:19:25,164
So to me, it was this part, right?

374
00:19:25,745 --> 00:19:27,928
You were taking down a guy that just came

375
00:19:27,968 --> 00:19:28,909
from that group of people.

376
00:19:29,610 --> 00:19:30,952
Those guys were still looking at him,

377
00:19:31,292 --> 00:19:32,875
and we had that big window in there,

378
00:19:33,115 --> 00:19:34,156
and they were not reacting to it.

379
00:19:34,337 --> 00:19:36,279
They were just completely ignoring the fact

380
00:19:36,319 --> 00:19:38,082
that his friend was being killed, right?

381
00:19:39,616 --> 00:19:43,378
So, you know, finding the problem in this situation is pretty simple, right?

382
00:19:43,538 --> 00:19:48,902
The problem is that enemies feel unresponsive because they don't react to a visible take-down.

383
00:19:49,582 --> 00:19:51,283
And the solution for this is also...

384
00:19:52,496 --> 00:19:53,737
Fairly straightforward, right?

385
00:19:54,117 --> 00:19:56,199
You have to make it visible for them.

386
00:19:56,879 --> 00:19:59,421
You have to be careful and have some radius

387
00:19:59,461 --> 00:20:02,423
so that they don't see it in a super long distance.

388
00:20:02,463 --> 00:20:04,405
But that's kind of like the normal vision anyway, right?

389
00:20:05,205 --> 00:20:06,186
So that is what we did.

390
00:20:06,506 --> 00:20:07,967
So I'm just going to show you.

391
00:20:08,007 --> 00:20:08,307
Huh?

392
00:20:08,608 --> 00:20:11,069
God damn it to hell!

393
00:20:24,880 --> 00:20:29,342
So now you can see that the other two guys reacted, freaked out, and went into combat

394
00:20:29,823 --> 00:20:31,644
the way they were supposed to do at the beginning, right?

395
00:20:32,484 --> 00:20:36,506
So let's take a look at the video again, but I'm going to play it for a little bit longer

396
00:20:36,566 --> 00:20:36,706
now.

397
00:20:39,728 --> 00:20:43,410
So again, this is a video from before the patch, so it's exactly the same thing.

398
00:20:43,430 --> 00:20:49,734
Those guys are not going to react to the thing now.

399
00:20:53,229 --> 00:21:00,693
So, what did not feel right in here?

400
00:21:21,811 --> 00:21:25,904
So you know, when we were looking at the prong, we thought that the

401
00:21:27,215 --> 00:21:28,996
The problem was that whistle was OP.

402
00:21:29,816 --> 00:21:33,297
The problem is that you have this tool that is so powerful

403
00:21:33,637 --> 00:21:36,118
that people can exploit it so easily.

404
00:21:36,879 --> 00:21:40,180
So when someone tells you this thing is super overpowered,

405
00:21:40,560 --> 00:21:42,460
what you do is try to make it less powerful.

406
00:21:43,121 --> 00:21:44,001
And that's what we tried to do.

407
00:21:44,501 --> 00:21:46,402
So the first thing that we tried to do was, OK,

408
00:21:46,782 --> 00:21:51,764
so what if guys after the subsequent whistles

409
00:21:51,984 --> 00:21:53,684
don't come to investigate?

410
00:21:53,904 --> 00:21:54,965
They just ignore the fact.

411
00:21:55,805 --> 00:21:56,986
But that felt pretty broken, right?

412
00:21:57,006 --> 00:21:58,347
Because it was only one guy coming,

413
00:21:58,387 --> 00:21:59,888
and then the rest were like, you know,

414
00:22:00,148 --> 00:22:01,830
completely unresponsive to that thing.

415
00:22:01,850 --> 00:22:04,672
So we didn't like that solution.

416
00:22:04,752 --> 00:22:07,534
Second solution was to, you know,

417
00:22:07,634 --> 00:22:10,236
having, rather than having one guy come to investigate,

418
00:22:10,276 --> 00:22:11,377
why don't we send two guys?

419
00:22:11,597 --> 00:22:13,499
Because that way, you know, if you kill one,

420
00:22:13,539 --> 00:22:17,282
the other will alert the rest of the scenario, right?

421
00:22:18,367 --> 00:22:21,871
But that thing was breaking stealth for us.

422
00:22:22,051 --> 00:22:25,535
Because this was actually a design decision.

423
00:22:26,316 --> 00:22:28,659
We wanted the player to be able to play with these tools

424
00:22:28,719 --> 00:22:33,164
and to feel powerful and to be able to thin the hurt

425
00:22:33,244 --> 00:22:37,309
and to be able to do all these things.

426
00:22:40,220 --> 00:22:42,301
So that solution didn't work for us either.

427
00:22:43,142 --> 00:22:45,664
And the third solution that we tried was to basically

428
00:22:45,764 --> 00:22:48,606
escalate response based on number of whistles.

429
00:22:48,666 --> 00:22:50,568
So the first one would be an investigation.

430
00:22:50,608 --> 00:22:52,469
But if you whistle again, maybe they go into search.

431
00:22:52,489 --> 00:22:54,030
If you whistle again, they go into combat.

432
00:22:54,491 --> 00:22:59,154
But it felt pretty weird that if you whistle at someone from

433
00:22:59,314 --> 00:23:01,796
20 meters, they immediately know that you're there.

434
00:23:01,836 --> 00:23:03,818
And they just want to kill you because someone

435
00:23:03,858 --> 00:23:04,358
whistled from there.

436
00:23:05,299 --> 00:23:06,580
So we didn't like it either.

437
00:23:07,140 --> 00:23:10,643
Although this last solution, I have to say that we kept it

438
00:23:10,703 --> 00:23:11,984
for the game for some things.

439
00:23:12,144 --> 00:23:14,947
Like if you whistled at a guy that was right next to you

440
00:23:15,948 --> 00:23:18,049
while he was searching that position

441
00:23:18,069 --> 00:23:19,511
because you had already whistled at him,

442
00:23:19,571 --> 00:23:21,072
then he would have gone into combat

443
00:23:21,092 --> 00:23:22,813
because he was pissed off at that point, right?

444
00:23:23,694 --> 00:23:29,118
But, you know, I think that the actual problem

445
00:23:29,158 --> 00:23:30,580
was more this.

446
00:23:31,100 --> 00:23:32,581
Like, you know, whistle was OP, right?

447
00:23:33,562 --> 00:23:36,485
But, you know, and this comic is awesome.

448
00:23:36,505 --> 00:23:40,110
We found it when we were working on the talk

449
00:23:40,150 --> 00:23:42,052
and it reflects the thing perfectly.

450
00:23:42,833 --> 00:23:43,994
But the actual problem is this.

451
00:23:44,174 --> 00:23:46,437
The actual problem is that we still feel soapy

452
00:23:46,798 --> 00:23:49,781
because the enemies keep coming to investigate

453
00:23:49,801 --> 00:23:51,283
the same location over and over.

454
00:23:54,166 --> 00:23:55,807
So, you know, how do we solve that then?

455
00:23:56,327 --> 00:23:59,528
So we knew that we wanted to keep the same sort of behavior

456
00:23:59,608 --> 00:24:01,309
because that was the way stealth was

457
00:24:01,349 --> 00:24:02,830
supposed to work in our game.

458
00:24:03,510 --> 00:24:06,011
But we needed to find a way to improve

459
00:24:06,031 --> 00:24:09,253
the behavior of the guys so it didn't feel as stupid as it

460
00:24:09,313 --> 00:24:10,013
felt right now.

461
00:24:10,673 --> 00:24:13,074
And you know, this is something that happens in many games,

462
00:24:13,134 --> 00:24:15,115
but we wanted to be better than that, right?

463
00:24:15,816 --> 00:24:17,116
So what we decided to do.

464
00:24:18,074 --> 00:24:20,615
It's basically to have people that receive a whistle,

465
00:24:20,655 --> 00:24:22,876
like all those people that were with him in the video.

466
00:24:23,436 --> 00:24:25,577
We want them to remember that they had already

467
00:24:25,617 --> 00:24:27,918
received a whistle, and that there was a guy from the group

468
00:24:28,098 --> 00:24:29,979
that went and investigated that thing.

469
00:24:31,578 --> 00:24:34,300
And then when they receive another whistle from the same location, they say,

470
00:24:34,320 --> 00:24:36,742
like, OK, so I know that somebody went there.

471
00:24:36,862 --> 00:24:37,822
I know that that guy is dead.

472
00:24:37,982 --> 00:24:39,984
So there's something going on here.

473
00:24:40,624 --> 00:24:44,087
So we wanted them to call out the fact.

474
00:24:44,427 --> 00:24:46,889
We wanted them to tell you, you know, we know this is wrong.

475
00:24:47,269 --> 00:24:48,890
So now we're going to escalate the behavior.

476
00:24:48,930 --> 00:24:49,651
So that's what we did.

477
00:24:54,278 --> 00:24:58,763
And this video is a bit weird because I have to move around because it's after the fight

478
00:24:58,783 --> 00:25:00,825
so they will see me taking him down.

479
00:25:00,905 --> 00:25:02,787
So I don't want him to see me do that.

480
00:25:03,948 --> 00:25:12,597
I have to wait for him outside of the room so they can block him.

481
00:25:13,458 --> 00:25:15,901
This is what happens when you whistle at the second guy.

482
00:25:22,578 --> 00:25:23,539
Where'd you go, Frey?

483
00:25:27,121 --> 00:25:31,484
I'll bring his dumb ass back.

484
00:25:31,544 --> 00:25:35,687
And you can see that the rest of the scene is also escalating into something else, right?

485
00:25:35,747 --> 00:25:40,970
So, you know, there are a few hints to more of the plot of the movie.

486
00:25:41,070 --> 00:25:42,011
Christ is God.

487
00:25:42,031 --> 00:25:46,053
I don't let you go!

488
00:25:46,393 --> 00:25:50,456
In general, the behavior of the AI was much more appropriate for the situation, right?

489
00:25:51,547 --> 00:25:54,349
So now that I've shown the examples,

490
00:25:54,389 --> 00:25:56,770
I just want to talk about a couple of things

491
00:25:56,810 --> 00:25:58,130
that you should watch out for

492
00:25:58,150 --> 00:26:01,172
if you are working on this sort of problem.

493
00:26:02,032 --> 00:26:04,073
So the first thing is for sure

494
00:26:04,333 --> 00:26:06,474
that you have to identify the right problem.

495
00:26:07,075 --> 00:26:10,016
We've been talking about this twice already in this talk,

496
00:26:10,056 --> 00:26:12,937
right, like we had an issue with the sniper rifle problem

497
00:26:12,957 --> 00:26:14,778
that we didn't know exactly what the problem was

498
00:26:14,838 --> 00:26:16,959
at the beginning, so we were not fixing the right thing.

499
00:26:17,900 --> 00:26:19,300
And we had the same thing during Wizzle.

500
00:26:19,360 --> 00:26:22,741
So identifying exactly what you're trying to solve,

501
00:26:22,801 --> 00:26:23,461
that's the key.

502
00:26:24,542 --> 00:26:26,102
Second thing is being overcautious.

503
00:26:26,402 --> 00:26:28,423
We had this problem in a couple of situations

504
00:26:28,463 --> 00:26:32,244
that we haven't talked about in this presentation.

505
00:26:32,924 --> 00:26:36,025
But if you know that basically we

506
00:26:36,065 --> 00:26:39,186
knew that we needed to fix something going the right way,

507
00:26:39,246 --> 00:26:40,946
and the right way was scary for us.

508
00:26:41,386 --> 00:26:43,827
So we decided to try and do little steps just

509
00:26:43,867 --> 00:26:45,027
to see if that was enough.

510
00:26:45,778 --> 00:26:47,379
But in the end, that was not enough,

511
00:26:47,439 --> 00:26:50,001
and we had to end up doing the scary thing anyway.

512
00:26:50,481 --> 00:26:52,763
So identifying that thing from the beginning is better.

513
00:26:53,703 --> 00:26:55,284
And the last thing is knowing when to stop.

514
00:26:58,206 --> 00:26:59,507
We also had situations like this,

515
00:26:59,607 --> 00:27:01,848
where we were trying to improve something

516
00:27:01,948 --> 00:27:03,609
that was not really broken, but we just

517
00:27:03,649 --> 00:27:05,010
wanted to polish things a little bit more.

518
00:27:07,206 --> 00:27:10,789
But in particular, we wanted to improve the surprise reaction,

519
00:27:10,969 --> 00:27:13,431
like what happened when someone saw you.

520
00:27:14,872 --> 00:27:16,313
Someone was completely unaware of you,

521
00:27:16,413 --> 00:27:18,114
and you just jumped in front of him.

522
00:27:18,755 --> 00:27:22,257
Because that, right now, it was going through normal systems,

523
00:27:22,337 --> 00:27:24,018
normal perception, so it was all good.

524
00:27:24,519 --> 00:27:27,641
But the reaction was that they went into combat right away.

525
00:27:27,981 --> 00:27:29,763
And we wanted some sort of behavior first,

526
00:27:29,803 --> 00:27:30,763
like some sort of reaction.

527
00:27:31,864 --> 00:27:35,385
couldn't make that thing work because of the amount of animations that we needed for it.

528
00:27:35,425 --> 00:27:40,027
We needed animations from different directions, for different weapons, like a lot of things.

529
00:27:42,288 --> 00:27:46,290
So just to recap, the process is basically that you have to identify a problem,

530
00:27:46,690 --> 00:27:48,891
you have to find all the potential improvements,

531
00:27:49,631 --> 00:27:51,892
implement the best one based on impact and cost,

532
00:27:52,932 --> 00:27:56,273
then test it, and, you know, keep iterating and keep doing this thing

533
00:27:56,313 --> 00:27:57,594
until you run out of time, basically.

534
00:27:58,735 --> 00:28:00,786
So that was the end of the talk.

535
00:28:01,007 --> 00:28:02,214
So thank you very much for coming.

536
00:28:02,234 --> 00:28:02,656
Yes.

