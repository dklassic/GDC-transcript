1
00:00:05,448 --> 00:00:09,150
Okay, a couple more friendly, familiar faces in the audience.

2
00:00:09,150 --> 00:00:10,830
How you guys doing today?

3
00:00:10,830 --> 00:00:10,970
Good?

4
00:00:10,970 --> 00:00:14,731
First day of GDC is going really well? Yeah. Okay.

5
00:00:14,731 --> 00:00:17,052
Man, what a pretentious title.

6
00:00:17,052 --> 00:00:17,732
Moving to Heavens.

7
00:00:17,732 --> 00:00:22,194
Set the bar a little high, didn't I?

8
00:00:22,194 --> 00:00:25,655
All right, well, good afternoon, everyone.

9
00:00:25,655 --> 00:00:27,315
My name is Keith Gurette.

10
00:00:27,315 --> 00:00:30,496
I'm one of the lead effects artists at Naughty Dog.

11
00:00:30,496 --> 00:00:32,997
Don't worry, I don't take this title too seriously.

12
00:00:34,122 --> 00:00:37,043
I just wanted something catchy, and judging by the number of people here, it worked.

13
00:00:37,043 --> 00:00:41,525
So, if you could all do me a favor now, lower your expectations tremendously,

14
00:00:41,525 --> 00:00:44,046
we'll go ahead and get started.

15
00:00:44,046 --> 00:00:48,628
Before I begin, I want to just take a quick survey and get to know you guys.

16
00:00:48,628 --> 00:00:51,149
So how many people out here are programmers?

17
00:00:51,149 --> 00:00:53,370
Go ahead and raise your hands.

18
00:00:53,370 --> 00:00:56,211
Okay, how many of you are artists?

19
00:00:56,211 --> 00:00:56,971
Okay.

20
00:00:56,971 --> 00:00:59,512
How many of you are what we call a technical artist,

21
00:00:59,512 --> 00:01:01,193
the people that kind of fall in the cracks?

22
00:01:01,193 --> 00:01:02,113
Yeah?

23
00:01:02,113 --> 00:01:02,293
So...

24
00:01:02,874 --> 00:01:07,697
You're all the ones that aren't good enough to be an artist or a programmer, right?

25
00:01:07,697 --> 00:01:07,877
Like me?

26
00:01:07,877 --> 00:01:08,177
No, I'm kidding.

27
00:01:08,177 --> 00:01:08,357
That's...

28
00:01:08,357 --> 00:01:08,798
Okay.

29
00:01:08,798 --> 00:01:14,021
Well, today I want to talk to you guys about skies.

30
00:01:14,021 --> 00:01:21,865
Something that's the most overlooked and often stubbed in part of your environment, part

31
00:01:21,865 --> 00:01:23,166
of your visual presentation.

32
00:01:23,166 --> 00:01:24,006
It's the sky.

33
00:01:24,852 --> 00:01:27,974
It's also got a tremendous amount of power to completely transform

34
00:01:27,974 --> 00:01:30,916
your visual presentation. Yet again, nobody really gives it the due justice

35
00:01:30,916 --> 00:01:33,718
and due diligence that it deserves. So, I want to talk to you guys

36
00:01:33,718 --> 00:01:36,900
about what exactly a Sky can do for your presentation.

37
00:01:36,900 --> 00:01:41,463
And then I want to talk to you guys about

38
00:01:41,463 --> 00:01:44,225
probably the most difficult challenge when you're discussing a Sky,

39
00:01:44,225 --> 00:01:45,185
which is how to make it move.

40
00:01:46,746 --> 00:01:49,347
We have a lot of different things that I want to talk to you guys about in this.

41
00:01:49,347 --> 00:01:53,368
I've got a ton of different images and videos to show you guys.

42
00:01:53,368 --> 00:01:58,029
A lot of them are not necessarily mine, so I've done my best to kind of

43
00:01:58,029 --> 00:02:01,831
cite my sources the entire way through, but please just keep in mind that I want the

44
00:02:01,831 --> 00:02:04,591
due credit for the artwork that I'm showing to go to the artists.

45
00:02:04,591 --> 00:02:08,333
And the last thing is, like I said, I've got a ton of stuff to cover, so we're moving a little bit fast.

46
00:02:08,333 --> 00:02:08,693
Okay?

47
00:02:08,693 --> 00:02:15,455
To begin, I want to talk with you about the power of the sky.

48
00:02:17,478 --> 00:02:20,840
From the moment we began working on Last of Us, we recognized that the sky can change

49
00:02:20,840 --> 00:02:24,442
everything about our game. That for us to create an involved and emotionally driven

50
00:02:24,442 --> 00:02:29,885
narrative, we had to pay attention to the sky. We had to utilize it as a tool to sell

51
00:02:29,885 --> 00:02:37,589
our delivery. Let's start with a few of the obvious points. First of all, time of day.

52
00:02:37,589 --> 00:02:43,572
Assuming you're in a normal outdoor setting, the primary light source is probably going

53
00:02:43,572 --> 00:02:46,713
to be the sun or the moon. As the time of day changes, the light source is going to

54
00:02:49,490 --> 00:02:53,851
Your source, positions in the sky, changes.

55
00:02:53,851 --> 00:02:58,252
The light direction, the specular highlights, they change.

56
00:02:58,252 --> 00:03:00,372
The shape of the shadows change.

57
00:03:00,372 --> 00:03:02,193
In fact, your entire composition changes.

58
00:03:02,193 --> 00:03:08,794
Everything because the time of day has changed.

59
00:03:08,794 --> 00:03:12,495
If you're a decent photographer,

60
00:03:12,495 --> 00:03:15,315
one of your most important skills is to see that

61
00:03:15,315 --> 00:03:18,216
great light can make a great photograph.

62
00:03:23,625 --> 00:03:29,307
Composing your shot around the light direction, the shape of the shadows, and the highlights on reflective surfaces can turn something drab

63
00:03:29,307 --> 00:03:31,707
into something stunning.

64
00:03:31,707 --> 00:03:40,130
Lighting has the ability to take any surface, any material, and completely change the character within it that you as a viewer perceive.

65
00:03:40,130 --> 00:03:47,752
For example, this is one of my favorite demonstrations of the effect of lighting.

66
00:03:47,752 --> 00:03:51,553
The video almost appears as if several different faces, some intimidating,

67
00:03:52,467 --> 00:03:58,648
some attractive, some sinister, and some warm and friendly are all being merged and blended together.

68
00:03:58,648 --> 00:04:05,470
Lighting also controls the schedule of the narrative. In The Last of Us, the time of day,

69
00:04:05,470 --> 00:04:12,292
the time of the year, played a huge role in the narrative. Passage of time was extremely

70
00:04:12,292 --> 00:04:15,752
important for us to consider, and you can see it through our entire production, but especially

71
00:04:15,752 --> 00:04:17,093
during the concept phase.

72
00:04:20,912 --> 00:04:26,656
So, something as simple as the passage of time throughout the day can dramatically impact the presentation of your art.

73
00:04:26,656 --> 00:04:32,621
This is the first component of the sky that needs to be considered when you're in pre-production.

74
00:04:32,621 --> 00:04:35,143
The second, fairly obvious one, is the weather.

75
00:04:38,155 --> 00:04:41,155
Is it a clear, sunny day in the tropics somewhere?

76
00:04:41,155 --> 00:04:44,496
Your sky should be cool, baby blue with a soft gradient to the horizon,

77
00:04:44,496 --> 00:04:45,437
maybe a few fluffy clouds.

78
00:04:45,437 --> 00:04:49,278
Something that immediately makes you feel the warmth and relaxation of the tropical sun.

79
00:04:49,278 --> 00:04:52,138
In this case, I can already taste the pina colada.

80
00:04:52,138 --> 00:05:00,861
Or does your level have a beautifully dramatic and dangerous rainstorm looming on the horizon?

81
00:05:00,861 --> 00:05:02,941
Maybe something more dramatic.

82
00:05:02,941 --> 00:05:07,262
Gloomy, desaturated, overcast sky foreshadowing the harrowing journey ahead.

83
00:05:10,154 --> 00:05:15,357
You see, the weather, while obvious, can completely change the amount of tension in your level.

84
00:05:15,357 --> 00:05:19,579
It's also an excellent tool to see what's coming and possibly what's just recently gone.

85
00:05:19,579 --> 00:05:23,821
You can foreshadow with the sky, because the player can actually see out to the horizon.

86
00:05:23,821 --> 00:05:29,564
So these two points are a little bit obvious. Essential, but obvious.

87
00:05:29,564 --> 00:05:34,186
Let's go a little more abstract, a little more fuzzy, a little more artistic.

88
00:05:34,186 --> 00:05:36,167
Consider this sky.

89
00:05:37,357 --> 00:05:41,640
This is an amazing photo that our art director, Rob Ruppel, took from his iPhone near his house.

90
00:05:41,640 --> 00:05:45,844
Just keep this in mind for a second while I change the subject.

91
00:05:45,844 --> 00:05:52,410
You've all seen a painter lay out their color palette before.

92
00:05:52,410 --> 00:05:57,915
Primary colors are chosen carefully. Shadows, mid-tones, highlights.

93
00:05:57,915 --> 00:06:02,879
The entire composition, in fact, they all revolve around the choice of colors and their complements.

94
00:06:04,728 --> 00:06:09,211
Colors that resemble the intentions of the painter, beyond just representing an image.

95
00:06:09,211 --> 00:06:15,696
Beautiful, interesting paintings are made with very simple color palettes.

96
00:06:15,696 --> 00:06:21,661
Different colors have different impacts on humans, and are often related to different moods.

97
00:06:21,661 --> 00:06:25,684
Warm colors can be used to describe the tone of energy, anxiety, high tension.

98
00:06:25,684 --> 00:06:33,409
In fact, it's often these colors that draw our eyes the most.

99
00:06:33,409 --> 00:06:33,590
Blue.

100
00:06:35,106 --> 00:06:38,629
can often be relaxing, cold, if not melancholy.

101
00:06:38,629 --> 00:06:41,532
These are very simple, basic concepts

102
00:06:41,532 --> 00:06:44,074
when describing artwork and color theory,

103
00:06:44,074 --> 00:06:46,476
yet they're so rarely actually applied

104
00:06:46,476 --> 00:06:48,078
to the production of an environment,

105
00:06:48,078 --> 00:06:50,079
to the overall composition of the level

106
00:06:50,079 --> 00:06:52,201
that you're trying to sell to the player.

107
00:06:52,201 --> 00:06:54,824
Again, in my opinion, the sky and all the dependencies

108
00:06:54,824 --> 00:06:56,005
are one of the most overlooked parts

109
00:06:56,005 --> 00:06:57,806
of composing a visual experience for players.

110
00:06:57,806 --> 00:07:01,209
So let's go back to that photo I showed you earlier

111
00:07:01,209 --> 00:07:02,110
and look at the color palette.

112
00:07:04,350 --> 00:07:09,612
The tone, the color temperature, the entire color palette and emotion that it drives,

113
00:07:09,612 --> 00:07:10,733
they're all defined by the sky.

114
00:07:10,733 --> 00:07:17,135
And that is perhaps the single most important point that I can make.

115
00:07:17,135 --> 00:07:19,176
In the real world, the sky drives the lighting,

116
00:07:19,176 --> 00:07:22,697
and therefore the color palette of your entire environment.

117
00:07:22,697 --> 00:07:25,458
In games, we can do things backwards, but the sky, the lighting, the color palette,

118
00:07:25,458 --> 00:07:28,379
the time of day, the direction, they all need to match,

119
00:07:28,379 --> 00:07:30,140
because the sky is what motivates them.

120
00:07:30,140 --> 00:07:33,681
Let's look at a few more dramatic skies.

121
00:07:34,638 --> 00:07:39,379
from a lush yellow sunrise that shows the promise of the day to come

122
00:07:39,379 --> 00:07:47,181
to a deep red sunset ending the day within which blood has been spilled according to Legolas.

123
00:07:47,181 --> 00:07:49,182
Change to the sky

124
00:07:49,182 --> 00:07:55,204
and all of its dependent components have the ability to change your landscape

125
00:07:55,204 --> 00:07:57,004
from one significant emotional tone

126
00:07:57,004 --> 00:08:00,926
or narrative tone to a completely different experience for the viewer

127
00:08:00,926 --> 00:08:04,427
without touching the base geometry, without touching the materials, without touching the textures.

128
00:08:06,852 --> 00:08:10,054
Which leads me to this last point before we move along.

129
00:08:10,054 --> 00:08:11,614
The tone that we present visually

130
00:08:11,614 --> 00:08:13,435
in all of our environments

131
00:08:13,435 --> 00:08:15,036
has a tremendous impact on the emotional

132
00:08:15,036 --> 00:08:15,756
experience of the player.

133
00:08:15,756 --> 00:08:15,856
For us,

134
00:08:15,856 --> 00:08:21,039
the tones we present to the player in The Last of Us

135
00:08:21,039 --> 00:08:22,920
were extremely important to the

136
00:08:22,920 --> 00:08:24,901
narrative structure. To the emotion that the

137
00:08:24,901 --> 00:08:27,622
player is supposed to experience when he's playing through the game.

138
00:08:27,622 --> 00:08:29,723
And you can see it mirrored in our choices

139
00:08:29,723 --> 00:08:30,363
for composition.

140
00:08:30,363 --> 00:08:32,344
Again, all the way from the beginning.

141
00:08:34,493 --> 00:08:41,619
Whether it's a foreboding storm cloud reaching forward from the horizon, hinting at the dangers

142
00:08:41,619 --> 00:08:48,564
to come as you set out on your journey, or the desperation and loneliness as the beautiful

143
00:08:48,564 --> 00:08:54,729
colors are leached out of the sky as it sets, or the peace of mind and comfort and warmth

144
00:08:54,729 --> 00:08:59,073
brought from a bright sunny day, the sky can be used as a tool to present to the player

145
00:08:59,073 --> 00:09:03,196
whatever tone or mood his character is supposed to be feeling, because we feel it too.

146
00:09:05,010 --> 00:09:08,311
If I show you this picture again, most of you are going to feel the warmth.

147
00:09:08,311 --> 00:09:13,314
Probably a little bit of relaxation. Hopefully a little bit of joy, if you've had good experiences on the beach.

148
00:09:13,314 --> 00:09:17,656
The sky is an incredibly powerful emotional cue for the viewer.

149
00:09:17,656 --> 00:09:25,519
Neil and Bruce, our creative director and game director respectively,

150
00:09:25,519 --> 00:09:28,000
know this, and they focused on it from the start,

151
00:09:28,000 --> 00:09:30,962
which is one of the things that I loved about working on The Last of Us.

152
00:09:30,962 --> 00:09:32,983
You can see that even when they're planning out the story,

153
00:09:32,983 --> 00:09:34,623
when they're writing the narrative script.

154
00:09:35,851 --> 00:09:38,934
they were focusing on the skies and how to tell that story through the sky.

155
00:09:38,934 --> 00:09:51,928
So to summarize that point, an environment completely in sync

156
00:09:51,928 --> 00:09:56,232
with the narrative tone can be used to deliver a pointed and impactful player

157
00:09:56,232 --> 00:09:56,693
experience.

158
00:09:58,135 --> 00:10:03,281
Inversely, you can actually ruin the narrative tone by having

159
00:10:03,281 --> 00:10:06,104
a sky, lighting, visual tone that just doesn't match,

160
00:10:06,104 --> 00:10:07,105
that's out of sync.

161
00:10:07,105 --> 00:10:16,675
In summary, the sky and all of its dependencies and lighting

162
00:10:16,675 --> 00:10:19,398
can change the entire look, entire feel of your game.

163
00:10:21,902 --> 00:10:25,285
So it's worth starting off with. It's worth considering from the pre-production,

164
00:10:25,285 --> 00:10:29,289
which is something that most games have not traditionally been doing,

165
00:10:29,289 --> 00:10:31,831
and that we're starting to see a trend uplifting.

166
00:10:31,831 --> 00:10:36,816
Now, please don't get me wrong.

167
00:10:36,816 --> 00:10:40,260
I would never argue that shapes, contrasts, negative space,

168
00:10:40,260 --> 00:10:45,264
modeling, texturing, local lighting, effects, animations, sounds, don't matter.

169
00:10:46,186 --> 00:10:51,350
But the sky, again, is one of the most underutilized tools in the portfolio of games that we've seen so far.

170
00:10:51,350 --> 00:10:53,932
And there's nowhere to go but up.

171
00:10:53,932 --> 00:10:55,553
Eh? Anyone? No? All right.

172
00:10:55,553 --> 00:10:59,676
Enough of that. Let's change the subject.

173
00:10:59,676 --> 00:11:05,540
I always like having kind of some takeaways to presentations.

174
00:11:05,540 --> 00:11:07,602
That was the fluffy side of this presentation.

175
00:11:07,602 --> 00:11:10,364
Now I want to talk about some tech. Let's make some friends with math.

176
00:11:12,578 --> 00:11:14,800
If you're working on Skies in a game, at some point,

177
00:11:14,800 --> 00:11:18,142
somebody, some jerk is gonna come up to you and ask you to make it move.

178
00:11:18,142 --> 00:11:19,643
And it's just a bottomless pit.

179
00:11:19,643 --> 00:11:22,325
It's a bottomless pit that we've been exploring for a long time,

180
00:11:22,325 --> 00:11:23,505
and that with Eben's help,

181
00:11:23,505 --> 00:11:26,647
actually we were able to somewhat resolve

182
00:11:26,647 --> 00:11:27,628
for our own production

183
00:11:27,628 --> 00:11:29,509
on The Last of Us and Naughty Dog.

184
00:11:29,509 --> 00:11:29,589
So...

185
00:11:29,589 --> 00:11:35,213
First and foremost,

186
00:11:35,213 --> 00:11:35,853
Skies move.

187
00:11:37,368 --> 00:11:40,649
I hope you guys can all agree with me on that, skies move,

188
00:11:40,649 --> 00:11:42,450
usually in very fascinating, complex ways.

189
00:11:42,450 --> 00:11:48,432
In the past few years, I've seen, heard of, been taught,

190
00:11:48,432 --> 00:11:51,173
experimented with so many different techniques to fake,

191
00:11:51,173 --> 00:11:53,114
cheat, and imply the motion of a sky.

192
00:11:53,114 --> 00:11:56,635
To list a few, I've stuck clouds on a cylinder

193
00:11:56,635 --> 00:11:58,896
and rotated the cylinder around the vertical axis,

194
00:11:58,896 --> 00:12:00,676
which is great until you turn around and realize

195
00:12:00,676 --> 00:12:01,737
that the clouds are still moving

196
00:12:01,737 --> 00:12:02,677
in the same direction behind you.

197
00:12:06,140 --> 00:12:07,881
I've used a scrolling plane of clouds,

198
00:12:07,881 --> 00:12:11,284
which you can make better by sticking an alpha on it,

199
00:12:11,284 --> 00:12:13,346
break it up a little bit.

200
00:12:13,346 --> 00:12:14,787
But it's still missing the vanishing point.

201
00:12:14,787 --> 00:12:16,749
It's still missing all the cool lighting changes

202
00:12:16,749 --> 00:12:18,951
and the cool motion as the clouds cross the horizon.

203
00:12:18,951 --> 00:12:25,217
I've tried layering tons of complex motion and materials

204
00:12:25,217 --> 00:12:27,118
to make fascinating skies.

205
00:12:27,118 --> 00:12:29,741
The skies of Halo Reach are still my favorite

206
00:12:29,741 --> 00:12:32,143
in any game I've seen to date.

207
00:12:32,143 --> 00:12:32,883
So props to them.

208
00:12:35,298 --> 00:12:40,480
I've used volumetrics, which are awesome, a lot of fun,

209
00:12:40,480 --> 00:12:43,121
but they don't quite give enough artistic control over shapes and lighting.

210
00:12:43,121 --> 00:12:47,402
And, of course, they're very, very expensive, so not an option anyway.

211
00:12:47,402 --> 00:12:52,944
And while not necessarily a technique in itself,

212
00:12:52,944 --> 00:12:54,645
I've done time-of-day systems,

213
00:12:54,645 --> 00:12:59,907
which are usually just a combination of all the other systems that I've ever tried.

214
00:12:59,907 --> 00:13:02,327
And Rockstar has definitely dominated that.

215
00:13:02,327 --> 00:13:03,728
I can't even...

216
00:13:05,139 --> 00:13:07,461
properly state how much respect I have for the job that they've done at their skies.

217
00:13:07,461 --> 00:13:14,889
You see, every technique that I've tried comes with very different pros and cons.

218
00:13:14,889 --> 00:13:20,695
And more specifically, it's always going to end up boiling down to more time per iteration.

219
00:13:21,620 --> 00:13:27,622
Skies take a lot of time, and the challenge of adding motion to skies really boils to that one simple issue.

220
00:13:27,622 --> 00:13:31,904
The more custom assets you build into your sky, the longer it takes to iterate and adapt to the skies.

221
00:13:31,904 --> 00:13:37,706
I am a firm believer that if you want beautiful skies across your game, it needs to be given the attention of a full-time position.

222
00:13:37,706 --> 00:13:44,188
There really needs to be more sky artists out there.

223
00:13:45,422 --> 00:13:46,382
Who has time for that?

224
00:13:46,382 --> 00:13:47,723
We at Naughty Dog certainly don't.

225
00:13:47,723 --> 00:13:49,445
And we also didn't really have the ability to use

226
00:13:49,445 --> 00:13:52,387
either of those, or any of those techniques,

227
00:13:52,387 --> 00:13:55,130
because we need matte paintings.

228
00:13:55,130 --> 00:13:57,471
We need matte paintings because we need artistic control.

229
00:13:57,471 --> 00:13:59,273
You see, the focus for Skies at Naughty Dog

230
00:13:59,273 --> 00:14:01,235
has always been artistic control.

231
00:14:01,235 --> 00:14:04,617
We need the clouds to shape the composition,

232
00:14:04,617 --> 00:14:07,139
the sky to highlight and draw the player's attention.

233
00:14:07,139 --> 00:14:10,142
We need the world to tell our story

234
00:14:10,142 --> 00:14:12,824
at the perfect point of the reveal.

235
00:14:12,824 --> 00:14:15,086
In other words, we need matte paintings, like this.

236
00:14:16,967 --> 00:14:20,149
Because of this, the skies in our games have always been a single static map painting.

237
00:14:20,149 --> 00:14:27,413
The skies have polar distortion painted directly into them.

238
00:14:27,413 --> 00:14:29,755
Similar to a panoramic photo you would take off a Chrome ball,

239
00:14:29,755 --> 00:14:35,878
or most of the sky templates that you would download online.

240
00:14:35,878 --> 00:14:40,121
We then take that texture and we project it onto a dome using spherical UVs,

241
00:14:40,121 --> 00:14:42,562
just standard Maya spherical UVs.

242
00:14:43,627 --> 00:14:45,367
And then the dome is finally attached to the camera

243
00:14:45,367 --> 00:14:48,988
so that no matter how much you move the camera,

244
00:14:48,988 --> 00:14:52,629
you never get closer or farther away from the dome.

245
00:14:52,629 --> 00:14:56,971
Obviously, the rotation is not attached to the camera.

246
00:14:56,971 --> 00:14:58,291
If you're curious, we always try to ship

247
00:14:58,291 --> 00:14:59,572
with 4K by 2K textures.

248
00:14:59,572 --> 00:15:01,152
Never, ever, ever get away with it.

249
00:15:01,152 --> 00:15:03,093
So we always end up doing 2K by 1K.

250
00:15:03,093 --> 00:15:06,154
You know, texture memory and all that.

251
00:15:06,154 --> 00:15:12,276
The other reason that our skies have to be matte paintings

252
00:15:12,276 --> 00:15:13,136
is because we iterate.

253
00:15:13,661 --> 00:15:15,943
we iterate over and over and over again.

254
00:15:15,943 --> 00:15:20,506
Naughty Dog is quite famous for how close to the line we iterate.

255
00:15:20,506 --> 00:15:23,389
Huge, huge lighting changes.

256
00:15:23,389 --> 00:15:24,710
Last week before we go GM is no joke.

257
00:15:24,710 --> 00:15:26,972
And so obviously the skies need to keep up.

258
00:15:26,972 --> 00:15:31,475
For example, this is the sky that was in the military city of The Last of Us

259
00:15:31,475 --> 00:15:34,117
maybe a week before we went GM.

260
00:15:34,117 --> 00:15:35,498
And this is the sky that we shipped with.

261
00:15:36,658 --> 00:15:38,699
Now, obviously, the lighting hasn't changed too much from this,

262
00:15:38,699 --> 00:15:40,801
but if I had actually put motion into this using layers,

263
00:15:40,801 --> 00:15:41,941
I would have been screwed.

264
00:15:41,941 --> 00:15:44,462
I would have had a very small amount of time

265
00:15:44,462 --> 00:15:48,064
to iterate over all of the work that I'd done in the past.

266
00:15:48,064 --> 00:15:50,005
Obviously, this change was a good thing for the sky,

267
00:15:50,005 --> 00:15:51,966
but it's something that I need to be aware of.

268
00:15:51,966 --> 00:15:55,888
So here was our great challenge on The Last of Us.

269
00:15:55,888 --> 00:15:57,849
How do I create the illusion of motion in the sky

270
00:15:57,849 --> 00:16:01,491
without needing to stick myself into the iteration process?

271
00:16:01,491 --> 00:16:03,592
In other words, I couldn't split it into multiple assets.

272
00:16:05,724 --> 00:16:08,066
And our inspiration from this actually came from Uncharted 3.

273
00:16:08,066 --> 00:16:11,290
How many of you guys remember this level?

274
00:16:11,290 --> 00:16:11,771
Okay, a few hands.

275
00:16:11,771 --> 00:16:15,055
So what we're trying to do here is we're trying to have a wall of sand

276
00:16:15,055 --> 00:16:17,638
being held at bay by the wall of this mystical city.

277
00:16:17,638 --> 00:16:20,282
That wall of sand is supposed to look like just this horrendous storm

278
00:16:20,282 --> 00:16:22,584
kind of on the outskirts of the city.

279
00:16:22,584 --> 00:16:24,607
We dubbed it the Brown Doughnut.

280
00:16:24,607 --> 00:16:24,847
But...

281
00:16:25,902 --> 00:16:28,503
What we attempted to do was treat the sky the same way we treat water,

282
00:16:28,503 --> 00:16:31,924
which is using a UV distortion technique called flow.

283
00:16:31,924 --> 00:16:35,065
Unfortunately, we didn't actually have time to really get this working for Uncharted 3,

284
00:16:35,065 --> 00:16:37,546
so it left a bit to be desired, but the seed was there.

285
00:16:37,546 --> 00:16:39,946
And we kind of took off running with it during The Last of Us.

286
00:16:41,080 --> 00:16:43,741
So before I really dig into that,

287
00:16:43,741 --> 00:16:46,043
I need to talk with you guys about what exactly is Flow.

288
00:16:46,043 --> 00:16:47,223
I don't have a ton of time up here.

289
00:16:47,223 --> 00:16:48,824
I want to make room for Evan's presentation next,

290
00:16:48,824 --> 00:16:50,205
so I'm gonna skim this a little bit

291
00:16:50,205 --> 00:16:51,786
and give you guys some more resources.

292
00:16:51,786 --> 00:16:53,907
But I do need you guys to understand

293
00:16:53,907 --> 00:16:58,049
the broad spectrum of what Flow actually is.

294
00:16:58,049 --> 00:17:01,752
So it's a very specific type of UV distortion

295
00:17:01,752 --> 00:17:04,353
where I'm able to specify specific directions

296
00:17:04,353 --> 00:17:05,554
and stretch a texture.

297
00:17:06,395 --> 00:17:08,196
based on those directions.

298
00:17:08,196 --> 00:17:10,317
Then once I get that stretching looking nice,

299
00:17:10,317 --> 00:17:12,518
I can just crossfade between an earlier version

300
00:17:12,518 --> 00:17:13,278
of that texture,

301
00:17:13,278 --> 00:17:15,519
and it looks like the motion is continuous.

302
00:17:15,519 --> 00:17:17,380
For example,

303
00:17:17,380 --> 00:17:19,041
if I were to paint directions

304
00:17:19,041 --> 00:17:20,582
using any number of flow tools out there,

305
00:17:20,582 --> 00:17:22,362
this one is Maya Fluids,

306
00:17:22,362 --> 00:17:25,824
I get this texture.

307
00:17:25,824 --> 00:17:28,165
I'm gonna pause on this texture for a second

308
00:17:28,165 --> 00:17:29,706
because I need you guys to understand

309
00:17:29,706 --> 00:17:30,606
what's happening with it.

310
00:17:32,323 --> 00:17:35,084
I'm going to be applying this to the U and V channels

311
00:17:35,084 --> 00:17:35,965
of another texture,

312
00:17:35,965 --> 00:17:38,887
which is to say that the red channel of this texture

313
00:17:38,887 --> 00:17:41,868
is telling me to push the pixels in the U direction,

314
00:17:41,868 --> 00:17:44,170
either forwards, backwards, or not at all,

315
00:17:44,170 --> 00:17:47,411
based on the intensity of the red.

316
00:17:47,411 --> 00:17:49,533
50% red here is no motion at all.

317
00:17:49,533 --> 00:17:51,614
Pure red is forwards in U.

318
00:17:51,614 --> 00:17:52,574
Black is backwards in U.

319
00:17:52,574 --> 00:17:54,455
The same goes for green.

320
00:17:54,455 --> 00:17:59,418
So if we go back and look at this base texture...

321
00:18:00,481 --> 00:18:01,941
It doesn't look like much,

322
00:18:01,941 --> 00:18:05,303
but all of that vector information is in the texture.

323
00:18:05,303 --> 00:18:06,543
This is really hard to paint, by the way,

324
00:18:06,543 --> 00:18:07,804
because it's very specific.

325
00:18:07,804 --> 00:18:11,225
Now, if I apply that texture,

326
00:18:11,225 --> 00:18:14,146
you can see that we get distortion.

327
00:18:14,146 --> 00:18:15,847
And notice the crossfading.

328
00:18:15,847 --> 00:18:16,907
It looks like it's continuous motion.

329
00:18:16,907 --> 00:18:24,330
Here are a few more cool examples.

330
00:18:24,330 --> 00:18:27,631
A zoom.

331
00:18:27,631 --> 00:18:28,052
A twist.

332
00:18:30,825 --> 00:18:36,268
Here it is practically used for the pathing of water.

333
00:18:36,268 --> 00:18:38,549
And here it was being used for the ground,

334
00:18:38,549 --> 00:18:44,651
the particles, the wind.

335
00:18:44,651 --> 00:18:46,832
This is the slide you guys should take photos of.

336
00:18:46,832 --> 00:18:48,453
If you want to learn more about Flow,

337
00:18:48,453 --> 00:18:50,934
Carlos, who is the person who implemented Flow for us

338
00:18:50,934 --> 00:18:52,955
back in Uncharted 1, made a presentation in 2002.

339
00:18:52,955 --> 00:18:53,635
I did as well.

340
00:18:53,635 --> 00:18:56,417
In fact, those examples are from it.

341
00:18:56,417 --> 00:18:59,318
And then the original resources are cited there as well.

342
00:19:06,407 --> 00:19:09,348
Okay, great. You guys know what flow is.

343
00:19:09,348 --> 00:19:13,809
But how do we apply this to the concept of a sky moving in the world?

344
00:19:13,809 --> 00:19:17,689
How do we break down the motion of a sky in broad terms

345
00:19:17,689 --> 00:19:21,730
so that we can consider applying this in a faked scenario?

346
00:19:21,730 --> 00:19:28,231
If you look at this carefully, you'll notice that there's actually something

347
00:19:28,231 --> 00:19:29,931
happening here that hopefully you remember from your

348
00:19:29,931 --> 00:19:33,392
perspective drawing class 101, perhaps.

349
00:19:33,392 --> 00:19:34,132
There's a vanishing point.

350
00:19:35,352 --> 00:19:39,077
there is a point where all parallel lines, because the clouds are actually moving in parallel,

351
00:19:39,077 --> 00:19:43,121
are converging from our perspective, or merging.

352
00:19:43,121 --> 00:19:46,265
If you notice, all of the motion is going down to that,

353
00:19:46,265 --> 00:19:49,949
you know, roughly that one point. If I look straight above the vanishing point,

354
00:19:49,949 --> 00:19:54,415
there's no horizontal motion. And if I look to the sides, there's no vertical motion.

355
00:19:56,658 --> 00:19:57,558
Of course, I can turn around,

356
00:19:57,558 --> 00:19:59,479
and in this case, I just flipped the video,

357
00:19:59,479 --> 00:20:01,279
but hopefully you guys get it.

358
00:20:01,279 --> 00:20:03,720
It's the same, except now instead of shrinking to,

359
00:20:03,720 --> 00:20:06,441
everything is growing from that vanishing point.

360
00:20:06,441 --> 00:20:10,603
So I'm getting closer,

361
00:20:10,603 --> 00:20:14,144
but I need to start thinking about this in terms of a dome,

362
00:20:14,144 --> 00:20:17,245
because I'm going to be applying this to a sky dome in my game.

363
00:20:17,245 --> 00:20:19,646
So if I instead take this concept and apply it to a dome,

364
00:20:19,646 --> 00:20:20,686
how's that going to work?

365
00:20:32,925 --> 00:20:36,327
Now, as we discussed before, we need to break down the motion

366
00:20:36,327 --> 00:20:38,448
in terms of u and v for it to be useful for flow.

367
00:20:38,448 --> 00:20:41,429
Uh, u being the direction around the sides of the dome,

368
00:20:41,429 --> 00:20:45,351
v being the direction up to the top of the dome.

369
00:20:45,351 --> 00:20:50,614
So let's consider for a second just the vertical motion.

370
00:20:50,614 --> 00:20:51,714
It starts at the back,

371
00:20:51,714 --> 00:20:53,495
and it rises until it reaches the top.

372
00:20:53,495 --> 00:20:55,516
So for the back half of the dome, it's going up.

373
00:20:56,811 --> 00:21:02,895
And on the front side, once it reaches the top, it changes directions and it goes back down to the opposite pole.

374
00:21:02,895 --> 00:21:04,636
So it's going down in the front.

375
00:21:04,636 --> 00:21:10,419
If we consider these as colors, keeping in mind that again, 50% green is no motion,

376
00:21:10,419 --> 00:21:12,480
black is down and pure green is up,

377
00:21:12,480 --> 00:21:16,403
these would be the colors describing the motion that I've applied.

378
00:21:17,273 --> 00:21:19,253
Now, obviously, this is way too simple

379
00:21:19,253 --> 00:21:20,374
to describe what's going on in the sky,

380
00:21:20,374 --> 00:21:21,794
but it's helpful for me to start thinking

381
00:21:21,794 --> 00:21:23,794
in really broad terms like this.

382
00:21:23,794 --> 00:21:26,375
So what I really want to do is I want to take that,

383
00:21:26,375 --> 00:21:28,515
and I want to find a way to make it go slower

384
00:21:28,515 --> 00:21:30,376
around the sides, because I'm trying to fake perspective.

385
00:21:30,376 --> 00:21:34,877
So the clouds that are supposed to be the farthest away from me

386
00:21:34,877 --> 00:21:36,057
need to be moving much, much slower

387
00:21:36,057 --> 00:21:37,577
than the clouds that are the closest to me,

388
00:21:37,577 --> 00:21:38,558
which are directly above me.

389
00:21:38,558 --> 00:21:40,598
To do that, I could paint a gradient,

390
00:21:40,598 --> 00:21:43,139
but through Eben's help, we were able to figure out

391
00:21:43,139 --> 00:21:45,979
how to do this mathematically, which is just way better.

392
00:21:45,979 --> 00:21:47,120
This is the correct gradient.

393
00:21:51,222 --> 00:21:54,124
It doesn't look like much right now, but bear with me for a little bit,

394
00:21:54,124 --> 00:21:54,944
and you'll see it working.

395
00:21:54,944 --> 00:21:58,226
If you're curious how to get this mathematically,

396
00:21:58,226 --> 00:21:59,627
it's really, really, really simple.

397
00:21:59,627 --> 00:22:01,588
If we just take the wind direction

398
00:22:01,588 --> 00:22:04,790
and take the dot product of the wind direction

399
00:22:04,790 --> 00:22:06,952
against the binormal of the sky,

400
00:22:06,952 --> 00:22:08,633
we get this gradient perfectly.

401
00:22:08,633 --> 00:22:12,115
Another way to think about it is if you convert the wind direction

402
00:22:12,115 --> 00:22:15,097
to tangent space and then extract the green channel,

403
00:22:15,097 --> 00:22:16,277
this is what you get.

404
00:22:16,277 --> 00:22:19,779
Okay, you guys feeling good if I confused you?

405
00:22:20,695 --> 00:22:21,976
Still with me?

406
00:22:21,976 --> 00:22:22,336
A couple smiles.

407
00:22:22,336 --> 00:22:23,076
You're always smiling.

408
00:22:23,076 --> 00:22:23,516
I like that.

409
00:22:23,516 --> 00:22:29,317
So let's consider the U motion, the sideways motion.

410
00:22:29,317 --> 00:22:32,738
Once again, we want to separate out the vertical,

411
00:22:32,738 --> 00:22:35,359
so we're not looking at the vertical at all, just sideways.

412
00:22:35,359 --> 00:22:39,000
The motion is going around the dome, parallel to the wind direction,

413
00:22:39,000 --> 00:22:41,180
which means that I've got positive motion on one side

414
00:22:41,180 --> 00:22:44,521
and negative motion on the other side.

415
00:22:44,521 --> 00:22:45,941
But again, that's an oversimplification.

416
00:22:45,941 --> 00:22:49,782
It needs to be the slowest at the vanishing points.

417
00:22:50,889 --> 00:22:52,750
and the fastest at the sides

418
00:22:52,750 --> 00:22:54,151
that are supposed to be closest to me.

419
00:22:54,151 --> 00:22:58,814
So, again, I can do this through math.

420
00:22:58,814 --> 00:23:00,536
This time...

421
00:23:00,536 --> 00:23:06,419
the math is taking the wind direction

422
00:23:06,419 --> 00:23:08,101
dotted against the tangent of the skydome,

423
00:23:08,101 --> 00:23:12,303
or the red channel of that previous function.

424
00:23:12,303 --> 00:23:16,846
Here they are combined,

425
00:23:16,846 --> 00:23:18,808
which, again, doesn't look like much.

426
00:23:25,270 --> 00:23:29,418
You guys want to see it in action?

427
00:23:29,418 --> 00:23:29,739
Okay.

428
00:23:29,739 --> 00:23:30,901
I'm going to take those flow directions

429
00:23:30,901 --> 00:23:31,682
that we just saw in the dome,

430
00:23:31,682 --> 00:23:34,227
and I'm going to apply this texture to the dome.

431
00:23:34,227 --> 00:23:37,013
And this is what we get.

432
00:23:54,130 --> 00:23:55,931
We now have completely procedural motion,

433
00:23:55,931 --> 00:24:00,374
creating the illusion of the clouds moving out into the horizon

434
00:24:00,374 --> 00:24:06,857
with a mathematically correct vanishing point.

435
00:24:06,857 --> 00:24:13,161
My favorite part of this technique is that I'm not bound by the content of the map painting

436
00:24:13,161 --> 00:24:13,381
at all.

437
00:24:13,381 --> 00:24:14,021
Like, at all, at all.

438
00:24:14,021 --> 00:24:20,745
I can literally swap the map textures and do no work.

439
00:24:25,432 --> 00:24:27,113
or okay, honestly, almost no work.

440
00:24:27,113 --> 00:24:29,314
I've almost completely removed myself

441
00:24:29,314 --> 00:24:31,734
from the iteration of the process of the sky.

442
00:24:31,734 --> 00:24:37,356
Is that one not playing?

443
00:24:37,356 --> 00:24:38,977
Okay.

444
00:24:38,977 --> 00:24:39,977
Here's where it breaks down.

445
00:24:39,977 --> 00:24:42,358
Like all good things in life,

446
00:24:42,358 --> 00:24:44,099
there's always something negative about it.

447
00:24:44,099 --> 00:24:45,099
Uh, in this case,

448
00:24:45,099 --> 00:24:47,880
the fact that our sky is just repeating its motion

449
00:24:47,880 --> 00:24:49,480
means that...

450
00:24:51,042 --> 00:24:53,463
it's vulnerable to showing that it's repeating its motion.

451
00:24:53,463 --> 00:24:56,044
Depending on the contrast of your texture,

452
00:24:56,044 --> 00:24:58,625
you can easily see the repetition.

453
00:24:58,625 --> 00:25:01,746
For example, notice that hard spike at the top of the cloud.

454
00:25:01,746 --> 00:25:03,467
If you look at that, you're gonna pretty easily see that,

455
00:25:03,467 --> 00:25:04,307
oh, look, it's repeating.

456
00:25:06,018 --> 00:25:07,878
So this is something we had to consider.

457
00:25:07,878 --> 00:25:10,519
We have two decent solutions to get around this.

458
00:25:10,519 --> 00:25:12,519
One is I can just change the wind direction

459
00:25:12,519 --> 00:25:15,220
so that it moves in a way that the repetition doesn't show.

460
00:25:15,220 --> 00:25:17,700
Or the worst case is I can actually mask out

461
00:25:17,700 --> 00:25:18,281
the motion of the sky.

462
00:25:18,281 --> 00:25:22,341
I say the worst case because we're getting a sense of depth

463
00:25:22,341 --> 00:25:23,702
and parallax in the motion of the sky

464
00:25:23,702 --> 00:25:25,422
because of the speed that it's moving.

465
00:25:25,422 --> 00:25:28,363
So if I slow down sections kind of willy-nilly,

466
00:25:28,363 --> 00:25:29,963
it completely screws with your perception

467
00:25:29,963 --> 00:25:30,983
with the illusion of the sky.

468
00:25:33,693 --> 00:25:37,494
The other one is that there's a very large, ugly pole at the top.

469
00:25:37,494 --> 00:25:39,374
This is always a problem with Skies.

470
00:25:39,374 --> 00:25:41,194
It's made much more apparent because of the flow.

471
00:25:41,194 --> 00:25:44,455
We naturally called this the Sky Sphincter.

472
00:25:44,455 --> 00:25:50,036
Um, we can minimize this by painting a solid color

473
00:25:50,036 --> 00:25:51,857
on the top of our matte painting.

474
00:25:51,857 --> 00:25:54,077
We could stick extra cards up there

475
00:25:54,077 --> 00:25:56,638
to cover it up and put their own distortion on it.

476
00:25:56,638 --> 00:25:58,718
Or you can do what we did in The Last of Us

477
00:25:58,718 --> 00:26:01,179
and just not allow the player to look up that high.

478
00:26:01,179 --> 00:26:01,399
You know.

479
00:26:04,600 --> 00:26:07,964
Either or. Okay, so a couple retrospective thoughts.

480
00:26:07,964 --> 00:26:11,488
This one's a very personal issue to me.

481
00:26:11,488 --> 00:26:13,971
How many of you guys actually noticed

482
00:26:13,971 --> 00:26:16,374
that the sky is moving while you're playing the game?

483
00:26:16,374 --> 00:26:19,157
That's a lot more than I expected.

484
00:26:19,157 --> 00:26:21,119
You guys are sucking up?

485
00:26:21,119 --> 00:26:22,520
No? You sure? Okay.

486
00:26:25,353 --> 00:26:29,057
We had a lot of debating over the speed that the skies should be moving.

487
00:26:29,057 --> 00:26:32,441
Do we make them fast enough so you notice it while you're running around?

488
00:26:32,441 --> 00:26:35,424
Or do we make them slow enough so that you notice it when you actually look?

489
00:26:36,379 --> 00:26:40,122
We chose to favor subtlety, rewarding the players for

490
00:26:40,122 --> 00:26:43,184
actually taking the time to look around and take in the scenery.

491
00:26:43,184 --> 00:26:45,386
But I'm not sure that it's necessarily the right choice.

492
00:26:45,386 --> 00:26:48,108
I'm going to choose to believe that it was, but that was the end result.

493
00:26:48,108 --> 00:26:51,091
So I've noticed when a lot of people are playing the game,

494
00:26:51,091 --> 00:26:54,333
they tend not to even notice that the skies are moving.

495
00:26:54,333 --> 00:26:56,495
I also still choose to believe that even if they didn't notice

496
00:26:56,495 --> 00:26:58,757
that the skies are moving, just the fact that there is that much more

497
00:26:58,757 --> 00:27:00,738
motion and realism in the world

498
00:27:00,738 --> 00:27:02,500
adds a tremendous amount to the player experience.

499
00:27:06,404 --> 00:27:07,505
That's pretty much all I've got right now.

500
00:27:07,505 --> 00:27:09,947
Hopefully that wasn't too much for you guys.

501
00:27:09,947 --> 00:27:11,688
And I've got three minutes to let Evan come up here

502
00:27:11,688 --> 00:27:13,129
and take over for me.

503
00:27:13,129 --> 00:27:16,092
So I'm gonna step off to the side and take questions.

504
00:27:16,092 --> 00:27:17,453
Please come up and ask me.

505
00:27:17,453 --> 00:27:19,714
And then Evan's gonna take over with an awesome presentation

506
00:27:19,714 --> 00:27:23,077
about liquid from The Last of Us,

507
00:27:23,077 --> 00:27:24,838
liquid particle effects in particular.

508
00:27:24,838 --> 00:27:26,700
And then if we have more questions,

509
00:27:26,700 --> 00:27:29,302
once Evan starts, then I'll move outside.

510
00:27:29,302 --> 00:27:30,583
Cool? Thank you guys so much.

