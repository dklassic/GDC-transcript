1
00:00:06,852 --> 00:00:11,014
And welcome to this talk on the portal locomotion of budget cuts.

2
00:00:11,014 --> 00:00:12,075
I am Joakim Holmier.

3
00:00:12,075 --> 00:00:14,876
I'm the co-founder and tech artist at Neat Corporation.

4
00:00:14,876 --> 00:00:16,637
So a little short background.

5
00:00:16,637 --> 00:00:21,540
I've been doing mostly programming and tech artist stuff in Stockholm, Sweden.

6
00:00:21,540 --> 00:00:24,562
So I did some work for Avalanche Studios.

7
00:00:24,562 --> 00:00:27,683
I did a Unity and C Sharp teaching course at Future Games,

8
00:00:27,683 --> 00:00:29,464
which is a game development school.

9
00:00:29,464 --> 00:00:32,706
I've been doing some work for Quixel on their GPU baking stuff.

10
00:00:33,838 --> 00:00:36,399
And I've also created Shader Forge, a node-based shader

11
00:00:36,399 --> 00:00:37,860
editor for Unity.

12
00:00:37,860 --> 00:00:39,980
But nowadays, I spend pretty much all of my time

13
00:00:39,980 --> 00:00:43,961
at Neat Corporation developing Budget Cuts.

14
00:00:43,961 --> 00:00:48,402
So Budget Cuts is a first-person stealth VR game.

15
00:00:48,402 --> 00:00:49,703
And it's releasing soon.

16
00:00:49,703 --> 00:00:52,264
It's coming to Steam and Oculus O on May 16, 2018.

17
00:00:52,264 --> 00:00:52,464
Thank you.

18
00:00:52,464 --> 00:00:59,906
I thought I'd just clear that out before people

19
00:00:59,906 --> 00:01:00,626
start asking.

20
00:01:01,872 --> 00:01:03,393
All right, so this talk, I'm going

21
00:01:03,393 --> 00:01:05,554
to talk about the portal locomotion in our game.

22
00:01:05,554 --> 00:01:08,875
It's mostly going to be about the design,

23
00:01:08,875 --> 00:01:11,496
and it's going to be about the tech,

24
00:01:11,496 --> 00:01:14,837
and a little bit about the art.

25
00:01:14,837 --> 00:01:18,198
So I thought I'd first show a video of it in action,

26
00:01:18,198 --> 00:01:19,499
if it works.

27
00:01:19,499 --> 00:01:22,060
Let's see.

28
00:01:22,060 --> 00:01:22,980
There we go.

29
00:01:22,980 --> 00:01:25,481
Sort of.

30
00:01:25,481 --> 00:01:30,923
OK, it's kind of slow, so I guess I'll explain it slowly.

31
00:01:31,420 --> 00:01:37,505
Okay, so in this case you can see that the player is standing in a blue room and you're

32
00:01:37,505 --> 00:01:39,466
holding a device called a translocator.

33
00:01:39,466 --> 00:01:44,710
So you then fire a beacon out of this translocator and then once it lands in the other room,

34
00:01:44,710 --> 00:01:46,692
you get a portal in your gun.

35
00:01:46,692 --> 00:01:52,356
So I think it's my internet connection that's really shitty.

36
00:01:52,356 --> 00:01:53,337
I'm sorry about that.

37
00:01:53,337 --> 00:01:54,278
Okay.

38
00:01:54,278 --> 00:01:55,278
Cool Mech 2.

39
00:01:55,647 --> 00:01:58,528
So the portal then opens up above your translocator gun.

40
00:01:58,528 --> 00:02:00,689
So you can then look through into the other room.

41
00:02:00,689 --> 00:02:02,810
So you can see that the other room is the red room,

42
00:02:02,810 --> 00:02:04,151
and that's inside the portal.

43
00:02:04,151 --> 00:02:07,952
And the blue room is whatever you were standing before.

44
00:02:07,952 --> 00:02:10,193
And you then move into the room by pressing a button,

45
00:02:10,193 --> 00:02:12,194
and then that portal then wraps around you,

46
00:02:12,194 --> 00:02:13,814
and you are transported to that location.

47
00:02:13,814 --> 00:02:16,956
I'm really sorry about the video, by the way.

48
00:02:16,956 --> 00:02:20,917
All right, so let's talk about the design.

49
00:02:22,243 --> 00:02:24,284
So as with most VR games, you kind of

50
00:02:24,284 --> 00:02:26,484
have to start with motion sickness,

51
00:02:26,484 --> 00:02:29,085
because motion sickness is such a big issue in VR.

52
00:02:29,085 --> 00:02:31,326
Like if you try to port a non-VR game into VR,

53
00:02:31,326 --> 00:02:35,767
you're going to get motion sick in pretty much all cases.

54
00:02:35,767 --> 00:02:38,107
So with all of these limitations with how

55
00:02:38,107 --> 00:02:41,028
you can move the camera, you have

56
00:02:41,028 --> 00:02:43,568
to work around that as early as possible.

57
00:02:45,173 --> 00:02:46,634
So we just said no, we don't want

58
00:02:46,634 --> 00:02:47,794
to have any motion sickness.

59
00:02:47,794 --> 00:02:51,155
I'm not going to go into details on why we decided that.

60
00:02:51,155 --> 00:02:52,376
It seems like that's kind of redundant.

61
00:02:52,376 --> 00:02:54,356
Like that talk should have happened two years ago.

62
00:02:54,356 --> 00:02:57,977
All right, so I'm not going to talk about motion sickness.

63
00:02:57,977 --> 00:03:01,058
And I'm just going to talk about how we started developing

64
00:03:01,058 --> 00:03:02,199
this locomotion system.

65
00:03:02,199 --> 00:03:04,199
So we started with a point and click teleportation.

66
00:03:04,199 --> 00:03:07,240
And that's your laser pointer type of locomotion,

67
00:03:07,240 --> 00:03:10,381
where you have your tool handle, and then you point somewhere,

68
00:03:10,381 --> 00:03:12,462
and then you press a button, and you instantly teleport there.

69
00:03:13,877 --> 00:03:16,198
So this system had a bunch of problems

70
00:03:16,198 --> 00:03:17,338
that we wanted to solve.

71
00:03:17,338 --> 00:03:20,119
So I'm just going to run through all of the issues

72
00:03:20,119 --> 00:03:21,640
that we had with this system.

73
00:03:21,640 --> 00:03:25,122
There's no speed limits at which you can traverse the world.

74
00:03:25,122 --> 00:03:26,822
So you can just keep tapping the button,

75
00:03:26,822 --> 00:03:28,703
and you'll just instantly teleport

76
00:03:28,703 --> 00:03:29,704
wherever you're pointing.

77
00:03:29,704 --> 00:03:32,545
And this is a problem both in terms of gameplay,

78
00:03:32,545 --> 00:03:34,526
because it's a stealth game, and the time

79
00:03:34,526 --> 00:03:36,607
it takes to move to a certain location is really important.

80
00:03:37,465 --> 00:03:41,087
So another problem with this is that if you move in small enough

81
00:03:41,087 --> 00:03:44,589
increments, it can start to resemble continuous motion.

82
00:03:44,589 --> 00:03:46,830
And that's also a problem, because then that's

83
00:03:46,830 --> 00:03:48,471
going to cause motion sickness as well.

84
00:03:48,471 --> 00:03:50,952
There's no distance limits.

85
00:03:50,952 --> 00:03:54,093
So if you just point it at a mountain somewhere far away,

86
00:03:54,093 --> 00:03:55,674
you can just teleport there, because it's

87
00:03:55,674 --> 00:03:57,035
the laser pointer, right?

88
00:03:57,035 --> 00:03:58,336
So you just go there immediately,

89
00:03:58,336 --> 00:03:59,196
and then you can go back.

90
00:03:59,196 --> 00:04:02,838
And this is also a problem in terms of gameplay.

91
00:04:02,838 --> 00:04:04,659
So both of these things.

92
00:04:05,205 --> 00:04:08,067
We wanted to solve them in a natural way.

93
00:04:08,067 --> 00:04:10,689
So in terms of the speed limits, we

94
00:04:10,689 --> 00:04:13,270
could add a cool down for every teleportation.

95
00:04:13,270 --> 00:04:15,211
But that's really shitty for the player.

96
00:04:15,211 --> 00:04:17,133
It's like, oh, I just have to wait for one second

97
00:04:17,133 --> 00:04:18,954
or whatever for every teleportation.

98
00:04:18,954 --> 00:04:21,355
And it just feels unnatural and tacked on.

99
00:04:21,355 --> 00:04:23,376
It's kind of unfair.

100
00:04:23,376 --> 00:04:24,657
The same goes for the distance limit.

101
00:04:24,657 --> 00:04:26,739
Like, we could tack on some maximum radius

102
00:04:26,739 --> 00:04:27,899
for how far you can teleport.

103
00:04:27,899 --> 00:04:30,161
But again, that's kind of unfair to the player.

104
00:04:30,161 --> 00:04:32,702
Because it's like, why is this limit here?

105
00:04:34,071 --> 00:04:35,811
Another problem is that it's unpredictable.

106
00:04:35,811 --> 00:04:38,212
It's hard to tell where your head and body is going to end

107
00:04:38,212 --> 00:04:39,492
up once you actually teleport.

108
00:04:39,492 --> 00:04:42,393
So let's say you want to teleport to a doorway,

109
00:04:42,393 --> 00:04:44,773
and you want to make sure that you don't peek through,

110
00:04:44,773 --> 00:04:46,334
like in front of the doorway, just in case

111
00:04:46,334 --> 00:04:48,214
there are enemies there.

112
00:04:48,214 --> 00:04:50,935
So where's your head going to end up if you just point

113
00:04:50,935 --> 00:04:51,695
the laser pointer there?

114
00:04:51,695 --> 00:04:54,035
And are you moving your tracking space origin,

115
00:04:54,035 --> 00:04:56,716
or are you moving your player head?

116
00:04:56,716 --> 00:04:58,296
And it's kind of difficult to predict

117
00:04:58,296 --> 00:04:59,217
where you're going to end up.

118
00:04:59,217 --> 00:05:01,117
So that was really crucial in our game,

119
00:05:01,117 --> 00:05:01,937
which is a stealth game.

120
00:05:03,012 --> 00:05:04,133
So we need to solve that as well.

121
00:05:04,133 --> 00:05:08,056
And the transition when teleporting is kind of harsh.

122
00:05:08,056 --> 00:05:11,680
So if you make a graph of location A, location B,

123
00:05:11,680 --> 00:05:14,422
over time, it's just this really harsh transition

124
00:05:14,422 --> 00:05:16,364
in the center, which just snaps over there.

125
00:05:16,364 --> 00:05:17,505
And it feels shitty.

126
00:05:17,505 --> 00:05:19,026
It just blinks in your face.

127
00:05:19,026 --> 00:05:22,249
And it's kind of just not very nice at all.

128
00:05:23,789 --> 00:05:24,670
These were the goals.

129
00:05:24,670 --> 00:05:26,591
We wanted to solve all of these problems.

130
00:05:26,591 --> 00:05:28,233
So we didn't want to have any motion sickness.

131
00:05:28,233 --> 00:05:29,834
We wanted to have a natural speed limit.

132
00:05:29,834 --> 00:05:31,255
We wanted a natural distance limit.

133
00:05:31,255 --> 00:05:33,657
We want to have accurate positioning of the head.

134
00:05:33,657 --> 00:05:35,778
We also wanted to have a smooth transition once you go

135
00:05:35,778 --> 00:05:37,140
from location A to location B.

136
00:05:37,140 --> 00:05:42,724
So the Translocator device from the Unreal Tournament series

137
00:05:42,724 --> 00:05:46,507
was probably our biggest source of inspiration for this,

138
00:05:46,507 --> 00:05:49,990
given that it's using the same name, Translocator.

139
00:05:50,857 --> 00:05:52,558
The Translocator in Unreal Tournament

140
00:05:52,558 --> 00:05:54,339
is a device you hold in your hand.

141
00:05:54,339 --> 00:05:56,942
You then press the button to fire a small beacon that

142
00:05:56,942 --> 00:05:57,662
flies out.

143
00:05:57,662 --> 00:06:00,504
And once it lands, you can then press the alternate fire

144
00:06:00,504 --> 00:06:02,226
to teleport to wherever the beacon was.

145
00:06:02,226 --> 00:06:06,289
So the other source of inspiration

146
00:06:06,289 --> 00:06:09,312
was the portals from the game Portal.

147
00:06:09,312 --> 00:06:11,453
So the portals in Portal are quite intuitive.

148
00:06:11,453 --> 00:06:13,515
It just opens up this portal, and it's

149
00:06:13,515 --> 00:06:15,136
a window into a new location.

150
00:06:15,136 --> 00:06:16,798
And it's really clear where you're going to end up

151
00:06:16,798 --> 00:06:17,718
once you look through them.

152
00:06:18,308 --> 00:06:20,889
So combining these two was basically

153
00:06:20,889 --> 00:06:22,449
what led to our locomotion system.

154
00:06:22,449 --> 00:06:25,590
So what did the translocator solve?

155
00:06:25,590 --> 00:06:28,631
So since the translocator fires her projectile,

156
00:06:28,631 --> 00:06:31,051
it's going to land after a while,

157
00:06:31,051 --> 00:06:33,112
because it's a physical object, so it's affected by gravity.

158
00:06:33,112 --> 00:06:34,832
It's going to land somewhere.

159
00:06:34,832 --> 00:06:37,613
It has a set amount of speed, so there's

160
00:06:37,613 --> 00:06:40,434
no way you can teleport faster than the launch

161
00:06:40,434 --> 00:06:42,775
speed of the translocator beacon.

162
00:06:43,803 --> 00:06:45,964
So this pretty much solved the speed limit problem.

163
00:06:45,964 --> 00:06:47,645
It solves the distance limit problem.

164
00:06:47,645 --> 00:06:49,746
And it's also doing that in a natural way,

165
00:06:49,746 --> 00:06:51,567
because you know how throwing arcs work.

166
00:06:51,567 --> 00:06:54,248
You know how physical objects fly through space.

167
00:06:54,248 --> 00:06:57,209
So you're OK as a player waiting for that to finish.

168
00:06:57,209 --> 00:07:00,991
So we've pretty much solved the first three problems

169
00:07:00,991 --> 00:07:03,772
by having this translocator type of locomotion.

170
00:07:03,772 --> 00:07:07,134
So as for the accurate positioning

171
00:07:07,134 --> 00:07:08,635
of smooth transition, this is where

172
00:07:08,635 --> 00:07:10,095
we start to take inspiration from Portal.

173
00:07:12,599 --> 00:07:17,360
So the transition that's, so going back to the instant,

174
00:07:17,360 --> 00:07:18,781
instantaneous transition that's kind of harsh

175
00:07:18,781 --> 00:07:21,102
and just popping in your face, we wanted to improve that.

176
00:07:21,102 --> 00:07:23,562
So we had some ideas on how to do that.

177
00:07:23,562 --> 00:07:26,403
So one idea was to crossfade, to show both worlds

178
00:07:26,403 --> 00:07:30,304
and just transparently fade out one over the other,

179
00:07:30,304 --> 00:07:32,365
which is really shitty, don't do that.

180
00:07:32,365 --> 00:07:35,366
It's just showing two worlds at the same time.

181
00:07:35,366 --> 00:07:38,207
It's really hard on the GPU to render all of these things

182
00:07:38,207 --> 00:07:39,947
at the same time, it's just bad, so don't do that.

183
00:07:41,373 --> 00:07:43,375
You can also fade in and out to a solid color.

184
00:07:43,375 --> 00:07:47,379
This is something that I guess most VR games do these days.

185
00:07:47,379 --> 00:07:51,062
You flash to a solid color, and then you flash back.

186
00:07:51,062 --> 00:07:52,483
And it works OK.

187
00:07:52,483 --> 00:07:54,525
And you can put some sounds in there

188
00:07:54,525 --> 00:07:56,267
that kind of gives a narrative of what's happening.

189
00:07:56,267 --> 00:07:59,790
So you can put a footstep sound while it's

190
00:07:59,790 --> 00:08:01,091
fully faded to the solid color.

191
00:08:01,091 --> 00:08:03,974
And it gives kind of a narrative of what the player's

192
00:08:03,974 --> 00:08:05,175
doing during that transition.

193
00:08:06,342 --> 00:08:09,404
But we felt that this wasn't good enough for our game.

194
00:08:09,404 --> 00:08:11,486
We felt that it's kind of mean to the player

195
00:08:11,486 --> 00:08:12,887
to just fade out the entire screen.

196
00:08:12,887 --> 00:08:14,828
It still feels kind of tacked on.

197
00:08:14,828 --> 00:08:17,511
It's like, oh, you're just doing this because it's VR.

198
00:08:17,511 --> 00:08:17,551
OK.

199
00:08:17,551 --> 00:08:20,133
All right.

200
00:08:20,133 --> 00:08:21,834
So we decided to go with a portal.

201
00:08:23,135 --> 00:08:25,337
So having a portal gives the player the opportunity

202
00:08:25,337 --> 00:08:27,578
to look at both locations at the same time

203
00:08:27,578 --> 00:08:31,180
without them occupying the same space in their view.

204
00:08:31,180 --> 00:08:33,781
So for the CrossFade example, you can see both places,

205
00:08:33,781 --> 00:08:36,002
but it's really hard to focus on it because they're overlapping

206
00:08:36,002 --> 00:08:37,803
and it's difficult. But with a portal,

207
00:08:37,803 --> 00:08:40,245
you can actually see where you're going to end up.

208
00:08:40,245 --> 00:08:43,226
You have this window of looking into the new place.

209
00:08:43,226 --> 00:08:45,528
So then it makes it much more predictable,

210
00:08:45,528 --> 00:08:47,849
which is good for our stealth game.

211
00:08:50,355 --> 00:08:52,937
So here's a bit of an overview of how the transition works.

212
00:08:52,937 --> 00:08:54,478
So in the first screenshot, you can

213
00:08:54,478 --> 00:08:57,160
see that the portal's open above the translocator.

214
00:08:57,160 --> 00:08:59,322
And the player wants to move into this red room that

215
00:08:59,322 --> 00:09:00,362
has a small coffee table.

216
00:09:00,362 --> 00:09:02,344
And once you want to go there, you

217
00:09:02,344 --> 00:09:03,845
press the buttons to translocate.

218
00:09:03,845 --> 00:09:05,306
And the portal then wraps around you.

219
00:09:05,306 --> 00:09:06,347
You can see that it expands.

220
00:09:06,347 --> 00:09:08,548
And once it's fully enveloped the player,

221
00:09:08,548 --> 00:09:09,769
they're standing at a new location.

222
00:09:09,769 --> 00:09:12,311
And this is a completely smooth experience.

223
00:09:12,311 --> 00:09:17,395
So just to give a little bit of a technical breakdown of how

224
00:09:17,395 --> 00:09:18,396
the system is set up.

225
00:09:20,342 --> 00:09:23,024
So on the left, you have the little cross

226
00:09:23,024 --> 00:09:24,665
is the origin of the play space.

227
00:09:24,665 --> 00:09:26,006
So we're doing room scale tracked VR.

228
00:09:26,006 --> 00:09:28,628
So that's the origin of the play space.

229
00:09:28,628 --> 00:09:30,029
And the thing above it is the eyes

230
00:09:30,029 --> 00:09:31,270
of the player or the cameras.

231
00:09:31,270 --> 00:09:36,033
And the things on the right, that's

232
00:09:36,033 --> 00:09:37,094
the destination you want to go to.

233
00:09:37,094 --> 00:09:39,376
So let's say these are objects you want to move to.

234
00:09:39,376 --> 00:09:42,358
So you then fire the translocator beacon.

235
00:09:42,358 --> 00:09:44,580
It lands near the objects.

236
00:09:44,580 --> 00:09:46,081
We then create another set of cameras

237
00:09:46,081 --> 00:09:48,403
because we're going to have to render the portal as well.

238
00:09:49,313 --> 00:09:51,213
So this one matches your head at all times.

239
00:09:51,213 --> 00:09:52,614
So when you move your head to the sides,

240
00:09:52,614 --> 00:09:56,515
the portal cameras are going to move in the same way.

241
00:09:56,515 --> 00:09:58,456
So we then open the portal in front of the player.

242
00:09:58,456 --> 00:10:01,617
And this corresponds to this location at the portal

243
00:10:01,617 --> 00:10:02,397
or in the destination.

244
00:10:02,397 --> 00:10:05,038
So then you can look through the portal.

245
00:10:05,038 --> 00:10:08,239
And once you do that, you can see the new objects

246
00:10:08,239 --> 00:10:10,280
that you're about to go to.

247
00:10:10,280 --> 00:10:13,061
And in this way, you get a really predictable way

248
00:10:13,061 --> 00:10:13,881
of seeing.

249
00:10:14,242 --> 00:10:15,782
where you're going to end up, how it's going to look.

250
00:10:15,782 --> 00:10:17,923
And this one is fully dynamic as well.

251
00:10:17,923 --> 00:10:19,703
So if you turn around, the portal

252
00:10:19,703 --> 00:10:21,164
is going to follow along your weapon as well.

253
00:10:21,164 --> 00:10:23,585
So you can always see where you're going to end up.

254
00:10:23,585 --> 00:10:26,946
So then once you press the buttons to teleport,

255
00:10:26,946 --> 00:10:29,387
we expand the portal around a sphere that's

256
00:10:29,387 --> 00:10:30,407
around the head of the player.

257
00:10:30,407 --> 00:10:33,148
The sphere is like, I think we used like a one meter radius.

258
00:10:33,148 --> 00:10:35,909
And then the portal just expands around that sphere.

259
00:10:35,909 --> 00:10:38,530
And then it fully envelops the player.

260
00:10:38,530 --> 00:10:39,870
And then they're standing at the new location.

261
00:10:39,870 --> 00:10:42,531
So once you press, it expands.

262
00:10:42,531 --> 00:10:44,152
And then you're at the new location.

263
00:10:46,623 --> 00:10:48,824
So this system was super smooth.

264
00:10:48,824 --> 00:10:51,906
We haven't had any locomotion.

265
00:10:51,906 --> 00:10:53,707
We haven't had any motion sickness from this at all.

266
00:10:53,707 --> 00:10:55,927
It's been working really well.

267
00:10:55,927 --> 00:10:59,669
So this was a nice way of contextualizing the movement

268
00:10:59,669 --> 00:11:01,890
system in the game as well, because our translocator device

269
00:11:01,890 --> 00:11:02,890
has a story behind it.

270
00:11:02,890 --> 00:11:05,211
All right.

271
00:11:05,211 --> 00:11:07,272
So that pretty much solved all of the goals

272
00:11:07,272 --> 00:11:08,913
in terms of locomotion.

273
00:11:08,913 --> 00:11:11,554
But we also had some design issues still.

274
00:11:11,554 --> 00:11:14,075
So let's say.

275
00:11:14,852 --> 00:11:17,234
Let's say the player is looking north.

276
00:11:17,234 --> 00:11:18,574
So this is a top-down view.

277
00:11:18,574 --> 00:11:19,875
The player is looking north.

278
00:11:19,875 --> 00:11:22,637
They're holding the translocator device in front of them.

279
00:11:22,637 --> 00:11:24,178
And they open up the portal.

280
00:11:24,178 --> 00:11:26,599
And then you press the buttons to teleport

281
00:11:26,599 --> 00:11:27,520
to the new location.

282
00:11:27,520 --> 00:11:30,362
So the portal starts expanding in front of them.

283
00:11:30,362 --> 00:11:32,183
Now, we naively thought that, OK,

284
00:11:32,183 --> 00:11:34,744
so as soon as the portal has expanded and filled

285
00:11:34,744 --> 00:11:36,245
your entire field of view, we can then

286
00:11:36,245 --> 00:11:38,206
move the player object to the new location

287
00:11:38,206 --> 00:11:40,648
and just close the portal, and everything's done.

288
00:11:40,648 --> 00:11:43,249
The problem, though, is that the player can still turn around.

289
00:11:43,249 --> 00:11:44,510
So if the player starts turning.

290
00:11:44,962 --> 00:11:47,842
then the portal edge is going to be in front of them.

291
00:11:47,842 --> 00:11:49,943
So we kind of have to keep expanding

292
00:11:49,943 --> 00:11:53,664
the portal across the entire sphere around the player head.

293
00:11:53,664 --> 00:11:57,706
So we had to do this full envelope of the player, which

294
00:11:57,706 --> 00:11:59,606
had some issues.

295
00:11:59,606 --> 00:12:00,787
So let's say you're looking forward.

296
00:12:00,787 --> 00:12:02,047
You have the portal in front of you.

297
00:12:02,047 --> 00:12:03,788
You press the buttons to teleport.

298
00:12:03,788 --> 00:12:05,388
It then starts to expand.

299
00:12:05,388 --> 00:12:07,229
And once it reaches this point, you

300
00:12:07,229 --> 00:12:08,889
don't see anything happening.

301
00:12:08,889 --> 00:12:11,410
Your entire field of view is the destination

302
00:12:11,410 --> 00:12:11,970
that you're going to.

303
00:12:11,970 --> 00:12:14,231
But the portal hasn't wrapped yet.

304
00:12:14,231 --> 00:12:14,311
So.

305
00:12:14,958 --> 00:12:18,059
you still have this time here where

306
00:12:18,059 --> 00:12:19,380
you don't see anything happening,

307
00:12:19,380 --> 00:12:21,241
but you're still waiting for the portal to finish.

308
00:12:21,241 --> 00:12:23,702
So it was kind of annoying to have to wait for that.

309
00:12:23,702 --> 00:12:26,823
So conversely, if you're looking south

310
00:12:26,823 --> 00:12:29,304
and you're holding the translocator to the north

311
00:12:29,304 --> 00:12:30,545
and you start translocating, then

312
00:12:30,545 --> 00:12:31,705
the first half of the translocation

313
00:12:31,705 --> 00:12:33,626
is going to be useless because nothing's happening.

314
00:12:33,626 --> 00:12:35,587
You just heard the audio for teleporting,

315
00:12:35,587 --> 00:12:39,188
but nothing happens until the last 75% of the wrapping.

316
00:12:40,004 --> 00:12:42,206
So this was something we wanted to solve,

317
00:12:42,206 --> 00:12:44,688
because we wanted to have a consistent teleportation time.

318
00:12:44,688 --> 00:12:47,911
And we didn't want to have any sort of weird wrapping

319
00:12:47,911 --> 00:12:50,593
where the portal comes in from your periphery,

320
00:12:50,593 --> 00:12:52,775
and it squeezes into a small hole, and it just looked odd.

321
00:12:52,775 --> 00:12:55,438
All right, so the solution to this

322
00:12:55,438 --> 00:12:59,682
is a word that I've always wanted

323
00:12:59,682 --> 00:13:01,344
to use in a professional setting.

324
00:13:01,344 --> 00:13:01,964
It's slurp.

325
00:13:01,964 --> 00:13:05,808
So that's short for spherical linear interpolation.

326
00:13:06,720 --> 00:13:08,701
So on the left, you have lerp, which is linear.

327
00:13:08,701 --> 00:13:11,103
And on the right, you have slurp, which is spherical.

328
00:13:11,103 --> 00:13:13,865
So it's basically interpolation between two sets of data

329
00:13:13,865 --> 00:13:14,205
points.

330
00:13:14,205 --> 00:13:16,126
In this case, it's two vectors.

331
00:13:16,126 --> 00:13:20,029
So if you want to interpolate between the vertical vector

332
00:13:20,029 --> 00:13:22,391
and the horizontal one by 25% and 50%,

333
00:13:22,391 --> 00:13:24,292
you can see that the right one is spherical.

334
00:13:24,292 --> 00:13:28,075
So that's what we're doing with the direction

335
00:13:28,075 --> 00:13:31,137
towards the translocator and the player view direction.

336
00:13:32,643 --> 00:13:34,823
So as you can see here, that's the translocator direction,

337
00:13:34,823 --> 00:13:37,344
and we have the view direction there.

338
00:13:37,344 --> 00:13:40,845
So what we do is essentially, so if we

339
00:13:40,845 --> 00:13:43,886
have this case where the player is looking southeast,

340
00:13:43,886 --> 00:13:45,767
and they have the portal to the north,

341
00:13:45,767 --> 00:13:48,627
and they start to translocate, they press the buttons.

342
00:13:48,627 --> 00:13:52,008
Then we pivot the portal around the player head

343
00:13:52,008 --> 00:13:53,789
to rotate in front of them.

344
00:13:53,789 --> 00:13:56,670
So while it's expanding, it's simultaneously

345
00:13:56,670 --> 00:13:59,010
slurping towards the field of view of the player.

346
00:13:59,869 --> 00:14:02,611
So then it just fully involves their field of view.

347
00:14:02,611 --> 00:14:04,993
It's really predictable, and it works really well.

348
00:14:04,993 --> 00:14:07,935
So this solved the problem of holding the translocator

349
00:14:07,935 --> 00:14:09,556
behind them and then press the button.

350
00:14:09,556 --> 00:14:11,458
It just kind of gives you this side swipe

351
00:14:11,458 --> 00:14:14,120
as it covers your field of view, and it works really well.

352
00:14:14,120 --> 00:14:17,803
So that allows us to give a consistent time

353
00:14:17,803 --> 00:14:18,644
to move in every step.

354
00:14:18,644 --> 00:14:23,548
So then we also asked ourselves, what is the portal?

355
00:14:23,548 --> 00:14:26,810
Like, what's the physical nature of the portal,

356
00:14:26,810 --> 00:14:28,252
and how do people interact with it?

357
00:14:29,337 --> 00:14:31,158
So this is something that's quite important

358
00:14:31,158 --> 00:14:33,640
because the player gets certain expectations

359
00:14:33,640 --> 00:14:34,360
of how they can use it.

360
00:14:34,360 --> 00:14:37,903
So for instance, can you reach through the portal?

361
00:14:37,903 --> 00:14:39,825
Can you grab objects if you do that?

362
00:14:39,825 --> 00:14:41,546
Can you throw objects through the portal?

363
00:14:41,546 --> 00:14:43,467
So if you open the portal behind an enemy

364
00:14:43,467 --> 00:14:45,149
and you're holding a knife, can you throw the knife

365
00:14:45,149 --> 00:14:46,670
through the portal at the enemy?

366
00:14:46,670 --> 00:14:48,571
Should that work?

367
00:14:48,571 --> 00:14:50,513
Or can you put your head through the portal

368
00:14:50,513 --> 00:14:53,014
if you move it really close to your face?

369
00:14:53,014 --> 00:14:55,576
So these were questions we had to solve somehow.

370
00:14:57,515 --> 00:15:00,277
Contrary to the portal in the game portal,

371
00:15:00,277 --> 00:15:01,918
our portal is not physical at all.

372
00:15:01,918 --> 00:15:03,800
It's only visual.

373
00:15:03,800 --> 00:15:04,861
So photons only.

374
00:15:04,861 --> 00:15:06,722
Nothing else can go through this portal

375
00:15:06,722 --> 00:15:10,425
until you actually translocate and press the buttons, I guess.

376
00:15:10,425 --> 00:15:12,267
And this worked pretty well in communicating

377
00:15:12,267 --> 00:15:12,967
how things work.

378
00:15:12,967 --> 00:15:15,049
And it also allowed us to save time

379
00:15:15,049 --> 00:15:16,930
in not implementing throwing physics objects

380
00:15:16,930 --> 00:15:19,132
through the portal, because that's a whole can of worms.

381
00:15:19,132 --> 00:15:23,095
So let's say the player is standing in this blue room,

382
00:15:23,095 --> 00:15:25,517
and they teleport to a pair of scissors that's

383
00:15:25,517 --> 00:15:26,898
laying on a shelf in a red room.

384
00:15:28,129 --> 00:15:30,071
So if you want to grab that object,

385
00:15:30,071 --> 00:15:31,692
you use your grabber, which is the tool

386
00:15:31,692 --> 00:15:33,153
you're using to pick stuff up.

387
00:15:33,153 --> 00:15:35,435
And if you move that into the portal,

388
00:15:35,435 --> 00:15:38,237
you can see that it kind of gets this hologram effect.

389
00:15:38,237 --> 00:15:41,780
So that's one way that we communicate to the player

390
00:15:41,780 --> 00:15:43,521
that this is a preview of where you're going to end up.

391
00:15:43,521 --> 00:15:44,782
You're not actually standing there.

392
00:15:44,782 --> 00:15:47,044
Your controllers are not actually at the new location.

393
00:15:48,055 --> 00:15:50,116
So this was a good way of communicating to the player

394
00:15:50,116 --> 00:15:52,036
that, no, you can't pick this up.

395
00:15:52,036 --> 00:15:53,597
And it actually worked well.

396
00:15:53,597 --> 00:15:55,277
We used to have issues with this before when

397
00:15:55,277 --> 00:15:57,698
the controllers looked like the physical controllers

398
00:15:57,698 --> 00:15:59,938
on the other side of the portal as well.

399
00:15:59,938 --> 00:16:01,258
But in this case, it worked well.

400
00:16:01,258 --> 00:16:05,039
So once you press the buttons to translocate

401
00:16:05,039 --> 00:16:07,200
and the portal starts expanding around you,

402
00:16:07,200 --> 00:16:09,440
we immediately pop the controllers

403
00:16:09,440 --> 00:16:11,241
to the physical versions of them.

404
00:16:11,241 --> 00:16:12,261
So it's no longer holograms.

405
00:16:12,261 --> 00:16:14,381
And you can immediately start to interact with it.

406
00:16:14,381 --> 00:16:17,662
And this is something we actually added later.

407
00:16:17,662 --> 00:16:17,722
So.

408
00:16:18,501 --> 00:16:20,101
The first iteration of the portal,

409
00:16:20,101 --> 00:16:22,582
we didn't move the physical player objects

410
00:16:22,582 --> 00:16:25,022
until the portal was done wrapping around you.

411
00:16:25,022 --> 00:16:27,423
And we had a lot of issues with players.

412
00:16:27,423 --> 00:16:29,523
Like, let's say you're holding a knife,

413
00:16:29,523 --> 00:16:31,703
and you want to throw that at a robot that's standing somewhere.

414
00:16:31,703 --> 00:16:33,744
You open up the portal, and then you

415
00:16:33,744 --> 00:16:35,844
want to press the buttons to translocate it,

416
00:16:35,844 --> 00:16:37,324
and then immediately throw the knife.

417
00:16:37,324 --> 00:16:39,745
But the problem with this is that if the translocation

418
00:16:39,745 --> 00:16:42,405
of your physical body doesn't happen until the portal is

419
00:16:42,405 --> 00:16:44,946
done, if you throw the knife while it's wrapping around you,

420
00:16:44,946 --> 00:16:45,286
it's going to.

421
00:16:45,636 --> 00:16:48,758
be thrown from the old location rather than the new location.

422
00:16:48,758 --> 00:16:50,699
So we had a lot of people losing their knives.

423
00:16:50,699 --> 00:16:53,021
It seemed like they were just disappearing.

424
00:16:53,021 --> 00:16:55,582
So what we do is we immediately move the player

425
00:16:55,582 --> 00:16:57,263
on the first frame you press to translocate,

426
00:16:57,263 --> 00:16:59,244
and then the rest is just a visual effect.

427
00:16:59,244 --> 00:17:03,007
So in this case, you press the buttons to translocate,

428
00:17:03,007 --> 00:17:05,028
and you could just pick up the scissors, and you're done.

429
00:17:05,028 --> 00:17:08,290
So what about the enemies in our game?

430
00:17:08,290 --> 00:17:11,452
Can they see the portal?

431
00:17:11,452 --> 00:17:13,133
Can they see the translocator?

432
00:17:13,133 --> 00:17:14,794
Like, how do they interact with it?

433
00:17:16,102 --> 00:17:17,823
So this is our translocator beacon.

434
00:17:17,823 --> 00:17:19,724
So should they be able to see that one or not?

435
00:17:19,724 --> 00:17:24,287
And in the demo we released two years ago,

436
00:17:24,287 --> 00:17:26,968
we made sure that they couldn't see the beacon at all,

437
00:17:26,968 --> 00:17:30,130
because we felt that the game became too hard.

438
00:17:30,130 --> 00:17:32,332
But we later realized that once you

439
00:17:32,332 --> 00:17:35,494
get used to the robots not seeing the translocator beacon,

440
00:17:35,494 --> 00:17:37,795
the game felt like it became a bit too easy.

441
00:17:37,795 --> 00:17:39,036
You can just move around anywhere,

442
00:17:39,036 --> 00:17:41,898
and you could just do whatever you wanted,

443
00:17:41,898 --> 00:17:43,318
and there was no consequence.

444
00:17:43,318 --> 00:17:45,240
And the threat of the robots kind of disappeared.

445
00:17:46,598 --> 00:17:49,300
So we did some experimenting with this.

446
00:17:49,300 --> 00:17:54,385
We tried to kind of make the beacon into a character,

447
00:17:54,385 --> 00:17:57,648
into yourself in a way, like an extension of you.

448
00:17:57,648 --> 00:17:59,069
So if you wanted to move somewhere,

449
00:17:59,069 --> 00:18:01,171
let's say you want to move past this guard,

450
00:18:01,171 --> 00:18:04,314
then if you don't want to be spotted,

451
00:18:04,314 --> 00:18:05,755
maybe you have to move around the guard,

452
00:18:05,755 --> 00:18:09,178
like you have to fire it over the doorway.

453
00:18:09,178 --> 00:18:12,581
So this was something that we experimented with,

454
00:18:12,581 --> 00:18:13,942
but it ended up not being fun.

455
00:18:14,682 --> 00:18:19,105
Because in stealth games, when you move around continuously, you can still look around you.

456
00:18:19,105 --> 00:18:22,607
You can still see who can see you.

457
00:18:22,607 --> 00:18:27,450
But if we tried to emulate a character in something that you can't see from, it became

458
00:18:27,450 --> 00:18:29,051
kind of... it just didn't work well.

459
00:18:29,051 --> 00:18:33,134
You would fire the translocator down a hallway and like five robots saw the beacon and you

460
00:18:33,134 --> 00:18:35,215
had no idea from where they saw them.

461
00:18:35,215 --> 00:18:37,777
And it just became chaotic and shitty.

462
00:18:39,387 --> 00:18:41,149
Yeah, we ended up scrapping that idea.

463
00:18:41,149 --> 00:18:44,751
So they can't see the translocator beacon anymore.

464
00:18:44,751 --> 00:18:46,693
So what about the portal?

465
00:18:46,693 --> 00:18:47,774
Can they see the portal?

466
00:18:47,774 --> 00:18:49,095
How should they react if they see it?

467
00:18:49,095 --> 00:18:52,517
And again, this is something that was invisible in the demo.

468
00:18:52,517 --> 00:18:54,919
But we felt that, again, it kind of removed

469
00:18:54,919 --> 00:18:56,541
the threat of the enemies.

470
00:18:56,541 --> 00:18:58,762
Because you could just look inside a room.

471
00:18:58,762 --> 00:18:59,663
You can look around.

472
00:18:59,663 --> 00:19:02,765
And the enemies would not react to the portal at all.

473
00:19:02,765 --> 00:19:07,029
So what we tried for a while was to make the enemies shoot

474
00:19:07,029 --> 00:19:08,110
the portal if they see it.

475
00:19:08,679 --> 00:19:11,021
So you fire the beacon into a room, the portal opens up,

476
00:19:11,021 --> 00:19:12,161
and if there's a guard there, they're

477
00:19:12,161 --> 00:19:14,883
going to see the portal and fire at it, which closes the portal,

478
00:19:14,883 --> 00:19:16,764
and then they would start looking for you.

479
00:19:16,764 --> 00:19:18,826
The problem with this was basically

480
00:19:18,826 --> 00:19:20,587
the same as with the translocator beacon.

481
00:19:20,587 --> 00:19:22,028
It just became chaotic.

482
00:19:22,028 --> 00:19:24,470
It wasn't really the fun type of chaotic either.

483
00:19:24,470 --> 00:19:26,971
It was just the unpredictable type of chaotic.

484
00:19:26,971 --> 00:19:30,934
So we ended up halfway scrapping that idea

485
00:19:30,934 --> 00:19:33,696
of making them see the portal.

486
00:19:33,696 --> 00:19:36,197
So what we did instead was that they

487
00:19:36,197 --> 00:19:37,998
can't see the portal itself.

488
00:19:38,483 --> 00:19:41,324
but they can see you through the portal.

489
00:19:41,324 --> 00:19:43,465
So if you're looking through the portal in a room

490
00:19:43,465 --> 00:19:44,806
and you're looking at a robot, they

491
00:19:44,806 --> 00:19:46,146
can see you through the portal.

492
00:19:46,146 --> 00:19:47,347
And then they would react.

493
00:19:47,347 --> 00:19:49,747
And then they fire at the portal to close the portal.

494
00:19:49,747 --> 00:19:51,928
So this kind of kept the threat of the guards

495
00:19:51,928 --> 00:19:53,609
there because they react to the portal,

496
00:19:53,609 --> 00:19:55,249
but only when you see the guards.

497
00:19:55,249 --> 00:19:57,350
So that kind of removed the unpredictability factor

498
00:19:57,350 --> 00:19:59,031
and made it much more interesting and fun.

499
00:19:59,031 --> 00:20:01,672
So in this case, you get all the audio cues

500
00:20:01,672 --> 00:20:02,672
of a guard spotting you.

501
00:20:02,672 --> 00:20:05,193
And then you get this innate reaction

502
00:20:05,193 --> 00:20:07,094
that you just want to close the portal and hide,

503
00:20:07,094 --> 00:20:07,694
which is really good.

504
00:20:08,663 --> 00:20:09,624
That worked well for us.

505
00:20:09,624 --> 00:20:16,970
All right, so a little bit about the tech.

506
00:20:16,970 --> 00:20:19,952
So we kind of had two iterations of the portal system.

507
00:20:19,952 --> 00:20:23,775
So the old one was the one we had in the demo two years ago.

508
00:20:23,775 --> 00:20:26,277
And then we have a new iteration that's much faster.

509
00:20:26,277 --> 00:20:29,780
So this is the old version, just to go through the two

510
00:20:29,780 --> 00:20:30,420
iterations we had.

511
00:20:30,420 --> 00:20:34,263
So in the old version, we rendered the portal cameras.

512
00:20:35,477 --> 00:20:37,158
So when we render the cameras of the portal,

513
00:20:37,158 --> 00:20:39,999
that's two cameras, one per eye.

514
00:20:39,999 --> 00:20:41,160
So we render that to a render target,

515
00:20:41,160 --> 00:20:42,901
and then we have a portal mesh in front of you.

516
00:20:42,901 --> 00:20:45,382
That's, again, the one meter distance sphere

517
00:20:45,382 --> 00:20:47,944
where we cut out using a shader.

518
00:20:47,944 --> 00:20:50,405
And then we render that render target

519
00:20:50,405 --> 00:20:52,787
with a shader on that portal.

520
00:20:52,787 --> 00:20:54,407
And then we render the eye cameras,

521
00:20:54,407 --> 00:20:56,789
which is everything your eyes can see,

522
00:20:56,789 --> 00:20:58,070
and then the portal mesh in front of it.

523
00:20:58,070 --> 00:20:59,931
And then we added all of the effects.

524
00:20:59,931 --> 00:21:01,732
The problem with this, though, is

525
00:21:01,732 --> 00:21:03,653
that this is really heavy for the graphics card.

526
00:21:04,198 --> 00:21:06,039
So if you're like, OK, I'm going to render

527
00:21:06,039 --> 00:21:07,940
the left eye of the portal, and I'm

528
00:21:07,940 --> 00:21:09,761
going to render the right eye of the portal,

529
00:21:09,761 --> 00:21:12,202
and I'm going to render the left eye of the player

530
00:21:12,202 --> 00:21:14,224
and the right eye of the player.

531
00:21:14,224 --> 00:21:16,705
And it becomes quite a lot after a while.

532
00:21:16,705 --> 00:21:18,506
It's not very performant.

533
00:21:18,506 --> 00:21:22,228
And then you're like, OK, let's add some sort of post effects

534
00:21:22,228 --> 00:21:22,348
here.

535
00:21:22,348 --> 00:21:24,349
I want to have tone mapping, and I

536
00:21:24,349 --> 00:21:25,430
want to have color correction.

537
00:21:25,430 --> 00:21:27,631
And it's just super heavy.

538
00:21:27,631 --> 00:21:29,232
So we had to optimize this somehow.

539
00:21:30,099 --> 00:21:32,560
So it's really heavy, both in processing power

540
00:21:32,560 --> 00:21:34,381
as well as in memory, because we had

541
00:21:34,381 --> 00:21:37,182
to have a full screen render target as well.

542
00:21:37,182 --> 00:21:42,424
So our solution to this was to not use a render target at all.

543
00:21:42,424 --> 00:21:45,385
So the final version that we're using right now,

544
00:21:45,385 --> 00:21:47,586
we first rendered the portal, which

545
00:21:47,586 --> 00:21:50,407
is the black disk you can see there.

546
00:21:50,407 --> 00:21:52,288
And that one writes to the Z-buffer

547
00:21:52,288 --> 00:21:54,809
so that everything behind it gets rejected.

548
00:21:54,809 --> 00:21:56,850
So it only renders everything around the portal.

549
00:21:56,850 --> 00:21:59,371
So it renders all the opaque geometry for the eye cameras.

550
00:22:01,280 --> 00:22:03,081
So then we render the transparent geometry

551
00:22:03,081 --> 00:22:05,864
to add all the portal effects and whatnot.

552
00:22:05,864 --> 00:22:08,786
Then we fill the z-buffer full screen,

553
00:22:08,786 --> 00:22:12,709
and then we punch a hole in the z-buffer at the portal.

554
00:22:12,709 --> 00:22:16,773
So what we then can do is we just render the portal cameras

555
00:22:16,773 --> 00:22:17,974
after this.

556
00:22:17,974 --> 00:22:21,517
And everything around the portal will be z-rejected early,

557
00:22:21,517 --> 00:22:24,039
so it will only render inside the portal.

558
00:22:24,039 --> 00:22:26,401
So then we render the opaque geometry of the portal cameras,

559
00:22:26,401 --> 00:22:28,062
and then the transparent geometry.

560
00:22:28,062 --> 00:22:30,424
And that gives us the full effect of the portal.

561
00:22:30,995 --> 00:22:33,356
And this was much, much more performance

562
00:22:33,356 --> 00:22:35,237
than what we had before.

563
00:22:35,237 --> 00:22:36,938
And we didn't have to do any render target hacks now.

564
00:22:36,938 --> 00:22:39,659
So this is kind of an overview of that system.

565
00:22:39,659 --> 00:22:42,480
All right, so let's talk a little bit about the art as well.

566
00:22:42,480 --> 00:22:47,842
So this is a screenshot from the old version.

567
00:22:47,842 --> 00:22:50,183
Since we were using a render target,

568
00:22:50,183 --> 00:22:56,385
we could do all sorts of effects that we can't really do anymore.

569
00:22:56,822 --> 00:22:58,922
So we could do refraction inside the portal.

570
00:22:58,922 --> 00:23:00,523
So if you look around the edges of the portal,

571
00:23:00,523 --> 00:23:02,124
it kind of distorts what's behind it.

572
00:23:02,124 --> 00:23:05,385
And that was kind of, it gave it this,

573
00:23:05,385 --> 00:23:07,566
like a black hole effect, so everything was just

574
00:23:07,566 --> 00:23:09,387
sort of worked around the edges.

575
00:23:09,387 --> 00:23:11,848
Which was pretty cool, but it was kind of hard

576
00:23:11,848 --> 00:23:14,008
to communicate to the player how all of that worked.

577
00:23:14,008 --> 00:23:16,289
And we, but the advantage was like,

578
00:23:16,289 --> 00:23:18,630
we could have the refraction effects,

579
00:23:18,630 --> 00:23:20,071
we could have like 2D effects around the edges,

580
00:23:20,071 --> 00:23:21,972
because it was just sitting on this inverted sphere

581
00:23:21,972 --> 00:23:23,472
around the player.

582
00:23:23,472 --> 00:23:25,133
But we changed that for the final portal.

583
00:23:26,812 --> 00:23:31,017
So just to give a little effects breakdown of how the portal is rendered,

584
00:23:31,017 --> 00:23:34,180
we first have the disk of the portal,

585
00:23:34,180 --> 00:23:36,143
and we then render a glow effect around the portal.

586
00:23:36,143 --> 00:23:38,345
It's just a quad strip, basically.

587
00:23:38,345 --> 00:23:41,289
So this is on the outside and gives it a nice glow effect.

588
00:23:41,289 --> 00:23:45,093
Then there's a funnel, which is too high poly.

589
00:23:45,093 --> 00:23:46,955
I forgot to fix that, but too late now.

590
00:23:47,840 --> 00:23:51,861
So it has like a funnel shape, which gives it a bit of a depth

591
00:23:51,861 --> 00:23:53,422
and gives it kind of a funnel effect.

592
00:23:53,422 --> 00:23:56,342
The effect is kind of subtle, but in VR it feels much better.

593
00:23:56,342 --> 00:23:59,043
It feels like things are going into the portal.

594
00:23:59,043 --> 00:24:03,824
All right, so then we render the eye cameras inside the portal.

595
00:24:03,824 --> 00:24:06,225
And then we have a multiply disk that multiplies

596
00:24:06,225 --> 00:24:07,465
in a color from the edges.

597
00:24:07,465 --> 00:24:09,385
I can switch back and forth so you can see.

598
00:24:09,385 --> 00:24:10,886
So that gives it a bit more depth.

599
00:24:10,886 --> 00:24:12,886
It gives it a bit more punch and makes

600
00:24:12,886 --> 00:24:16,587
it feel like a sphere and a deep thing you can look into.

601
00:24:18,561 --> 00:24:21,582
So then we have an inner inverted cylinder thing

602
00:24:21,582 --> 00:24:25,123
that gives it more of the funnel effect, which is useful.

603
00:24:25,123 --> 00:24:28,184
And then another glow ring on the inside

604
00:24:28,184 --> 00:24:31,326
to make the border seem like a really sharp glow,

605
00:24:31,326 --> 00:24:33,326
kind of the lightsaber effect, I guess.

606
00:24:33,326 --> 00:24:36,868
All right, so let's see if this one, there we go.

607
00:24:36,868 --> 00:24:39,729
And then we also have a.

608
00:24:41,161 --> 00:24:43,122
bubble shine on top of the portal.

609
00:24:43,122 --> 00:24:45,622
Because in the new version, we want the portal

610
00:24:45,622 --> 00:24:48,543
to feel more like a bubble you can look through,

611
00:24:48,543 --> 00:24:50,764
rather than a black hole.

612
00:24:50,764 --> 00:24:53,164
Or a wormhole, I guess.

613
00:24:53,164 --> 00:24:55,465
So yeah, that gave it a nice shine.

614
00:24:55,465 --> 00:24:57,206
We had to tweak this one quite a lot

615
00:24:57,206 --> 00:24:59,846
to make sure that it didn't outshine the things you were

616
00:24:59,846 --> 00:25:01,247
seeing inside of the portal.

617
00:25:01,247 --> 00:25:03,788
And this was kind of tricky when you were moving

618
00:25:03,788 --> 00:25:06,408
from a very dark area to a very bright area, and vice versa.

619
00:25:06,860 --> 00:25:09,442
So if you had really bright reflections on the portal going

620
00:25:09,442 --> 00:25:11,243
into a dark area, you would just see the reflections.

621
00:25:11,243 --> 00:25:13,305
And it was super confusing.

622
00:25:13,305 --> 00:25:15,126
So we ended up just fading the reflection

623
00:25:15,126 --> 00:25:17,287
in the center of the portal and just making

624
00:25:17,287 --> 00:25:18,468
it sharp around the edges.

625
00:25:18,468 --> 00:25:24,111
All right, so the physical nature of the portal

626
00:25:24,111 --> 00:25:26,753
was something we had some issues with in the demo.

627
00:25:26,753 --> 00:25:29,575
So this inverted sphere I've been talking about before,

628
00:25:29,575 --> 00:25:32,097
that was something we had to scrap once we

629
00:25:32,097 --> 00:25:34,078
reached the final iteration of the portal.

630
00:25:34,452 --> 00:25:37,314
The inverted sphere idea was basically a,

631
00:25:37,314 --> 00:25:38,634
you take a sphere, you invert it,

632
00:25:38,634 --> 00:25:41,536
it's one meter in radius, and then we had a shader

633
00:25:41,536 --> 00:25:43,157
that rendered the portal in front of you

634
00:25:43,157 --> 00:25:45,918
based on the direction from your head to the translocator.

635
00:25:45,918 --> 00:25:49,180
But the problem with that was that it had no sense of depth,

636
00:25:49,180 --> 00:25:50,821
it was always at one meter distance,

637
00:25:50,821 --> 00:25:52,622
regardless of where you were holding the translocator.

638
00:25:52,622 --> 00:25:54,643
So you could move the translocator around,

639
00:25:54,643 --> 00:25:56,624
but the portal would stay at one meter's distance.

640
00:25:56,624 --> 00:25:59,225
And it was really hard to tell, like,

641
00:25:59,225 --> 00:26:02,166
where is the portal, how far away is it?

642
00:26:02,667 --> 00:26:05,489
It just felt weird for the player.

643
00:26:05,489 --> 00:26:09,071
So let's see if this video plays.

644
00:26:09,071 --> 00:26:09,632
If not, I'll just skip it.

645
00:26:09,632 --> 00:26:10,392
It's not too important.

646
00:26:10,392 --> 00:26:10,712
No, OK.

647
00:26:10,712 --> 00:26:11,893
It's slow.

648
00:26:11,893 --> 00:26:17,077
Whatever.

649
00:26:17,077 --> 00:26:21,019
OK, so once we change the portal to be a sphere

650
00:26:21,019 --> 00:26:23,601
above the translocator.

651
00:26:24,082 --> 00:26:27,323
then we had to solve the problems of the player pushing

652
00:26:27,323 --> 00:26:28,604
their head through that one.

653
00:26:28,604 --> 00:26:30,185
Because that was not a problem before, right?

654
00:26:30,185 --> 00:26:31,726
Because it was always at one meter's distance.

655
00:26:31,726 --> 00:26:33,027
You couldn't put your head through it.

656
00:26:33,027 --> 00:26:35,368
But once you have it as a sphere above the translocator,

657
00:26:35,368 --> 00:26:38,210
you have to solve that problem somehow.

658
00:26:38,210 --> 00:26:41,012
So what we did was when the player pushes their head

659
00:26:41,012 --> 00:26:43,353
towards the sphere around the translocator,

660
00:26:43,353 --> 00:26:46,695
we just shrink it down, and then it moves into the controller.

661
00:26:46,695 --> 00:26:50,197
So we had some debating whether or not

662
00:26:50,197 --> 00:26:52,158
you should be able to translocate

663
00:26:52,158 --> 00:26:53,559
by putting it above your head.

664
00:26:53,915 --> 00:26:55,817
But it's kind of hard to, because you

665
00:26:55,817 --> 00:26:58,519
want to be able to look through the portal

666
00:26:58,519 --> 00:27:00,101
without moving to the new location.

667
00:27:00,101 --> 00:27:01,362
So we decided that you can't do that.

668
00:27:01,362 --> 00:27:02,943
You have to press the buttons to teleport.

669
00:27:02,943 --> 00:27:08,327
We also wanted to keep the 2D effects we had.

670
00:27:08,327 --> 00:27:11,390
We had these, it was 3D geometry,

671
00:27:11,390 --> 00:27:13,732
but we wanted to have all the nice borders and all

672
00:27:13,732 --> 00:27:15,053
the nice glow effects.

673
00:27:15,053 --> 00:27:17,055
But if it's a sphere, it was difficult to control

674
00:27:17,055 --> 00:27:19,197
all of those in a nice way.

675
00:27:19,197 --> 00:27:22,079
So what we ended up doing was to fake a sphere.

676
00:27:23,537 --> 00:27:26,881
So this is a 2D example of the same case.

677
00:27:26,881 --> 00:27:31,325
So what we ended up doing was to move a disk to a location

678
00:27:31,325 --> 00:27:33,988
inside a sphere to make it look like a sphere

679
00:27:33,988 --> 00:27:35,790
from whatever perspective you were looking at it from.

680
00:27:35,790 --> 00:27:38,372
And this is done on the GPU, so it's done per eye.

681
00:27:38,372 --> 00:27:43,257
And the effect is actually super convincing in VR.

682
00:27:43,257 --> 00:27:44,839
And here's the code in case you want it.

683
00:27:45,738 --> 00:27:48,799
So you can really easily fake spheres this way.

684
00:27:48,799 --> 00:27:53,381
And it's really fascinating, because when I tried this in VR,

685
00:27:53,381 --> 00:27:56,342
I was like, holy shit, this really does look like a sphere.

686
00:27:56,342 --> 00:27:58,703
And it's really bizarre, even though it's just

687
00:27:58,703 --> 00:28:00,483
like a disk that's repositioned.

688
00:28:00,483 --> 00:28:04,945
So this way, we could just keep all of our nice 2D effects.

689
00:28:04,945 --> 00:28:09,306
And yeah, we had a lot of control

690
00:28:09,306 --> 00:28:11,827
in how we could make the portal look and feel.

691
00:28:11,827 --> 00:28:13,187
And that's it for my talk.

692
00:28:13,187 --> 00:28:14,708
So thank you very much for joining.

