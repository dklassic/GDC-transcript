1
00:00:06,056 --> 00:00:09,138
Hello? All right, cool. I'm on.

2
00:00:09,138 --> 00:00:10,859
Hey, everyone.

3
00:00:10,859 --> 00:00:14,322
I hope you're having a good morning, bright and early here.

4
00:00:14,322 --> 00:00:17,584
This is early for me.

5
00:00:17,584 --> 00:00:21,247
I'm here today to talk about real-time cloth solutions

6
00:00:21,247 --> 00:00:24,869
on Marvel's Spider-Man.

7
00:00:24,869 --> 00:00:28,512
My name is Sophie Brennan. I'm a character TD.

8
00:00:28,512 --> 00:00:31,554
I work at Insomniac Games.

9
00:00:31,554 --> 00:00:32,215
We are...

10
00:00:33,180 --> 00:00:36,043
celebrating our 25th year anniversary this year.

11
00:00:36,043 --> 00:00:38,605
That's a long time for a game studio to be around.

12
00:00:38,605 --> 00:00:41,988
I just want to acknowledge that apparently we're doing all right.

13
00:00:41,988 --> 00:00:43,089
We're doing good.

14
00:00:43,089 --> 00:00:45,431
And here's to many more.

15
00:00:47,419 --> 00:00:49,020
So a little bit about me.

16
00:00:49,020 --> 00:00:51,883
I am a character TD, as I said, or rigger,

17
00:00:51,883 --> 00:00:55,146
or technical animator, or whatever you wanna call me.

18
00:00:55,146 --> 00:00:58,169
I have around seven years experience.

19
00:00:58,169 --> 00:01:01,271
Obviously, I just shipped Spider-Man.

20
00:01:01,271 --> 00:01:03,734
Before that, I worked on Lone Echo,

21
00:01:03,734 --> 00:01:07,477
which was a game for the Oculus VR game.

22
00:01:07,477 --> 00:01:10,360
And then before that, the Order 1886 for PS4.

23
00:01:12,910 --> 00:01:16,331
Firstly, I just want to say thank you to our entire team at Insomniac.

24
00:01:16,331 --> 00:01:19,171
Obviously, this project wouldn't be possible without them.

25
00:01:19,171 --> 00:01:24,813
At Insomniac, we try to stay, like, really humble and acknowledge each other as frequently

26
00:01:24,813 --> 00:01:25,073
as we can.

27
00:01:25,073 --> 00:01:31,615
I like to carry this through and say, you know, while I'm doing a talk today, like,

28
00:01:31,615 --> 00:01:36,316
everyone's involvement in this is super important, and I just want to say thank you, because

29
00:01:36,316 --> 00:01:37,216
they're an awesome team.

30
00:01:38,881 --> 00:01:42,162
So without further ado, let's talk a little bit about Spider-Man.

31
00:01:42,162 --> 00:01:45,684
And firstly, I have a little cloth reel prepared to show you

32
00:01:45,684 --> 00:01:51,267
kind of how many various solutions and where the cloth was in our game.

33
00:01:51,267 --> 00:01:53,328
So here's a little taste of that.

34
00:02:35,258 --> 00:02:55,472
Thanks for watching my Dnew video & don't forget to Like & Subscribe, it means a lot to me!

35
00:03:36,068 --> 00:03:38,871
Cool, so now you guys got a little idea about what we did.

36
00:03:38,871 --> 00:03:42,034
Let's begin at the start.

37
00:03:42,034 --> 00:03:45,458
So what kind of existing cloth techniques

38
00:03:45,458 --> 00:03:46,639
can already exist out there?

39
00:03:48,373 --> 00:03:51,814
So, first of all, we have skinning to existing joints.

40
00:03:51,814 --> 00:03:54,795
The advantages of this, you know,

41
00:03:54,795 --> 00:03:56,476
cheapest method, it's easy to maintain,

42
00:03:56,476 --> 00:03:58,236
all the stuff's already there, right?

43
00:03:58,236 --> 00:04:01,377
Depending on where the cloth is, though,

44
00:04:01,377 --> 00:04:05,138
it can look bad, it's unrealistic,

45
00:04:05,138 --> 00:04:08,039
complex articulated areas suffer.

46
00:04:08,039 --> 00:04:13,420
If you have a sleeve that's modeled hanging down

47
00:04:13,420 --> 00:04:14,421
when you twist your arm,

48
00:04:14,421 --> 00:04:15,881
the pose doesn't adhere to gravity.

49
00:04:15,881 --> 00:04:17,702
I'm sure you've seen that in many games before.

50
00:04:21,327 --> 00:04:23,328
We also have animated cloth joints.

51
00:04:23,328 --> 00:04:26,009
I hope you guys enjoy the picture on the right here.

52
00:04:26,009 --> 00:04:29,490
We actually don't have any key framed cloth in the game.

53
00:04:29,490 --> 00:04:31,950
So I just let you run wild with your imagination

54
00:04:31,950 --> 00:04:35,612
and say, imagine animating all these controls.

55
00:04:35,612 --> 00:04:38,793
So the pros of this is that it can look awesome

56
00:04:38,793 --> 00:04:41,173
depending on how talented your animation team is.

57
00:04:41,833 --> 00:04:44,415
But there's a ton of disadvantages, which is it's

58
00:04:44,415 --> 00:04:46,195
super time consuming to do.

59
00:04:46,195 --> 00:04:50,097
It's really difficult to animate cloth convincingly and

60
00:04:50,097 --> 00:04:51,498
hard to make it look realistic.

61
00:04:51,498 --> 00:04:55,800
There's also bait simulated cloth joints.

62
00:04:55,800 --> 00:05:01,542
The advantages of this is that it's accurate and realistic,

63
00:05:01,542 --> 00:05:02,683
depending on how your setup is.

64
00:05:02,683 --> 00:05:04,484
Disadvantages are.

65
00:05:05,658 --> 00:05:08,020
that it's time-consuming as well.

66
00:05:08,020 --> 00:05:10,943
It's hard to maintain, especially in a game dev environment

67
00:05:10,943 --> 00:05:13,406
where we're always iterating.

68
00:05:13,406 --> 00:05:16,129
If we change the scene, we'll need another pass.

69
00:05:16,129 --> 00:05:18,892
It needs to be re-baked and re-simmed and baked down.

70
00:05:18,892 --> 00:05:21,995
And then the output is the curves

71
00:05:21,995 --> 00:05:23,877
that are really nasty for animators

72
00:05:23,877 --> 00:05:25,639
if they actually want to edit that stuff.

73
00:05:27,497 --> 00:05:31,559
So then we have real-time cloth, which the advantages are

74
00:05:31,559 --> 00:05:34,720
it's super flexible and reacts well to change

75
00:05:34,720 --> 00:05:39,061
because it's already been calculated at real time.

76
00:05:39,061 --> 00:05:43,283
But also it responds dynamically to player movement.

77
00:05:43,283 --> 00:05:44,943
So if a player is controlling a character,

78
00:05:44,943 --> 00:05:46,944
which is what we had in our game,

79
00:05:46,944 --> 00:05:48,564
and they flick the stick around,

80
00:05:48,564 --> 00:05:51,525
there should be follow-through and overlapping action

81
00:05:51,525 --> 00:05:54,847
that normal baked simulation couldn't give us.

82
00:05:55,965 --> 00:05:59,986
The disadvantages are is that because we're running at real time,

83
00:05:59,986 --> 00:06:01,406
the cloth quality can be quite low,

84
00:06:01,406 --> 00:06:04,447
and detailed cloth is really out of scope for us.

85
00:06:04,447 --> 00:06:09,688
It's also an extra expense in engine versus just running an animation,

86
00:06:09,688 --> 00:06:15,549
and this one can be specific to whatever kind of cloth solution you're using,

87
00:06:15,549 --> 00:06:17,469
but most lack self-collision.

88
00:06:17,469 --> 00:06:22,130
So if you have layers of cloth, they won't react with each other.

89
00:06:22,130 --> 00:06:24,031
So why did we decide to choose real-time

90
00:06:24,031 --> 00:06:25,171
over all the other options out there?

91
00:06:25,831 --> 00:06:29,873
And so one of the internal pillars for Spider-Man

92
00:06:29,873 --> 00:06:31,674
was to create a believable world.

93
00:06:31,674 --> 00:06:36,437
And with that, realistic cloth fit in there, right?

94
00:06:36,437 --> 00:06:40,139
To make a world that felt believable,

95
00:06:40,139 --> 00:06:43,742
it had to look believable as well and look real.

96
00:06:43,742 --> 00:06:45,483
On previous projects as well,

97
00:06:45,483 --> 00:06:47,904
we'd fallen down a rabbit hole, the simulation,

98
00:06:47,904 --> 00:06:50,626
and it was really, really time-consuming,

99
00:06:50,626 --> 00:06:52,207
especially for our team.

100
00:06:52,207 --> 00:06:53,567
And in a project this size,

101
00:06:53,567 --> 00:06:54,848
it just, it really wasn't...

102
00:06:55,750 --> 00:07:03,295
feasible for us to spend this amount of time simming things.

103
00:07:03,295 --> 00:07:05,096
And also, animator's time is valuable too.

104
00:07:05,096 --> 00:07:07,358
We didn't want to take up animator time

105
00:07:07,358 --> 00:07:08,639
on animating cloth.

106
00:07:08,639 --> 00:07:12,461
And if you know any animators, they probably hate it anyways.

107
00:07:12,461 --> 00:07:16,224
And most importantly, as I mentioned earlier,

108
00:07:16,224 --> 00:07:18,365
it responded to player control, which

109
00:07:18,365 --> 00:07:22,788
was a benefit that none of the other methods had.

110
00:07:22,788 --> 00:07:22,908
So.

111
00:07:25,619 --> 00:07:30,246
A big component of real-time cloth are the tools used to achieve it.

112
00:07:30,246 --> 00:07:35,373
So we had two choices, which were develop your own proprietary tech,

113
00:07:35,373 --> 00:07:41,081
or use an existing third-party middleware.

114
00:07:42,221 --> 00:07:45,043
Developing your own tech has pros and cons, right?

115
00:07:45,043 --> 00:07:48,886
Pros are you have complete control over what features you want

116
00:07:48,886 --> 00:07:49,887
and need to focus on.

117
00:07:49,887 --> 00:07:52,970
You can design the workflow to match your needs.

118
00:07:52,970 --> 00:07:56,893
But the cons are it's a huge upfront cost.

119
00:07:56,893 --> 00:07:59,735
It will come online probably way later than you need it,

120
00:07:59,735 --> 00:08:02,378
which is usually immediately.

121
00:08:02,378 --> 00:08:03,659
And it will require maintenance,

122
00:08:03,659 --> 00:08:05,580
and you'll have no external support.

123
00:08:06,696 --> 00:08:08,558
For us, this was just not simply in our budget,

124
00:08:08,558 --> 00:08:11,081
but the results that we wanted to achieve.

125
00:08:11,081 --> 00:08:12,522
So we decided to go third party.

126
00:08:12,522 --> 00:08:15,325
And the choices out there are fairly limited,

127
00:08:15,325 --> 00:08:17,247
but we already had used Havoc in-house

128
00:08:17,247 --> 00:08:20,051
for our soft and rigid body physics,

129
00:08:20,051 --> 00:08:23,454
and we'd used the cloth technology in Sunset.

130
00:08:23,454 --> 00:08:25,437
So it was a pretty easy step for us

131
00:08:25,437 --> 00:08:27,539
to just continue on with Havoc.

132
00:08:29,086 --> 00:08:33,089
So while I want to cover some more general topics in this talk,

133
00:08:33,089 --> 00:08:34,389
it's really important to give you context

134
00:08:34,389 --> 00:08:37,191
around the tools that we're using.

135
00:08:37,191 --> 00:08:40,253
So for that reason, I'm going to give you a little intro into Havoc itself.

136
00:08:40,253 --> 00:08:44,336
So Havoc is essentially kind of plug-and-play

137
00:08:44,336 --> 00:08:48,159
in that it supports a 3D program

138
00:08:48,159 --> 00:08:52,361
like Max or Maya with a plug-in that you install.

139
00:08:52,361 --> 00:08:56,724
And then also it has its API, which will plug into your engine.

140
00:08:56,724 --> 00:08:57,044
And...

141
00:08:58,917 --> 00:09:02,740
So from there, you will be in Maya or Max,

142
00:09:02,740 --> 00:09:05,382
and you'll generate your some mesh,

143
00:09:05,382 --> 00:09:08,605
and it will either output that into a file,

144
00:09:08,605 --> 00:09:10,866
or there's a non-modal way as well.

145
00:09:10,866 --> 00:09:13,549
So modal is when all the data is contained

146
00:09:13,549 --> 00:09:15,570
within the program itself,

147
00:09:15,570 --> 00:09:19,413
and non-modal is when it spits it out to external files

148
00:09:19,413 --> 00:09:22,556
and uses its own executables to manage that.

149
00:09:22,556 --> 00:09:24,657
But either way, it takes the content

150
00:09:24,657 --> 00:09:26,999
that you generate in the 3D package,

151
00:09:27,480 --> 00:09:30,102
puts it into the filter manager, Havoc's filter manager,

152
00:09:30,102 --> 00:09:33,845
which is basically where they handle all of the systems

153
00:09:33,845 --> 00:09:36,868
across all their physics components.

154
00:09:36,868 --> 00:09:41,813
It basically runs a series of filters and operations on it

155
00:09:41,813 --> 00:09:44,835
to send the cloth, prepare the data,

156
00:09:44,835 --> 00:09:47,377
and send the data to the cloth setup tool,

157
00:09:47,377 --> 00:09:49,139
otherwise known as the CST.

158
00:09:49,199 --> 00:09:52,300
The CST is basically where you set up all the behaviors

159
00:09:52,300 --> 00:09:52,940
for your cloth.

160
00:09:52,940 --> 00:09:58,082
So this is where you set up gravity, dampening, the radius,

161
00:09:58,082 --> 00:10:01,663
the sign collision, capsules, all that.

162
00:10:01,663 --> 00:10:03,763
And then it outputs that to a data file, a .hkt,

163
00:10:03,763 --> 00:10:06,324
which is read by the cloth API in the engine.

164
00:10:06,324 --> 00:10:10,365
So here's a little visual just of what the actual tool

165
00:10:10,365 --> 00:10:11,066
pipeline looks.

166
00:10:11,066 --> 00:10:12,466
We use Maya specifically.

167
00:10:12,466 --> 00:10:14,027
So I'm sorry if you're a Mac user.

168
00:10:14,027 --> 00:10:16,007
I won't be covering the pipeline for that.

169
00:10:17,310 --> 00:10:20,075
We take it from Maya into the filter manager,

170
00:10:20,075 --> 00:10:22,079
so you can see the purple box down there

171
00:10:22,079 --> 00:10:23,763
is the filter manager, and then from there

172
00:10:23,763 --> 00:10:25,466
that launches the cloth setup tool,

173
00:10:25,466 --> 00:10:28,272
where we can iterate on our cloth setup.

174
00:10:29,658 --> 00:10:31,821
And let's talk a little bit about vertex versus bone cloth.

175
00:10:31,821 --> 00:10:33,943
And what does that mean?

176
00:10:33,943 --> 00:10:34,604
Havoc supports both.

177
00:10:34,604 --> 00:10:39,070
Vertex cloth is when your sim mesh is your render mesh,

178
00:10:39,070 --> 00:10:40,932
so it's basically a direct connection.

179
00:10:40,932 --> 00:10:44,317
This means you have to have the correct materials

180
00:10:44,317 --> 00:10:45,438
applied to the sim mesh.

181
00:10:45,438 --> 00:10:46,960
It also means that it isn't possible

182
00:10:46,960 --> 00:10:48,542
for it to do double-sided cloth.

183
00:10:49,148 --> 00:10:52,289
And the resolution of the mesh has to be fairly low

184
00:10:52,289 --> 00:10:53,830
to run well in Engine.

185
00:10:53,830 --> 00:10:56,451
It also means that any content changes to this cloth

186
00:10:56,451 --> 00:10:59,491
might change the behavior of the cloth itself as well.

187
00:10:59,491 --> 00:11:02,652
And irregular shapes aren't great for simming.

188
00:11:02,652 --> 00:11:06,974
Havoc prefers quads, and therefore,

189
00:11:06,974 --> 00:11:09,654
you have to make sure you give it a quadded mesh.

190
00:11:09,654 --> 00:11:15,496
There's also bone cloth, which is what we used.

191
00:11:15,496 --> 00:11:17,156
And this is different in that.

192
00:11:18,046 --> 00:11:23,229
the sim mesh will drive a bunch of joints

193
00:11:23,229 --> 00:11:24,229
on the surface of it,

194
00:11:24,229 --> 00:11:26,530
which you can in turn use to drive your render mesh.

195
00:11:26,530 --> 00:11:27,731
And this allows for the possibility

196
00:11:27,731 --> 00:11:29,192
of additional animation as well

197
00:11:29,192 --> 00:11:31,873
because you're using joints.

198
00:11:31,873 --> 00:11:34,915
For us, that gave us the ability to turn off the cloth

199
00:11:34,915 --> 00:11:36,075
and override it if necessary.

200
00:11:36,075 --> 00:11:37,376
However, as you can see,

201
00:11:37,376 --> 00:11:39,837
there's a lot more intermediate steps

202
00:11:39,837 --> 00:11:42,358
and it complicates the process.

203
00:11:42,358 --> 00:11:44,880
So there's a lot more layers of content to debug

204
00:11:44,880 --> 00:11:45,740
when things go wrong.

205
00:11:47,255 --> 00:11:49,996
So here's the content authoring tools in Maya.

206
00:11:49,996 --> 00:11:52,356
There's a mesh properties toolbox,

207
00:11:52,356 --> 00:11:55,617
which allows us to assign vertex selection sets.

208
00:11:55,617 --> 00:12:01,518
And this is where we would set which vertices are simming

209
00:12:01,518 --> 00:12:03,239
versus which ones are pinned,

210
00:12:03,239 --> 00:12:07,159
and also allows us to create little selection sets

211
00:12:07,159 --> 00:12:08,480
for optimization purposes.

212
00:12:08,480 --> 00:12:10,320
For example, if you only want an operation

213
00:12:10,320 --> 00:12:12,861
to run on a smaller subset of vertices

214
00:12:12,861 --> 00:12:14,301
instead of the whole mesh.

215
00:12:17,495 --> 00:12:20,296
There's also the mesh properties toolbox

216
00:12:20,296 --> 00:12:22,257
for painting vertex properties.

217
00:12:22,257 --> 00:12:24,619
So here you'll see I'm painting properties on the mesh.

218
00:12:24,619 --> 00:12:26,039
This is a distance.

219
00:12:26,039 --> 00:12:29,181
It's just like a paint weighting interface.

220
00:12:29,181 --> 00:12:34,804
And this can control many things like distance, mass,

221
00:12:34,804 --> 00:12:36,885
minimum normals, particle radius,

222
00:12:36,885 --> 00:12:41,368
basically anything that's exposed in the Havoc cloth tool,

223
00:12:41,368 --> 00:12:45,450
you can probably paint custom various information for.

224
00:12:46,686 --> 00:12:52,649
And you can see here I'm painting on the mesh.

225
00:12:52,649 --> 00:12:56,252
And you can also set minimax limits on the property.

226
00:12:56,252 --> 00:12:59,493
So you'll see me toggling the overall distance

227
00:12:59,493 --> 00:13:05,117
to change the limit of the properties themselves.

228
00:13:05,117 --> 00:13:06,498
There's also collisions.

229
00:13:06,498 --> 00:13:09,139
So you need to get your cough to collide with your mesh.

230
00:13:09,139 --> 00:13:10,960
You need to assign and create colliders.

231
00:13:13,523 --> 00:13:17,646
You can do this with the Havoc bone collider toolbox.

232
00:13:17,646 --> 00:13:18,746
And basically you just select a joint,

233
00:13:18,746 --> 00:13:20,607
assign a collider to it,

234
00:13:20,607 --> 00:13:22,909
and mess with the properties on it.

235
00:13:22,909 --> 00:13:26,351
The properties are radius, height, and taper.

236
00:13:26,351 --> 00:13:28,252
And you can also, through this interface,

237
00:13:28,252 --> 00:13:29,993
add your own custom collision shapes.

238
00:13:29,993 --> 00:13:32,394
And there's a variety of methods that Havoc uses

239
00:13:32,394 --> 00:13:34,015
to get that into the engine.

240
00:13:36,073 --> 00:13:40,617
And finally here, I think this is our cloth CST tool.

241
00:13:40,617 --> 00:13:47,804
There's no native API inside the Havoc to let you alter

242
00:13:47,804 --> 00:13:48,885
the properties live.

243
00:13:48,885 --> 00:13:52,888
So all the cloth data is authored and loaded in a game.

244
00:13:53,569 --> 00:13:55,551
And the CST is where the magic happens.

245
00:13:55,551 --> 00:13:59,515
So it contains ways to create and assign some meshes,

246
00:13:59,515 --> 00:14:03,079
apply properties, constraints, colliders.

247
00:14:03,079 --> 00:14:05,001
They can get pretty in-depth, but for the sake of brevity,

248
00:14:05,001 --> 00:14:06,903
know that almost all the settings related

249
00:14:06,903 --> 00:14:08,164
to general behavior are set here,

250
00:14:08,164 --> 00:14:09,766
where the specifics of those behaviors

251
00:14:09,766 --> 00:14:12,368
are added in the content creation part of the process,

252
00:14:12,368 --> 00:14:13,890
or in our case, Maya.

253
00:14:13,890 --> 00:14:17,353
Oops.

254
00:14:19,744 --> 00:14:21,164
Oops, sorry, I forgot about this.

255
00:14:21,164 --> 00:14:22,404
Obviously, when you get it into the engine,

256
00:14:22,404 --> 00:14:24,284
you want to debug it, right?

257
00:14:24,284 --> 00:14:26,965
So Havoc has an in-built debugger.

258
00:14:26,965 --> 00:14:30,105
It draws the Havoc sim mesh and colliders.

259
00:14:30,105 --> 00:14:32,486
It lets you filter specific elements,

260
00:14:32,486 --> 00:14:35,206
and it also provides performance information,

261
00:14:35,206 --> 00:14:37,827
as you can see there.

262
00:14:37,827 --> 00:14:41,508
So let's talk a little bit about some of the initial tests

263
00:14:41,508 --> 00:14:43,388
that we ran on cloth.

264
00:14:43,388 --> 00:14:45,768
So we first started with our inner daemons.

265
00:14:46,638 --> 00:14:47,598
and our thugs.

266
00:14:47,598 --> 00:14:50,540
They both have very distinctive behavior

267
00:14:50,540 --> 00:14:52,341
but in very different clothing.

268
00:14:52,341 --> 00:14:55,162
So for the thugs, they needed baggy loose pants

269
00:14:55,162 --> 00:15:00,084
and for the inner demons, smart suit jackets that held form.

270
00:15:00,084 --> 00:15:02,926
So here's some initial tests.

271
00:15:02,926 --> 00:15:06,807
We used them to test our animated normal maps

272
00:15:06,807 --> 00:15:08,328
and how they would work on the cloth as well.

273
00:15:08,328 --> 00:15:12,370
And also to see how many enemies we could draw

274
00:15:12,370 --> 00:15:13,611
on screen at once with cloth.

275
00:15:13,611 --> 00:15:15,212
And the answer is apparently a lot.

276
00:15:17,634 --> 00:15:19,614
Through this, we wrote up some internal documentation

277
00:15:19,614 --> 00:15:20,175
in the process.

278
00:15:20,175 --> 00:15:23,856
However, the workflow was pretty complicated

279
00:15:23,856 --> 00:15:25,497
with many points of potential error.

280
00:15:25,497 --> 00:15:28,298
And this would continue to cause us a lot of problems

281
00:15:28,298 --> 00:15:30,118
and headaches down the line.

282
00:15:30,687 --> 00:15:32,787
So this is where I jumped in.

283
00:15:32,787 --> 00:15:35,849
This is all previous to when I joined Insomniac.

284
00:15:35,849 --> 00:15:38,089
So for clarity, before joining the company,

285
00:15:38,089 --> 00:15:39,690
I'd really, really touched cloth

286
00:15:39,690 --> 00:15:41,831
beyond the proprietary cloth set up

287
00:15:41,831 --> 00:15:44,932
at my previous company, Ready at Dawn.

288
00:15:44,932 --> 00:15:46,633
And even then, my exposure to it was minimal.

289
00:15:46,633 --> 00:15:48,133
So perhaps this was a bit of a bonus

290
00:15:48,133 --> 00:15:49,534
because I came in with fresh eyes.

291
00:15:49,534 --> 00:15:52,315
And my first test case was MJ.

292
00:15:52,315 --> 00:15:55,276
And MJ had a few things that made her a challenge,

293
00:15:55,276 --> 00:15:55,696
which were

294
00:15:56,216 --> 00:15:57,897
an extreme crouch pose.

295
00:15:57,897 --> 00:16:00,940
She had to be under one meter high for designer metrics,

296
00:16:00,940 --> 00:16:03,501
which I actually went into my backyard

297
00:16:03,501 --> 00:16:06,183
and tried to shoot reference of me crouching

298
00:16:06,183 --> 00:16:09,666
and run walking at the same time under one meter.

299
00:16:09,666 --> 00:16:12,908
And it just isn't really possible to be honest, but.

300
00:16:15,414 --> 00:16:16,434
It was really hard.

301
00:16:16,434 --> 00:16:19,395
So it was a very extreme pose.

302
00:16:19,395 --> 00:16:22,056
She also had two layers of clothing,

303
00:16:22,056 --> 00:16:25,557
which was her outer jacket and her inner jacket.

304
00:16:25,557 --> 00:16:28,137
She had a ponytail and a scarf.

305
00:16:28,137 --> 00:16:34,499
So she had a lot of layers on her.

306
00:16:34,499 --> 00:16:36,380
So I ran that first test through her.

307
00:16:36,380 --> 00:16:40,561
Apologies, I don't have any captures from that,

308
00:16:40,561 --> 00:16:42,241
probably for a reason.

309
00:16:43,439 --> 00:16:45,200
we just, quite quickly, I was able to identify

310
00:16:45,200 --> 00:16:47,462
that there was issues in the pipeline.

311
00:16:47,462 --> 00:16:50,705
So, authoring content took a really long time

312
00:16:50,705 --> 00:16:52,426
and exports were failing often

313
00:16:52,426 --> 00:16:53,347
and we didn't really know why.

314
00:16:53,347 --> 00:16:55,288
And you can see there in the picture,

315
00:16:55,288 --> 00:16:56,689
that's our infamous white cube

316
00:16:56,689 --> 00:16:58,571
that indicated everything went wrong

317
00:16:58,571 --> 00:17:03,494
and you're terrible and maybe you should cry a little bit.

318
00:17:03,494 --> 00:17:06,116
Also, iteration was really, really slow.

319
00:17:07,433 --> 00:17:13,375
So, and this was partially because there was a debugging disconnect, so we were unable

320
00:17:13,375 --> 00:17:17,776
to see our cloth draw on top of our assets directly in engine.

321
00:17:17,776 --> 00:17:21,938
And obviously this means that there's a lot of guesswork involved when it comes to finding

322
00:17:21,938 --> 00:17:24,078
out where your problems come from.

323
00:17:24,759 --> 00:17:29,662
Especially when you have layered elements on top of each other and multiple colliders.

324
00:17:29,662 --> 00:17:36,466
We lacked enough debug information to even, like, draw which elements were which.

325
00:17:36,466 --> 00:17:41,089
So without labeling, we were kind of in the dark as to where our issues were coming from.

326
00:17:41,089 --> 00:17:46,452
And yeah, that meant information was hard to parse, and without any filtering, we couldn't

327
00:17:46,452 --> 00:17:52,096
isolate bits of the setup, which is usually, you know, the best method of solving problems.

328
00:17:52,096 --> 00:17:52,316
So...

329
00:17:54,247 --> 00:17:56,389
I began to streamline the pipeline.

330
00:17:56,389 --> 00:17:58,591
So my first thing was I wanted to address anything

331
00:17:58,591 --> 00:17:59,752
that could be automated.

332
00:17:59,752 --> 00:18:02,135
There were a lot of different windows, as you saw.

333
00:18:02,135 --> 00:18:03,776
There was a lot of repetitive actions.

334
00:18:03,776 --> 00:18:05,018
I wanted to try and minimize that

335
00:18:05,018 --> 00:18:08,341
and make the process a lot more straightforward.

336
00:18:09,224 --> 00:18:14,009
So my first goal was to, when you're setting it up,

337
00:18:14,009 --> 00:18:15,751
obviously you get the content from Maya,

338
00:18:15,751 --> 00:18:17,513
you send it to the Havoc filter manager,

339
00:18:17,513 --> 00:18:19,535
where it does all the filtering stuff,

340
00:18:19,535 --> 00:18:20,536
and then that goes to the Cloth Setup tool.

341
00:18:20,536 --> 00:18:23,800
Now the filter manager, we were running

342
00:18:23,800 --> 00:18:25,742
some kind of specific stuff in there

343
00:18:25,742 --> 00:18:28,305
that I found we could really generalize

344
00:18:28,305 --> 00:18:30,647
and actually make a template from if we were smart enough.

345
00:18:31,248 --> 00:18:35,910
So this was a process that was stopping us

346
00:18:35,910 --> 00:18:38,251
because we were generating content,

347
00:18:38,251 --> 00:18:40,452
then jumping into this filter manager,

348
00:18:40,452 --> 00:18:42,853
and then setting up the filters,

349
00:18:42,853 --> 00:18:44,914
and then exporting it to the Cloth Setup tool,

350
00:18:44,914 --> 00:18:47,175
and then once again editing content.

351
00:18:47,175 --> 00:18:50,176
So the first thing I did was find a way

352
00:18:50,176 --> 00:18:53,157
to genericize the template enough that

353
00:18:54,138 --> 00:18:57,663
Boom, I could remove that filter manager,

354
00:18:57,663 --> 00:19:01,129
and we could take our content straight from Maya

355
00:19:01,129 --> 00:19:03,893
into the cloth setup tool.

356
00:19:03,893 --> 00:19:05,475
I also developed a UI.

357
00:19:05,475 --> 00:19:08,760
It's not a very fancy UI, but it did its job.

358
00:19:09,688 --> 00:19:13,832
which was I had it house all the tools that Havoc gave us.

359
00:19:13,832 --> 00:19:15,934
So they were easily accessible.

360
00:19:15,934 --> 00:19:18,917
So you can see there we have the mesh channels toolbox

361
00:19:18,917 --> 00:19:20,859
and the cloth collision toolbox we went over earlier.

362
00:19:20,859 --> 00:19:23,781
You could also launch the cloth set up tool,

363
00:19:23,781 --> 00:19:26,063
the Havoc visual debugger and filter manager

364
00:19:26,063 --> 00:19:26,804
all from within this tool.

365
00:19:26,804 --> 00:19:30,247
And you could, that nice big green button

366
00:19:30,247 --> 00:19:31,748
is when the one you wanted to press

367
00:19:31,748 --> 00:19:35,492
when you wanted to export or update your file.

368
00:19:35,492 --> 00:19:36,453
And on the left here,

369
00:19:37,580 --> 00:19:40,401
To get the joints into Havoc the way we wanted to,

370
00:19:40,401 --> 00:19:41,462
we had to create selection sets.

371
00:19:41,462 --> 00:19:46,164
And these selection sets were necessary

372
00:19:46,164 --> 00:19:50,787
because the other methods that the filter manager had

373
00:19:50,787 --> 00:19:51,887
weren't always great at capturing

374
00:19:51,887 --> 00:19:53,128
the exact joints we needed.

375
00:19:53,128 --> 00:19:57,390
So we would pass them in with a selection set that

376
00:19:57,390 --> 00:19:59,772
was selected on export.

377
00:20:00,772 --> 00:20:03,714
We also had our filter export nodes.

378
00:20:03,714 --> 00:20:05,855
So Havoc has a habit of, when you go to export,

379
00:20:05,855 --> 00:20:10,998
basically going through every single node in the scene.

380
00:20:10,998 --> 00:20:15,381
And that's a big problem when you have big scenes

381
00:20:15,381 --> 00:20:17,662
with lots of blend shapes and lots of mesh

382
00:20:17,662 --> 00:20:19,083
and lots of proxy mesh.

383
00:20:19,083 --> 00:20:23,606
And it would basically make our export times

384
00:20:23,986 --> 00:20:24,367
It's huge.

385
00:20:24,367 --> 00:20:26,972
So the first thing I could do here was make sure

386
00:20:26,972 --> 00:20:30,619
that it was only exporting what it needed.

387
00:20:30,619 --> 00:20:33,485
So we just created a filter set for that.

388
00:20:33,485 --> 00:20:35,529
Unfortunately, Havoc doesn't have a.

389
00:20:36,505 --> 00:20:41,169
support for doing two selection sets upon export,

390
00:20:41,169 --> 00:20:42,931
so I had to find another way to pass information.

391
00:20:42,931 --> 00:20:45,774
And apparently, the best thing I could come to

392
00:20:45,774 --> 00:20:48,737
was a visibility toggle, which if any of you

393
00:20:48,737 --> 00:20:50,358
use Maya in any kind of frequent basis,

394
00:20:50,358 --> 00:20:52,360
you'll know that there's about 5,000 ways

395
00:20:52,360 --> 00:20:54,682
to hide and unhide nodes in the scene.

396
00:20:55,550 --> 00:20:57,951
So I had to write this very brute force method

397
00:20:57,951 --> 00:20:59,732
that went through every node in the scene,

398
00:20:59,732 --> 00:21:02,393
captured every possibility of its visibility state,

399
00:21:02,393 --> 00:21:07,055
saved that, then hid it, the ones that weren't in the list,

400
00:21:07,055 --> 00:21:11,096
and then exported, and then restored the state of them.

401
00:21:11,096 --> 00:21:14,738
But it was kind of brute force,

402
00:21:14,738 --> 00:21:17,379
but the benefit of that was it cut down

403
00:21:17,379 --> 00:21:18,939
our export times dramatically,

404
00:21:18,939 --> 00:21:21,821
because no longer were we parsing the, you know,

405
00:21:21,821 --> 00:21:24,282
50, 60, 70 blend shapes in the file.

406
00:21:27,452 --> 00:21:29,936
So another one of our big challenges

407
00:21:29,936 --> 00:21:32,520
was to get the cloth on our playable characters.

408
00:21:32,520 --> 00:21:34,823
And since this was all dynamic, we

409
00:21:34,823 --> 00:21:37,047
needed to test the cloth while moving the player to be

410
00:21:37,047 --> 00:21:38,750
able to test the motion on it.

411
00:21:39,526 --> 00:21:41,247
Since the content had to be authored before export,

412
00:21:41,247 --> 00:21:44,468
we needed the iteration time to be as small as possible.

413
00:21:44,468 --> 00:21:47,869
So changing one small value caused an asset rebuild.

414
00:21:47,869 --> 00:21:51,070
And if that meant reloading the game or reloading the level

415
00:21:51,070 --> 00:21:53,510
every time, it was going to be really hard to create quality

416
00:21:53,510 --> 00:21:55,731
assets within a reasonable time frame.

417
00:21:55,731 --> 00:21:57,351
So we needed the updates to be live.

418
00:21:58,505 --> 00:22:00,707
So we worked with our core department, our engine

419
00:22:00,707 --> 00:22:02,709
department, to make sure we could do this at runtime

420
00:22:02,709 --> 00:22:03,991
without massive reloads.

421
00:22:03,991 --> 00:22:07,114
And this video shows me changing the particle radius.

422
00:22:07,114 --> 00:22:08,856
See, I'm exporting it there, and now I'm

423
00:22:08,856 --> 00:22:12,080
waiting for it to come into game.

424
00:22:12,080 --> 00:22:12,600
Wait a second.

425
00:22:12,600 --> 00:22:14,603
It's rebuilding the asset.

426
00:22:17,159 --> 00:22:17,880
Boom.

427
00:22:17,880 --> 00:22:20,682
So that was a wee bit of a wait, but that is nothing

428
00:22:20,682 --> 00:22:22,143
compared to reloading the game.

429
00:22:22,143 --> 00:22:23,824
And that was amazing for us.

430
00:22:23,824 --> 00:22:27,086
Our core team worked tirelessly to give us that feature,

431
00:22:27,086 --> 00:22:30,249
because that meant that instead of reloading the game every time

432
00:22:30,249 --> 00:22:32,650
we wanted to see a change, we'd just press a button,

433
00:22:32,650 --> 00:22:35,332
and it would rebuild the asset and load it in.

434
00:22:35,332 --> 00:22:40,996
So now that we've made improvements to our pipeline,

435
00:22:40,996 --> 00:22:43,738
let's talk through some specific cloth examples we had.

436
00:22:43,738 --> 00:22:45,019
Oops.

437
00:22:45,789 --> 00:22:49,372
Our first example was our full body lab coats.

438
00:22:49,372 --> 00:22:54,357
So we knew we were going to need these early on.

439
00:22:54,357 --> 00:22:59,322
There was a pivotal scene early in the game where Peter and

440
00:22:59,322 --> 00:23:02,365
Otto finally develop a working prototype for their

441
00:23:02,365 --> 00:23:03,526
prosthetics research.

442
00:23:03,526 --> 00:23:06,629
And we needed to showcase what we could do with the system,

443
00:23:06,629 --> 00:23:08,150
so we knew the quality bar was high.

444
00:23:10,081 --> 00:23:13,504
You also meet Otto at the beginning of the game,

445
00:23:13,504 --> 00:23:15,445
and I knew Peter was going to be playable in his lab coat,

446
00:23:15,445 --> 00:23:17,867
so we had the challenge of creating real-time cloth

447
00:23:17,867 --> 00:23:20,730
for both cinematics and gameplay in this scenario.

448
00:23:20,730 --> 00:23:23,012
So to reduce the complexity, I wanted to be able to share

449
00:23:23,012 --> 00:23:25,514
the setup between both gameplay and cinematics.

450
00:23:25,514 --> 00:23:28,576
In hindsight, while this was easier for us in implementation,

451
00:23:28,576 --> 00:23:29,757
it made for quite the challenge,

452
00:23:29,757 --> 00:23:31,458
because the needs of each setup

453
00:23:31,458 --> 00:23:32,920
could be dramatically different.

454
00:23:34,585 --> 00:23:38,328
So the first thing we did was we bought a lab coat online.

455
00:23:38,328 --> 00:23:42,252
We looked at both official lab coats and costumes,

456
00:23:42,252 --> 00:23:44,614
and we ended up with this, which was the closest we

457
00:23:44,614 --> 00:23:46,336
could get to our concept art.

458
00:23:46,336 --> 00:23:48,478
And then we did a bunch of stuff,

459
00:23:48,478 --> 00:23:52,422
like running around in it and doing some arm poses

460
00:23:52,422 --> 00:23:53,763
and whatnot.

461
00:23:54,424 --> 00:24:00,911
We recorded some general movement and you can see here our fellow TD, Bell, modelling

462
00:24:00,911 --> 00:24:06,938
it for me because one, the coats were looking like I was wearing some sort of bin bag and

463
00:24:06,938 --> 00:24:09,801
I was nowhere near as buff as Peter.

464
00:24:11,748 --> 00:24:13,029
But this gave us a good starting point,

465
00:24:13,029 --> 00:24:16,492
although we ended up going for a kind of heavier cloth.

466
00:24:16,492 --> 00:24:19,894
And we also spot specific shot references.

467
00:24:19,894 --> 00:24:22,677
So we knew what poses we were going to hit from our mocap,

468
00:24:22,677 --> 00:24:24,918
and we knew we had a couple trickier ones

469
00:24:24,918 --> 00:24:27,240
that might be difficult to hit the cloth alone.

470
00:24:27,240 --> 00:24:29,182
So we took some specific shots for that.

471
00:24:29,182 --> 00:24:31,764
So here's an example of one versus in the game,

472
00:24:31,764 --> 00:24:34,646
and from the other side as well.

473
00:24:36,100 --> 00:24:39,662
So here's some early screenshots of our first tests.

474
00:24:39,662 --> 00:24:43,284
As you can see here, obviously needed some work,

475
00:24:43,284 --> 00:24:45,725
but we started our sim from the pectorals down

476
00:24:45,725 --> 00:24:47,987
and we simmed the sleeves as well.

477
00:24:47,987 --> 00:24:50,948
But we needed to do a ton of extra work

478
00:24:50,948 --> 00:24:53,109
to kind of hit the quality bar that we needed.

479
00:24:53,109 --> 00:24:56,971
So we dived into making some blend shapes for it.

480
00:24:56,971 --> 00:24:58,292
And as mentioned earlier,

481
00:24:58,292 --> 00:25:00,193
we wanted some very specific shapes,

482
00:25:00,193 --> 00:25:01,694
especially around the shoulders

483
00:25:01,694 --> 00:25:04,235
that weren't gonna be possible with the real-time sim.

484
00:25:04,815 --> 00:25:08,036
also because we weren't running on the shoulders themselves.

485
00:25:08,036 --> 00:25:10,457
So we developed two types of corrective shapes.

486
00:25:10,457 --> 00:25:13,999
We developed a generic system for bending the arms

487
00:25:13,999 --> 00:25:16,760
and reaching the arms up and forward.

488
00:25:16,760 --> 00:25:19,480
And we also developed very specific shapes

489
00:25:19,480 --> 00:25:22,722
that would come on in very specific poses

490
00:25:22,722 --> 00:25:24,402
in cinematics like this one.

491
00:25:27,212 --> 00:25:29,873
So here's a small example of what these blend shapes look

492
00:25:29,873 --> 00:25:32,174
like in action and where and how we use them.

493
00:25:32,174 --> 00:25:34,256
So you can see on the left we have our blend shapes, on the

494
00:25:34,256 --> 00:25:36,057
right we don't have our blend shapes.

495
00:25:36,057 --> 00:25:40,179
And that little debug UI there is probably hard to read for

496
00:25:40,179 --> 00:25:44,181
you, but the little orange and yellow entries are the blend

497
00:25:44,181 --> 00:25:46,583
shapes triggering on and off and animating on and off for

498
00:25:46,583 --> 00:25:51,986
each shot here.

499
00:25:58,797 --> 00:26:02,198
So for a finish and touch, we weren't really,

500
00:26:02,198 --> 00:26:03,579
we weren't able to get enough detail

501
00:26:03,579 --> 00:26:05,739
with just blend shapes or cloth.

502
00:26:05,739 --> 00:26:07,980
I mean, we'd already at this point doubled the resolution

503
00:26:07,980 --> 00:26:10,501
of our lab coats to get the silhouette

504
00:26:10,501 --> 00:26:13,842
on some specific shapes, but it still wasn't cutting it.

505
00:26:13,842 --> 00:26:18,443
So we made use of our animated normal wrinkle maps

506
00:26:18,443 --> 00:26:20,144
to get the detail we needed.

507
00:26:20,684 --> 00:26:24,705
So you can see in this video here in our tools,

508
00:26:24,705 --> 00:26:27,566
I'm animating that normal value up and down.

509
00:26:27,566 --> 00:26:29,107
And then in game on the right, you

510
00:26:29,107 --> 00:26:31,087
can see I have this custom attribute called

511
00:26:31,087 --> 00:26:35,049
IGAnimLabCodeCustom, where we stored that texture map.

512
00:26:35,049 --> 00:26:40,490
And actually, we assigned in the material at least one channel

513
00:26:40,490 --> 00:26:43,711
to cinematic textures, where we would swap them

514
00:26:43,711 --> 00:26:44,792
as we needed per shot.

515
00:26:48,912 --> 00:26:56,118
Finally, one final hack we had to do is our cloth didn't support collision with the environment itself.

516
00:26:56,118 --> 00:27:04,705
So many of our rigs would include a cloth collision plane, which was basically just a plane collider or some sort of ground plane,

517
00:27:04,705 --> 00:27:09,369
in the actual rig file itself that animators would animate.

518
00:27:09,369 --> 00:27:14,013
And our vanity system worked with cloth collisions, so we were able to toggle this on and off.

519
00:27:15,327 --> 00:27:16,147
So here you can see it.

520
00:27:16,147 --> 00:27:19,469
We generally turned it off for the sleeves

521
00:27:19,469 --> 00:27:22,271
because the sleeves slightly penetrating the table

522
00:27:22,271 --> 00:27:25,213
was better than them completely freaking out

523
00:27:25,213 --> 00:27:27,195
because they were pinned between two colliders.

524
00:27:27,195 --> 00:27:30,377
But we used that to shift the lab coats out of the way

525
00:27:30,377 --> 00:27:33,159
when they were bending over and whatnot.

526
00:27:33,159 --> 00:27:36,181
We used it in a bunch of places all across the game.

527
00:27:36,181 --> 00:27:37,142
There you can see it.

528
00:27:37,142 --> 00:27:38,403
Easy, easy, easy.

529
00:27:41,360 --> 00:27:46,345
So let's move on to our second example, which was suits.

530
00:27:46,345 --> 00:27:49,428
So we had a lot of suits in the game,

531
00:27:49,428 --> 00:27:50,949
like so many suits, it's stupid.

532
00:27:50,949 --> 00:27:55,293
Mr. Negative was one of our biggest villains,

533
00:27:55,293 --> 00:27:57,135
or one of the big villains in the game,

534
00:27:57,135 --> 00:27:59,617
and he needed to look the part.

535
00:27:59,617 --> 00:28:01,238
He was smooth-dressed and clean-cut,

536
00:28:01,238 --> 00:28:03,761
and that needed to be shown in his suits.

537
00:28:03,761 --> 00:28:06,243
We also had suits being used for all of these thugs,

538
00:28:06,243 --> 00:28:07,324
as well as Norman Osborn.

539
00:28:08,116 --> 00:28:11,598
So, the big part of the suits was them to actually hold their form,

540
00:28:11,598 --> 00:28:14,660
especially when characters lifted their arms, right?

541
00:28:14,660 --> 00:28:18,402
A good suit that's well tailored will hold its cut when you lift your arms.

542
00:28:19,194 --> 00:28:22,197
So once again, we dressed up poor Bill in a suit,

543
00:28:22,197 --> 00:28:25,419
and he modeled it for us.

544
00:28:25,419 --> 00:28:28,602
And we took a bunch of reference footage of bending arms

545
00:28:28,602 --> 00:28:30,243
and lifting arms.

546
00:28:30,243 --> 00:28:33,325
And we paid attention to how the arms moved,

547
00:28:33,325 --> 00:28:37,328
how the shoulders bunched, and the arm before this reference.

548
00:28:37,328 --> 00:28:38,109
We knew that.

549
00:28:38,950 --> 00:28:41,111
It was going to be the same deal, getting this jacket to work,

550
00:28:41,111 --> 00:28:47,495
where we're going to need additional work with both real-time cloth and blend shapes.

551
00:28:47,495 --> 00:28:51,437
So here's an early progress shot of us working on,

552
00:28:51,437 --> 00:28:56,580
this is specifically Bill's work on the train sequence with Mr. Negative.

553
00:28:56,580 --> 00:28:59,361
So that was a first pass. You see the jacket isn't lifting at all.

554
00:28:59,361 --> 00:29:02,543
We do have real-time cloth swimming though.

555
00:29:03,492 --> 00:29:07,875
A secondary pass, we wanted to get a little bit more movement out of that,

556
00:29:07,875 --> 00:29:09,496
so you'll see it lifting a fair bit.

557
00:29:09,496 --> 00:29:11,297
But we're still not there yet.

558
00:29:11,297 --> 00:29:16,241
Shoulder shapes don't look as good as they could.

559
00:29:16,241 --> 00:29:19,583
And finally, what we shipped with, with the shaders as well,

560
00:29:19,583 --> 00:29:21,104
which made a big difference.

561
00:29:21,104 --> 00:29:23,465
You can see that jacket opens all the way up.

562
00:29:23,465 --> 00:29:25,207
Looks awesome.

563
00:29:25,207 --> 00:29:26,227
Took a lot of work.

564
00:29:29,485 --> 00:29:33,008
So once again, as I said, we crafted some specific blend

565
00:29:33,008 --> 00:29:33,569
shapes.

566
00:29:33,569 --> 00:29:38,254
And these were first simulated in Marvelous Designer

567
00:29:38,254 --> 00:29:39,074
by our character artists.

568
00:29:39,074 --> 00:29:42,077
And then we sculpted them iteratively

569
00:29:42,077 --> 00:29:43,759
to hit the shapes that we needed.

570
00:29:43,759 --> 00:29:45,441
And this was a really long process

571
00:29:45,441 --> 00:29:47,102
of a lot of back and forth.

572
00:29:47,102 --> 00:29:48,824
So there was no shortcut to this.

573
00:29:48,824 --> 00:29:49,405
We just had to.

574
00:29:50,145 --> 00:29:55,552
you know, test it out, see how it looks and send it back for more tweaks.

575
00:29:55,552 --> 00:29:59,858
But luckily, unlike lab coats, a lot of the suits were mostly black or had effects on them,

576
00:29:59,858 --> 00:30:04,564
which meant it was much more forgiving overall when we were doing blend shapes.

577
00:30:06,752 --> 00:30:11,835
So let's talk a little bit about how we made the suits lift when their arms lifted,

578
00:30:11,835 --> 00:30:17,677
especially with the real-time cloth, because the big issue was when you lift your arms,

579
00:30:17,677 --> 00:30:23,080
if the real-time mesh sim doesn't move with it, then it's going to remain, say, at the hips,

580
00:30:23,080 --> 00:30:26,401
and it's going to collide if colliders no longer sync up to where the mesh is.

581
00:30:26,401 --> 00:30:28,202
So we needed to have the two matching.

582
00:30:30,523 --> 00:30:32,063
First we had a rivet mesh.

583
00:30:32,063 --> 00:30:35,684
So this was a direct duplicate of our sim mesh.

584
00:30:35,684 --> 00:30:39,185
And we would also have a series of cloth control joints.

585
00:30:39,185 --> 00:30:40,846
And there wasn't just four.

586
00:30:40,846 --> 00:30:41,946
Whoops, keep going.

587
00:30:41,946 --> 00:30:45,347
There was more than that.

588
00:30:45,347 --> 00:30:46,447
But you know, this gives you the point.

589
00:30:46,447 --> 00:30:53,209
And these were driving the rivet mesh with clusters,

590
00:30:53,209 --> 00:30:54,610
skinned in a smooth gradient to the top.

591
00:30:54,610 --> 00:30:56,070
And this stuff doesn't go to game,

592
00:30:56,070 --> 00:30:57,851
so it doesn't matter that we're using clusters

593
00:30:57,851 --> 00:30:58,291
to control it.

594
00:31:00,784 --> 00:31:03,186
From there, we also drove this rivet mesh

595
00:31:03,186 --> 00:31:06,728
with a bunch of other things, because this was all additive.

596
00:31:06,728 --> 00:31:10,971
So they were being driven by our core skeleton joints,

597
00:31:10,971 --> 00:31:12,272
our pelvis, spine joints.

598
00:31:12,272 --> 00:31:13,974
It was skinned to that.

599
00:31:13,974 --> 00:31:15,995
But also, on top of that, remember

600
00:31:15,995 --> 00:31:18,077
those blend shapes we were last looking at?

601
00:31:18,077 --> 00:31:19,237
We're adding those, too, on top of that.

602
00:31:19,237 --> 00:31:23,601
So we got a wrap deformer, matched the rivet mesh

603
00:31:23,601 --> 00:31:26,323
to the blend shapes that we were authoring,

604
00:31:26,323 --> 00:31:28,945
and then applied them as blend shapes on top of that.

605
00:31:29,890 --> 00:31:33,014
and they were being driven directly by the rig deformation controls themselves.

606
00:31:33,014 --> 00:31:39,962
So the rivet mesh was called as such because it had a bunch of joints stuck to it

607
00:31:39,962 --> 00:31:44,827
with rivet or point-on-surface nodes, or however you would like to drive it,

608
00:31:44,827 --> 00:31:48,932
but basically it was driving a bunch of nodes underneath it.

609
00:31:50,552 --> 00:31:54,314
And those nodes were skinned to our cloth sim mesh.

610
00:31:54,314 --> 00:31:58,317
So now our cloth sim mesh would go into game

611
00:31:58,317 --> 00:32:00,718
not only with animator adjustments,

612
00:32:00,718 --> 00:32:03,220
but with any movement from the blend shapes,

613
00:32:03,220 --> 00:32:05,481
so our collision could stay accurate.

614
00:32:05,481 --> 00:32:11,225
And that cloth sim mesh was obviously being simmed by Havoc,

615
00:32:11,225 --> 00:32:13,946
was driving a bunch of cloth joints from that,

616
00:32:13,946 --> 00:32:15,708
which were skinned to our render mesh.

617
00:32:16,680 --> 00:32:19,002
So looking at that, we had two things feeding into our engine.

618
00:32:19,002 --> 00:32:20,804
We had our cloth control joints that

619
00:32:20,804 --> 00:32:23,246
were skinned to the cloth sim mesh,

620
00:32:23,246 --> 00:32:27,610
and we had our joints that were driven by the cloth sim mesh

621
00:32:27,610 --> 00:32:28,751
being skinned to the render mesh.

622
00:32:28,751 --> 00:32:31,454
And those were both being sent to engine.

623
00:32:31,454 --> 00:32:33,796
So if you look at it as a whole, it's not too bad.

624
00:32:33,796 --> 00:32:38,240
Pretty clever way of getting our blend shapes on our cloth

625
00:32:38,240 --> 00:32:40,262
set up, because inherently, Havoc

626
00:32:40,262 --> 00:32:42,784
didn't support blend shapes on the sim meshes.

627
00:32:45,145 --> 00:32:50,387
So another thing was is we had this wind effect,

628
00:32:50,387 --> 00:32:53,948
if the video would play.

629
00:32:53,948 --> 00:33:02,171
Hang on.

630
00:33:02,171 --> 00:33:05,712
Sorry guys, I don't know why that one's not playing.

631
00:33:05,712 --> 00:33:08,533
We had a wind effect which was a rippling on the suit

632
00:33:08,533 --> 00:33:11,354
and this was generated by a series of,

633
00:33:11,354 --> 00:33:13,575
oops, I see a play button.

634
00:33:13,575 --> 00:33:13,855
No.

635
00:33:14,545 --> 00:33:15,946
No!

636
00:33:15,946 --> 00:33:17,387
Why would it tease me like that?

637
00:33:17,387 --> 00:33:22,251
These are all on one mega slide thing,

638
00:33:22,251 --> 00:33:24,733
so it's probably got messed up somewhere.

639
00:33:24,733 --> 00:33:25,473
Sorry about that.

640
00:33:25,473 --> 00:33:29,576
But yeah, they were offered with noisy blend shapes,

641
00:33:29,576 --> 00:33:31,898
so we basically just added the noise multiplier

642
00:33:31,898 --> 00:33:33,359
onto a series of blend shapes,

643
00:33:33,359 --> 00:33:35,321
and there was about 12 of them,

644
00:33:35,321 --> 00:33:37,623
and it would just cycle through them all,

645
00:33:37,623 --> 00:33:40,445
and this gave a rippling effect on the jacket itself.

646
00:33:40,445 --> 00:33:42,667
This was different to Spider-Man's suit,

647
00:33:45,220 --> 00:33:47,102
That was done by animating normals.

648
00:33:47,102 --> 00:33:48,723
However, because the suits were so dark,

649
00:33:48,723 --> 00:33:50,124
normal animation would be lost,

650
00:33:50,124 --> 00:33:51,986
so we had to create like a moving surface

651
00:33:51,986 --> 00:33:53,427
to get the wind rippling effect.

652
00:33:53,427 --> 00:33:56,650
And after this, we tuned our shapes

653
00:33:56,650 --> 00:34:00,133
and behavior in the cloth, ties and sleeves,

654
00:34:00,133 --> 00:34:02,374
all that stuff to get the weight and dampening

655
00:34:02,374 --> 00:34:04,136
of the cloth feeling correct.

656
00:34:04,136 --> 00:34:05,917
So with all these three elements,

657
00:34:05,917 --> 00:34:08,339
which were blend shapes driving the sim,

658
00:34:08,339 --> 00:34:11,602
real-time cloth and corrective blend shapes

659
00:34:11,602 --> 00:34:13,123
helped sell the look of the suit jackets in Spider-Man.

660
00:34:14,572 --> 00:34:15,893
So our final example is MJ.

661
00:34:15,893 --> 00:34:18,175
And I mentioned MJ earlier in the setup,

662
00:34:18,175 --> 00:34:19,435
so let's go over her particulars.

663
00:34:19,435 --> 00:34:23,658
So once again, she had her hair, her scarf,

664
00:34:23,658 --> 00:34:24,919
her outer jacket and inner jacket.

665
00:34:24,919 --> 00:34:30,362
Also meant to be playing a video.

666
00:34:32,163 --> 00:34:35,565
Yeah, sorry, these separate elements had their challenges.

667
00:34:35,565 --> 00:34:38,146
But the biggest issue was that, again,

668
00:34:38,146 --> 00:34:40,266
we had no cloth-to-cloth collision built in,

669
00:34:40,266 --> 00:34:42,327
so we had to be very careful with our limits

670
00:34:42,327 --> 00:34:44,208
and use collision capsules smartly

671
00:34:44,208 --> 00:34:46,949
to make sure we didn't have cloth clipping issues.

672
00:34:46,949 --> 00:34:50,130
For us, I mean, in cloth, that was our biggest hurdle, right?

673
00:34:50,130 --> 00:34:53,091
If you've played Spider-Man, a big...

674
00:34:53,931 --> 00:34:56,652
Part of our challenge was we didn't want cloth clipping.

675
00:34:56,652 --> 00:34:58,053
And you might notice a lot of other games,

676
00:34:58,053 --> 00:35:00,013
the cloth sim clips all over the place

677
00:35:00,013 --> 00:35:01,534
and they kind of just don't care what happens.

678
00:35:01,534 --> 00:35:03,675
And we didn't want that for our believable world.

679
00:35:03,675 --> 00:35:06,216
So to avoid this as much as we could,

680
00:35:06,216 --> 00:35:08,497
we built a lot of cloth scenarios

681
00:35:08,497 --> 00:35:10,678
that would avoid those kind of,

682
00:35:10,678 --> 00:35:14,199
or cloth setups would avoid those kind of scenarios.

683
00:35:14,199 --> 00:35:16,240
So here's an example.

684
00:35:16,240 --> 00:35:17,420
This is really not working today.

685
00:35:18,880 --> 00:35:21,122
Another moving video, I'm afraid.

686
00:35:21,122 --> 00:35:23,385
Here's an example of the sim meshes on the left

687
00:35:23,385 --> 00:35:25,708
and the behavior and game on the right.

688
00:35:25,708 --> 00:35:29,892
So you can see all the different sim meshes.

689
00:35:29,892 --> 00:35:31,574
We have her hair, we have the ponytail,

690
00:35:31,574 --> 00:35:34,518
we have the scarf, the inner and outer jacket.

691
00:35:34,518 --> 00:35:36,100
And much like our other setups,

692
00:35:36,100 --> 00:35:37,882
we use a series of blend shapes to enhance

693
00:35:37,882 --> 00:35:39,744
the shoulder and elbow shapes in MJ's jacket.

694
00:35:41,321 --> 00:35:47,066
But on top of that she had the layer jacket and not only that, with MG's crouching position,

695
00:35:47,066 --> 00:35:51,590
it would often get caught between her torso and her legs.

696
00:35:52,461 --> 00:35:56,604
So some games avoid that trap by modeling the legs

697
00:35:56,604 --> 00:35:58,906
to fall to the side, but we didn't want to do that.

698
00:35:58,906 --> 00:36:01,408
We didn't want to compromise.

699
00:36:01,408 --> 00:36:06,352
So what we did was I had to have a concession

700
00:36:06,352 --> 00:36:09,515
where I did give in and gave animators controls

701
00:36:09,515 --> 00:36:12,698
and they'd use them to pose the mesh,

702
00:36:12,698 --> 00:36:14,159
the sim mesh out of the way

703
00:36:14,159 --> 00:36:16,781
so that it would naturally fall to the sides

704
00:36:16,781 --> 00:36:19,343
instead of being caught between the torso

705
00:36:19,343 --> 00:36:20,824
and the legs when first simming.

706
00:36:21,739 --> 00:36:25,082
And we actually did sim the two separate layers of the jacket

707
00:36:25,082 --> 00:36:27,084
because I could have put them in one sim,

708
00:36:27,084 --> 00:36:29,407
but then and skinned them maybe differently,

709
00:36:29,407 --> 00:36:30,768
but I would have risked clipping,

710
00:36:30,768 --> 00:36:33,511
especially how close the layers were.

711
00:36:33,511 --> 00:36:35,553
But this wouldn't have got such realistic behavior.

712
00:36:35,553 --> 00:36:37,555
So the main trick for this was to make sure

713
00:36:37,555 --> 00:36:40,397
that the inner layer had very, very strict distance

714
00:36:40,397 --> 00:36:41,759
limitations.

715
00:36:41,759 --> 00:36:43,060
That meant that it couldn't really escape

716
00:36:43,060 --> 00:36:44,942
this very tight cone of forward-back behavior,

717
00:36:44,942 --> 00:36:46,483
but had some nice side-to-side motion.

718
00:36:51,166 --> 00:36:59,371
And this is really not good for me right now.

719
00:36:59,371 --> 00:37:04,154
Once again, the scarf overall was a fairly similar setup.

720
00:37:04,154 --> 00:37:08,876
However, the side-to-side motion, we wanted to limit it

721
00:37:08,876 --> 00:37:12,639
because the jacket was on either side of the scarf.

722
00:37:12,639 --> 00:37:16,241
So to do this, we added small colliders

723
00:37:16,241 --> 00:37:19,283
parented to MJ's chest to keep it within a small range.

724
00:37:19,948 --> 00:37:23,589
However, we didn't want to reduce the overall range of her scarf

725
00:37:23,589 --> 00:37:25,770
because she bent over a lot,

726
00:37:25,770 --> 00:37:29,231
and if we did that, we would hit a wall.

727
00:37:29,231 --> 00:37:33,712
So, by adding two colliders on the side of the scarf

728
00:37:33,712 --> 00:37:35,652
that parented to her chest,

729
00:37:35,652 --> 00:37:38,253
we kept it in this very narrow area,

730
00:37:38,253 --> 00:37:40,114
which allowed it to have a lot of forward motion,

731
00:37:40,114 --> 00:37:46,895
but no side-to-side to avoid all the clipping that came with that.

732
00:37:46,895 --> 00:37:49,076
And once again.

733
00:37:49,627 --> 00:37:52,849
Yeah, the same with the ponytail.

734
00:37:52,849 --> 00:37:55,350
We, MD wore it in a variety of outfits.

735
00:37:55,350 --> 00:37:57,852
However, it would have to work with each outfit,

736
00:37:57,852 --> 00:38:00,033
so we didn't want to double this up by, like,

737
00:38:00,033 --> 00:38:02,274
you know, duplicating the sim mesh and the geo mesh out.

738
00:38:02,274 --> 00:38:07,517
So we tried to coax it within a range of using colliders.

739
00:38:07,517 --> 00:38:10,859
Not only that, but when we needed to limit

740
00:38:10,859 --> 00:38:13,861
the side-to-side motion, we couldn't actually constrain it

741
00:38:13,861 --> 00:38:16,042
with colliders on the head because it would look

742
00:38:16,042 --> 00:38:18,283
really weird if she turned her head very fast.

743
00:38:18,967 --> 00:38:22,708
So eventually what we did instead was we lengthened

744
00:38:22,708 --> 00:38:25,790
the sim mesh way past the point of the sim

745
00:38:25,790 --> 00:38:29,831
and widened it a ton and this prevented it from twisting

746
00:38:29,831 --> 00:38:34,713
and getting caught between her shoulders and her neck.

747
00:38:34,713 --> 00:38:37,915
So you can see, oh no,

748
00:38:37,915 --> 00:38:43,277
this must be an old version or something.

749
00:38:43,277 --> 00:38:45,158
Okay guys, this is real bad, I'm sorry.

750
00:38:47,408 --> 00:38:52,051
There were some scenarios as well where,

751
00:38:52,051 --> 00:38:53,732
so yeah, this was the picture of the setup,

752
00:38:53,732 --> 00:38:56,694
and then there were some scenarios as well

753
00:38:56,694 --> 00:39:00,516
of MG jumping from the top of the penthouse,

754
00:39:00,516 --> 00:39:02,297
where this scenario we couldn't do

755
00:39:02,297 --> 00:39:05,919
because we had to create a unique setup,

756
00:39:05,919 --> 00:39:10,281
and we didn't have time for that,

757
00:39:10,281 --> 00:39:12,223
so at this point we just gave it to the animators,

758
00:39:12,223 --> 00:39:14,704
and they did it with cloth controls entirely.

759
00:39:15,963 --> 00:39:18,327
So let's get on to some nitty gritty

760
00:39:18,327 --> 00:39:21,011
with Havoc's best practices.

761
00:39:22,357 --> 00:39:24,358
This is more specific to Havoc itself,

762
00:39:24,358 --> 00:39:26,760
but since this is what we're offering with,

763
00:39:26,760 --> 00:39:28,461
I thought it'd be good to share the knowledge here.

764
00:39:28,461 --> 00:39:31,923
There was a lot of learning curves for us on this,

765
00:39:31,923 --> 00:39:36,726
so I just want to make sure, you know, spread the knowledge.

766
00:39:36,726 --> 00:39:39,208
So, first of all, massive gravity,

767
00:39:39,208 --> 00:39:41,289
despite how wrong it feels.

768
00:39:41,289 --> 00:39:44,892
So, we know gravity to be this fixed number,

769
00:39:44,892 --> 00:39:47,854
but actually in Havoc, we used it a lot to...

770
00:39:49,155 --> 00:39:52,956
basically cheat whether things were heavier or lighter.

771
00:39:52,956 --> 00:39:56,517
And even though it felt so, so wrong,

772
00:39:56,517 --> 00:39:58,717
it worked so, so right.

773
00:39:58,717 --> 00:40:01,078
We also used the bone-driven method

774
00:40:01,078 --> 00:40:03,819
so that we could have thickness on our mesh,

775
00:40:03,819 --> 00:40:05,419
as talked about earlier.

776
00:40:05,419 --> 00:40:06,779
We turned on motion transfer,

777
00:40:06,779 --> 00:40:08,960
which was an attribute on the cloth

778
00:40:08,960 --> 00:40:10,120
for playable characters.

779
00:40:10,120 --> 00:40:13,441
And if you play games and you stop a character in a dime,

780
00:40:13,441 --> 00:40:14,621
usually there's a lot of overlap,

781
00:40:14,621 --> 00:40:16,782
or sorry, overshoot on the sim,

782
00:40:16,782 --> 00:40:17,542
where it goes crazy,

783
00:40:18,162 --> 00:40:20,103
because its velocity is coming to a complete halt.

784
00:40:20,103 --> 00:40:24,186
So the motion transfer in Havok's cloth

785
00:40:24,186 --> 00:40:27,447
allows, basically puts a limit on the velocity

786
00:40:27,447 --> 00:40:30,929
it can achieve so that when you stop a character on a dime,

787
00:40:30,929 --> 00:40:34,711
the cloth doesn't overshoot and go super fast,

788
00:40:34,711 --> 00:40:35,992
it just settles back down.

789
00:40:35,992 --> 00:40:37,453
And this worked really well for us

790
00:40:37,453 --> 00:40:40,895
so that when a player was flicking the stick back

791
00:40:40,895 --> 00:40:43,216
and forth, the cloth not only

792
00:40:44,587 --> 00:40:49,171
behaved realistically but didn't go through all our colliders and make us all cry for

793
00:40:49,171 --> 00:40:54,195
all of our hard work getting destroyed by players once again.

794
00:40:54,195 --> 00:41:00,501
So and then we use mass to weigh things down, but a caveat to this is it needs to be painted.

795
00:41:00,501 --> 00:41:04,464
Having the mass attribute is a, you know, changing that static attribute doesn't do

796
00:41:04,464 --> 00:41:05,025
anything.

797
00:41:05,025 --> 00:41:09,789
Mass needs context, so you need to have that painted on the mesh itself.

798
00:41:13,302 --> 00:41:15,684
And then soft gradients rock.

799
00:41:15,684 --> 00:41:18,887
So I just, most of my skinning and most of my,

800
00:41:18,887 --> 00:41:20,989
or rather most of my attributes I painted,

801
00:41:20,989 --> 00:41:24,612
I usually just painted 50% solid, 50% filled and not filled.

802
00:41:24,612 --> 00:41:28,916
And then I would just smooth between the two

803
00:41:28,916 --> 00:41:31,118
without selecting the top loops.

804
00:41:31,118 --> 00:41:34,621
And that literally got me 99% of the behavior.

805
00:41:34,621 --> 00:41:37,523
So I just use soft gradients all over the place.

806
00:41:39,290 --> 00:41:44,773
And here's some more stuff specific to the constraints themselves.

807
00:41:44,773 --> 00:41:47,295
So Havoc has a series of constraints.

808
00:41:47,295 --> 00:41:49,596
It's kind of overwhelming sometimes.

809
00:41:49,596 --> 00:41:50,997
So here's some good ones.

810
00:41:50,997 --> 00:41:54,019
The standard and stretch link constraints were always in our setup.

811
00:41:54,019 --> 00:41:56,741
Standard link basically made the cloth, you know,

812
00:41:56,741 --> 00:42:00,804
like, constrain the particles to each other.

813
00:42:00,804 --> 00:42:04,506
And the stretch link made it so that it wouldn't stretch out super, super long.

814
00:42:05,307 --> 00:42:11,051
We used bend link and bend stiffness to add stiffness, usually in slightly different ways.

815
00:42:11,051 --> 00:42:14,214
Volume constraint tried to take the cloth back to how it was in bind,

816
00:42:14,214 --> 00:42:19,578
but it was overall expensive and it didn't really get us the results we liked, so we tended to avoid it.

817
00:42:19,578 --> 00:42:25,602
Bone particle angles and bone global plane could be used to constrain a sim within a predefined area,

818
00:42:25,602 --> 00:42:28,325
kind of a look a lot like distance.

819
00:42:29,335 --> 00:42:32,756
But it was a nice alternative if you didn't want to mess around

820
00:42:32,756 --> 00:42:36,958
with your distance attribute because you'd got that working the way you'd liked.

821
00:42:36,958 --> 00:42:41,561
And overall, these were the areas that are actually marked in red

822
00:42:41,561 --> 00:42:44,322
are the areas that we would tend to sim.

823
00:42:44,322 --> 00:42:50,005
So we would avoid complex articulation areas, which were the thigh and the hips,

824
00:42:50,005 --> 00:42:53,226
the ankles, the shoulders especially, the neck.

825
00:42:53,226 --> 00:42:57,388
We try to keep things in this area to avoid overcomplicating things.

826
00:42:58,987 --> 00:43:06,012
And for our sim mesh, the instinct is to get your mesh

827
00:43:06,012 --> 00:43:08,553
and then create an average mesh, which

828
00:43:08,553 --> 00:43:13,176
is between the outer and inner shell of your mesh.

829
00:43:13,176 --> 00:43:16,579
But actually, we found out that if you kept it

830
00:43:16,579 --> 00:43:17,839
on the inside of the mesh.

831
00:43:18,640 --> 00:43:22,182
if there was any thickness, there wasn't any guesswork when it came to collidables,

832
00:43:22,182 --> 00:43:26,285
because if you use the middle of the mesh, then there would be some arbitrary distance

833
00:43:26,285 --> 00:43:29,267
between your cloth and your collision capsules that was challenging to account for.

834
00:43:29,267 --> 00:43:35,231
So remove the guesswork and make the sim mesh on the inside so it's closest to your collision capsules.

835
00:43:36,419 --> 00:43:38,420
Speaking of collision capsules,

836
00:43:38,420 --> 00:43:40,361
so there's custom collision capsules

837
00:43:40,361 --> 00:43:42,522
and there's standard capsules.

838
00:43:42,522 --> 00:43:45,123
And I found that we got smoother results

839
00:43:45,123 --> 00:43:47,685
by layering up multiple collision capsules

840
00:43:47,685 --> 00:43:49,566
versus custom collision objects.

841
00:43:49,566 --> 00:43:52,167
So even for an oddly shaped thing like a torso,

842
00:43:52,167 --> 00:43:55,869
I would use a series of multiple collision capsules

843
00:43:55,869 --> 00:43:58,730
instead of a custom shape.

844
00:43:58,730 --> 00:43:59,751
Some very rough napkin math.

845
00:43:59,751 --> 00:44:04,393
This is my own math, so it's probably totally wrong.

846
00:44:04,393 --> 00:44:04,693
But.

847
00:44:05,418 --> 00:44:08,279
it made it seem like it took up to six collision capsules

848
00:44:08,279 --> 00:44:10,899
to make the cost of one single collision,

849
00:44:10,899 --> 00:44:13,220
custom collision shape.

850
00:44:13,220 --> 00:44:16,001
So I tended to stick with the capsules themselves.

851
00:44:16,001 --> 00:44:21,163
And also, there was, I found that there was jittering

852
00:44:21,163 --> 00:44:23,783
or harsh transitions if I went from,

853
00:44:23,783 --> 00:44:26,244
if a sim mesh slid over a collision capsule

854
00:44:26,244 --> 00:44:29,285
and went to a custom collision mesh.

855
00:44:29,983 --> 00:44:32,765
And so the rounder the capsules were also,

856
00:44:32,765 --> 00:44:35,947
the less likely they were to create big lumps

857
00:44:35,947 --> 00:44:37,708
or oddities in the sim itself.

858
00:44:37,708 --> 00:44:41,031
Also, we talked a little bit earlier

859
00:44:41,031 --> 00:44:42,952
about kind of nailing down your sim mesh.

860
00:44:42,952 --> 00:44:45,534
This is, there's differences between the high

861
00:44:45,534 --> 00:44:49,116
and low resolution meshes.

862
00:44:49,116 --> 00:44:50,777
So, because they had a behavioral link, right?

863
00:44:50,777 --> 00:44:54,539
The higher the resolution, the more salty the cloth.

864
00:44:54,539 --> 00:44:57,781
The lower the resolution, the more stiff the cloth felt.

865
00:45:00,932 --> 00:45:09,078
You have to be really careful with this one because there was some areas where we started

866
00:45:09,078 --> 00:45:13,421
with a mesh, did a lot of work on it, realized that we actually had to increase the resolution

867
00:45:13,421 --> 00:45:15,803
of the mesh because the collision capsules were...

868
00:45:16,555 --> 00:45:19,236
kind of sliding through the mesh at certain points.

869
00:45:19,236 --> 00:45:21,736
And when we did that, we had to rebalance pretty much everything

870
00:45:21,736 --> 00:45:24,477
because the behavior was completely changed.

871
00:45:24,477 --> 00:45:26,957
So try and nail down your SimMesh resolution

872
00:45:26,957 --> 00:45:28,738
before you're doing other iterations on it.

873
00:45:28,738 --> 00:45:32,238
Otherwise, you're causing yourself a ton of rework

874
00:45:32,238 --> 00:45:34,559
down the line later if you decide to change it.

875
00:45:34,559 --> 00:45:38,740
So now that we've got some tips and tricks covered,

876
00:45:38,740 --> 00:45:39,360
what else can you do?

877
00:45:39,360 --> 00:45:41,660
Well, if you're lucky enough like us at Insomniac,

878
00:45:41,660 --> 00:45:43,120
you might have an in-house engine team,

879
00:45:43,120 --> 00:45:45,741
and you might want to get yourself some extra features.

880
00:45:46,424 --> 00:45:49,885
So out of the box, Havoc was able to get us a lot,

881
00:45:49,885 --> 00:45:52,726
but we still needed our extra engine support.

882
00:45:52,726 --> 00:45:54,687
And luckily, this is where our awesome core team came in.

883
00:45:54,687 --> 00:45:56,608
So the first thing they did was they

884
00:45:56,608 --> 00:45:57,868
removed cinematic cloth pop.

885
00:45:57,868 --> 00:45:59,969
And you may have seen that in other games

886
00:45:59,969 --> 00:46:03,910
where you go into a cut scene and all the cloth was crazy

887
00:46:03,910 --> 00:46:05,150
and then settles for a second.

888
00:46:05,150 --> 00:46:06,611
And this usually happens because

889
00:46:06,891 --> 00:46:09,693
a character is teleporting in space,

890
00:46:09,693 --> 00:46:13,956
and the cloth is accelerating at infinite miles per hour,

891
00:46:13,956 --> 00:46:16,738
and it finally stops, and it freaks out.

892
00:46:16,738 --> 00:46:20,661
So we had our core engineers work tirelessly

893
00:46:20,661 --> 00:46:23,943
to remove that by basically pausing the cloth sim

894
00:46:23,943 --> 00:46:26,665
when we were transporting characters

895
00:46:26,665 --> 00:46:29,267
and giving them a couple of frames to settle

896
00:46:29,267 --> 00:46:30,848
before we went into a cinematic.

897
00:46:33,238 --> 00:46:38,561
Also, as a side note, it's really great having an in-house engine team that you get to directly

898
00:46:38,561 --> 00:46:42,442
interface with and get feedbacks and questions to.

899
00:46:42,442 --> 00:46:46,944
So I just want to say, or ask questions, so I just want to say thank you to our core team

900
00:46:46,944 --> 00:46:48,224
as well.

901
00:46:48,224 --> 00:46:51,566
They also added on events for turning on and off cloth when we needed it.

902
00:46:51,566 --> 00:46:55,127
So there was, as I said, there was points in the game where we needed to disable it,

903
00:46:55,127 --> 00:46:58,188
and they added events that supported that.

904
00:46:58,348 --> 00:47:02,290
And as well as that, they added some real-time events for us

905
00:47:02,290 --> 00:47:04,690
to adjust gravity and dampening on the fly.

906
00:47:04,690 --> 00:47:07,611
Because there was a couple of instances in the game

907
00:47:07,611 --> 00:47:09,772
where, no matter how we tried, we

908
00:47:09,772 --> 00:47:12,473
couldn't get a cloth setup to behave

909
00:47:12,473 --> 00:47:13,813
how we wanted in a single shot.

910
00:47:13,813 --> 00:47:17,314
And rather than completely duplicate the setup

911
00:47:17,314 --> 00:47:20,175
and swap it out for a single shot,

912
00:47:20,175 --> 00:47:26,837
Core gave us the ability to have custom stuff that we could then

913
00:47:26,837 --> 00:47:27,777
all are at runtime.

914
00:47:28,878 --> 00:47:29,719
So what were our findings?

915
00:47:29,719 --> 00:47:35,963
It was real-time cloth was great for overall movement.

916
00:47:35,963 --> 00:47:39,785
And detail could be added with blend shapes in normal maps.

917
00:47:41,728 --> 00:47:43,689
It was good for, oh sorry,

918
00:47:43,689 --> 00:47:45,370
it was good to give animator control.

919
00:47:45,370 --> 00:47:49,111
So despite my want for not burdening animators

920
00:47:49,111 --> 00:47:51,873
with any kind of animator cloth controls,

921
00:47:51,873 --> 00:47:52,773
it still came in handy,

922
00:47:52,773 --> 00:47:57,775
and we really still needed it in quite a few circumstances,

923
00:47:57,775 --> 00:48:02,237
because when we needed it, we really, really needed it.

924
00:48:02,237 --> 00:48:03,538
It requires a lot of iterations,

925
00:48:03,538 --> 00:48:07,160
so be prepared to spend a lot of time on polish.

926
00:48:08,208 --> 00:48:11,149
And some behavior changes have knock-on effects,

927
00:48:11,149 --> 00:48:13,991
so when you think you're just going to adjust a small thing,

928
00:48:13,991 --> 00:48:20,394
like the radius, or, say, the dampening of a setup,

929
00:48:20,394 --> 00:48:24,517
it can completely throw all your other finely-tuned attributes out of whack.

930
00:48:24,517 --> 00:48:26,458
So be cautious of that.

931
00:48:27,662 --> 00:48:29,782
And how could we improve going forward?

932
00:48:29,782 --> 00:48:32,663
So we'd love to be able to have more real-time iteration.

933
00:48:32,663 --> 00:48:37,024
So instead of outputting the cloth stuff to a data file

934
00:48:37,024 --> 00:48:38,564
and then loading that in,

935
00:48:38,564 --> 00:48:41,624
being able to adjust cloth real-time on the fly

936
00:48:41,624 --> 00:48:45,025
would be amazing because, you know,

937
00:48:45,025 --> 00:48:48,006
it would give us more instant debugging and feedback,

938
00:48:48,006 --> 00:48:49,466
and we could alter properties at will

939
00:48:49,466 --> 00:48:50,906
to see what kind of effects that we're having

940
00:48:50,906 --> 00:48:51,507
on the behavior.

941
00:48:52,478 --> 00:48:56,161
It'd be nice to have better debug display and feedback.

942
00:48:56,161 --> 00:48:59,344
This was a big problem for us, as covered earlier,

943
00:48:59,344 --> 00:49:03,347
and being able to support that with more stuff rendered

944
00:49:03,347 --> 00:49:05,889
in-engine on top of our characters

945
00:49:05,889 --> 00:49:07,931
would be really useful going forward.

946
00:49:08,512 --> 00:49:10,252
And then also swappable cloth profiles.

947
00:49:10,252 --> 00:49:12,913
So we usually had one cloth profile per character,

948
00:49:12,913 --> 00:49:15,573
and if we had to change that for a character,

949
00:49:15,573 --> 00:49:19,754
we had to duplicate the setup or the entire asset itself.

950
00:49:19,754 --> 00:49:23,835
And the ability to swap out cloth profiles on the fly

951
00:49:23,835 --> 00:49:26,115
would be awesome, because if we really

952
00:49:26,115 --> 00:49:28,976
like to set up on a particular scene, we could save that out

953
00:49:28,976 --> 00:49:31,236
and then know that it's always going to behave

954
00:49:31,236 --> 00:49:33,017
on that particular scene, and then

955
00:49:33,017 --> 00:49:36,738
iterate on other scenes without damaging the work we

956
00:49:36,738 --> 00:49:37,938
did on the previous scene.

957
00:49:38,765 --> 00:49:43,290
So in conclusion, did we deliver on a promise?

958
00:49:43,290 --> 00:49:44,471
I believe we did.

959
00:49:44,471 --> 00:49:48,114
We made some amazing, realistic, and believable cloth.

960
00:49:48,858 --> 00:49:50,458
But not only that, but it was abundant.

961
00:49:50,458 --> 00:49:51,219
It was everywhere.

962
00:49:51,219 --> 00:49:53,939
Cloth was on our enemies, it was in the characters

963
00:49:53,939 --> 00:49:58,581
you talked to, the NPCs, and our vast cast

964
00:49:58,581 --> 00:49:59,901
of main characters as well.

965
00:49:59,901 --> 00:50:02,282
Across the glance at our depot,

966
00:50:02,282 --> 00:50:04,263
we had around 70 different assets

967
00:50:04,263 --> 00:50:04,923
with active real-time cloth,

968
00:50:04,923 --> 00:50:07,864
and that doesn't include all the separate setups

969
00:50:07,864 --> 00:50:09,564
inside the models themselves,

970
00:50:09,564 --> 00:50:11,145
as well as the fact that, for example,

971
00:50:11,145 --> 00:50:14,846
our inner demon thug faction was one model entirely,

972
00:50:14,846 --> 00:50:17,967
so having that times 70 was pretty crazy.

973
00:50:18,627 --> 00:50:21,549
And we did this with our small and versatile rigging team.

974
00:50:21,549 --> 00:50:24,211
There was no one on the team that was solely dedicated

975
00:50:24,211 --> 00:50:25,172
to cloth.

976
00:50:25,172 --> 00:50:29,354
We all did our part and made a little bit for the game.

977
00:50:29,354 --> 00:50:34,378
And so while we were at it, we improved our cloth pipeline

978
00:50:34,378 --> 00:50:35,658
and tools a lot.

979
00:50:35,658 --> 00:50:38,821
So our engine team worked with us to give us the best results,

980
00:50:38,821 --> 00:50:41,102
whether it was removing cloth pops or better and quicker

981
00:50:41,102 --> 00:50:42,803
reloads.

982
00:50:42,803 --> 00:50:46,446
From start to end, the project, the pipeline was transformed.

983
00:50:47,390 --> 00:50:49,411
I also helped streamline the content side,

984
00:50:49,411 --> 00:50:51,492
as I removed as much room for error as I could,

985
00:50:51,492 --> 00:50:53,873
and made our content pipeline much more straightforward.

986
00:50:53,873 --> 00:50:57,794
And perhaps, finally, this is subjective,

987
00:50:57,794 --> 00:50:59,755
but I believe we made some of the best real-time cloth

988
00:50:59,755 --> 00:51:01,835
ever developed, especially on such a large-scale

989
00:51:01,835 --> 00:51:03,536
open-world game.

990
00:51:03,536 --> 00:51:07,777
Well, we pushed the bar in the tech for real-time cloth,

991
00:51:07,777 --> 00:51:09,158
and for that, I'm proud of us

992
00:51:09,158 --> 00:51:10,618
and the entire team at Insomniac.

993
00:51:12,145 --> 00:51:14,268
And that is me.

994
00:51:14,268 --> 00:51:17,873
Speaking of, we are hiring if you wish to join us.

995
00:51:17,873 --> 00:51:19,515
I am ready to take questions,

996
00:51:19,515 --> 00:51:24,222
and I apologize for the mishaps in the presentation.

997
00:51:24,222 --> 00:51:26,084
You can reach me also at Twitter.

998
00:51:26,084 --> 00:51:27,446
My DM is waffles.

999
00:51:38,082 --> 00:51:39,725
Sorry, I meant to say my handle is waffles

1000
00:51:39,725 --> 00:51:41,929
and DMs are always open, but you know, whatever.

1001
00:51:41,929 --> 00:51:45,635
Do we have time for questions?

1002
00:51:45,635 --> 00:51:46,938
I have a question for you.

1003
00:51:46,938 --> 00:51:47,278
Yep, sure.

1004
00:51:47,887 --> 00:51:49,467
Fantastic presentation.

1005
00:51:49,467 --> 00:51:50,027
Great job, Sophie.

1006
00:51:50,027 --> 00:51:52,328
I'm on my second play through of your game.

1007
00:51:52,328 --> 00:51:53,548
Absolutely love it.

1008
00:51:53,548 --> 00:51:54,809
Thank you.

1009
00:51:54,809 --> 00:51:58,250
Seems like you put a lot of work into

1010
00:51:58,250 --> 00:52:01,831
working around weaknesses and deficiencies in Havok.

1011
00:52:01,831 --> 00:52:02,491
Yes.

1012
00:52:02,491 --> 00:52:05,492
And I'm curious if you could go back and choose,

1013
00:52:05,492 --> 00:52:08,053
seems like that choice was made before you started.

1014
00:52:08,053 --> 00:52:08,353
Yes.

1015
00:52:08,353 --> 00:52:09,953
Would you choose to use Havok again

1016
00:52:09,953 --> 00:52:12,014
or on your next project?

1017
00:52:12,014 --> 00:52:13,955
Would you use Havok again or try something else?

1018
00:52:14,843 --> 00:52:19,708
I mean, we're always open to looking at improving our pipeline, but we have invested a lot in

1019
00:52:19,708 --> 00:52:25,073
making Havoc work for us a lot better, so it also makes sense to keep using it.

1020
00:52:25,073 --> 00:52:30,118
There also isn't a lot of other alternatives out there, and to develop your own cloth in-house,

1021
00:52:30,118 --> 00:52:33,421
which I know a lot of other studios do, is a really, really big undertaking.

1022
00:52:33,421 --> 00:52:36,624
So that's something we'd have to evaluate at a company-wide level, whether or not it's

1023
00:52:36,624 --> 00:52:37,465
worth pursuing that.

1024
00:52:37,785 --> 00:52:41,526
But for us, I mean, our process has massively changed

1025
00:52:41,526 --> 00:52:43,407
since the beginning of the project to the end,

1026
00:52:43,407 --> 00:52:47,189
and I wouldn't want that work to be wasted at the same time.

1027
00:52:47,189 --> 00:52:48,990
But thank you, it was a good question.

1028
00:52:48,990 --> 00:52:49,350
I have a question.

1029
00:52:49,350 --> 00:52:50,410
Great job, that was pretty amazing.

1030
00:52:50,410 --> 00:52:54,492
And I was just curious about the,

1031
00:52:54,492 --> 00:53:01,595
so the pipeline from the sim clock to the joints,

1032
00:53:01,595 --> 00:53:04,156
do you have like an average

1033
00:53:04,156 --> 00:53:06,397
of how many joints we're talking about?

1034
00:53:07,568 --> 00:53:12,070
It really depended on the setup, but like, I don't know, I'm trying to think about it here.

1035
00:53:12,070 --> 00:53:19,114
Our lab coats, because they were simulated from the kind of chest level down, I think we had like...

1036
00:53:21,672 --> 00:53:24,374
maybe like eight chains of eight joints.

1037
00:53:24,374 --> 00:53:28,637
So, yeah, it was that when we added cloth to a model,

1038
00:53:28,637 --> 00:53:31,198
it was no like small thing.

1039
00:53:31,198 --> 00:53:33,760
Like there had to be a lot of resolution on the cloth

1040
00:53:33,760 --> 00:53:37,463
and the cloth joints to get the kind of results we needed.

1041
00:53:37,463 --> 00:53:40,205
I don't think we, there was a couple of simulations

1042
00:53:40,205 --> 00:53:41,846
where we kind of went like.

1043
00:53:42,775 --> 00:53:51,110
Over that with, I think, Rio, she wears like her entire top is simmed and I think in that one we have a vertex,

1044
00:53:51,110 --> 00:53:52,453
vertex, sorry, per

1045
00:53:54,351 --> 00:53:55,571
Joint pervertex on the SIM mesh, yeah.

1046
00:53:55,571 --> 00:53:57,612
Because it was a full body thing,

1047
00:53:57,612 --> 00:54:00,753
we wanted it to be as accurate as possible.

1048
00:54:00,753 --> 00:54:04,434
But yeah, for most of it, it was a series of chains of joints

1049
00:54:04,434 --> 00:54:08,335
and it really depended on the complexity of the setup,

1050
00:54:08,335 --> 00:54:09,715
how many joints we put in there.

1051
00:54:09,715 --> 00:54:10,795
But it was always quite a lot.

1052
00:54:10,795 --> 00:54:14,977
It was always more than the body rig itself.

1053
00:54:14,977 --> 00:54:15,737
Yeah.

1054
00:54:15,737 --> 00:54:16,097
Thank you.

1055
00:54:18,307 --> 00:54:19,788
Hey there, amazing talk, thank you very much.

1056
00:54:19,788 --> 00:54:24,551
Quick question, could you maybe please elaborate a bit

1057
00:54:24,551 --> 00:54:26,952
on how you actually managed to eliminate the problem

1058
00:54:26,952 --> 00:54:31,394
of cloth popping whenever a character is teleported

1059
00:54:31,394 --> 00:54:33,376
or a cutscene starts or whatever?

1060
00:54:33,376 --> 00:54:37,518
Oh, so that would be much more of a question for engineers.

1061
00:54:37,518 --> 00:54:40,259
But as far as I was aware, they were,

1062
00:54:41,001 --> 00:54:47,024
basically pausing the sim, telling the sim to stop evaluating before they knew a character was going to teleport.

1063
00:54:47,024 --> 00:54:52,027
They'd teleport the character so that the sim would be unaware that the character had moved,

1064
00:54:52,027 --> 00:54:56,409
and then they'd always give it a couple of seconds to settle, a couple of frames, sorry,

1065
00:54:56,409 --> 00:55:01,392
before the cinematic to let the sim settle into place in its new pose.

1066
00:55:01,392 --> 00:55:05,054
Because usually not only was it a teleport, but it was also a pose change.

1067
00:55:05,875 --> 00:55:09,956
That being said, we made sure that a lot of our cloth,

1068
00:55:09,956 --> 00:55:12,496
when we were doing dramatic teleports on our characters,

1069
00:55:12,496 --> 00:55:18,138
animation had to match the pose from between the moves.

1070
00:55:18,138 --> 00:55:20,718
Because if they match the pose, then it

1071
00:55:20,718 --> 00:55:24,219
was much less likely to cause any kind of popping issues

1072
00:55:24,219 --> 00:55:24,519
as well.

1073
00:55:24,519 --> 00:55:27,860
So it was a little bit of content changes we had to do,

1074
00:55:27,860 --> 00:55:31,461
and also changes on the engine to make sure

1075
00:55:31,461 --> 00:55:33,061
that it was smooth.

1076
00:55:33,061 --> 00:55:33,542
Thank you.

1077
00:55:36,422 --> 00:55:36,802
Hey, hello.

1078
00:55:36,802 --> 00:55:37,783
Hi, there.

1079
00:55:37,783 --> 00:55:38,043
I'm here.

1080
00:55:38,043 --> 00:55:39,984
Thank you for your talk.

1081
00:55:39,984 --> 00:55:43,487
I was curious if you used the same techniques

1082
00:55:43,487 --> 00:55:48,050
for environment art, like flags or maybe curtains.

1083
00:55:48,050 --> 00:55:51,313
And did you have any kind of interaction

1084
00:55:51,313 --> 00:55:53,014
with other rigid bodies?

1085
00:55:54,336 --> 00:55:59,939
So as far as I'm aware, all of our flags and things in the background were all vertex animation.

1086
00:55:59,939 --> 00:56:06,924
So they were all pre-simmed and then cached out into Olympic caches or something similar

1087
00:56:06,924 --> 00:56:08,165
like that.

1088
00:56:08,165 --> 00:56:14,189
And then they also, because of that, didn't have any kind of real-time physics running

1089
00:56:14,189 --> 00:56:18,572
on them, so they didn't have any kind of need for reacting with other collidables or other

1090
00:56:18,572 --> 00:56:19,392
interactive objects.

1091
00:56:19,392 --> 00:56:22,134
They were usually out of the way where the player couldn't get at them anyways.

1092
00:56:22,831 --> 00:56:23,912
Okay, thank you.

1093
00:56:23,912 --> 00:56:24,512
Thank you.

1094
00:56:24,512 --> 00:56:28,154
Hi, I was wondering, given your current setup

1095
00:56:28,154 --> 00:56:30,275
and how you're hoping to move forward,

1096
00:56:30,275 --> 00:56:34,337
how realistic would it be to add removing cloth

1097
00:56:34,337 --> 00:56:36,899
or putting on a shirt?

1098
00:56:36,899 --> 00:56:38,640
Sorry, the question was?

1099
00:56:38,640 --> 00:56:42,102
Do you think you'll soon be able to put on one of those,

1100
00:56:42,102 --> 00:56:44,003
like the suits, or remove it,

1101
00:56:44,003 --> 00:56:46,324
or have a character interact with it?

1102
00:56:46,324 --> 00:56:51,227
Oh, you mean like a disrobing scene or something like that?

1103
00:56:51,227 --> 00:56:51,267
Ah!

1104
00:56:51,841 --> 00:56:56,583
No, no, I mean, so we had instances like that with,

1105
00:56:56,583 --> 00:56:59,504
with specifically a couple of points,

1106
00:56:59,504 --> 00:57:01,625
Peter pulls off his mask in the game,

1107
00:57:01,625 --> 00:57:05,446
and those were often a mix of Sims and Maya,

1108
00:57:05,446 --> 00:57:08,148
and also animator, animators animating,

1109
00:57:08,148 --> 00:57:11,549
to have like cloth removal scenes, like.

1110
00:57:12,129 --> 00:57:17,536
Especially real time, like I feel like that would be such a challenge that it wouldn't make sense to do it in real time

1111
00:57:17,536 --> 00:57:20,920
You'd probably want it because usually it's for a cinematic instance

1112
00:57:20,920 --> 00:57:27,348
So you'd probably want to you know do that with big simulations because you have a lot more control over the situation

1113
00:57:27,348 --> 00:57:30,953
At that time and there's a lot more solutions out there for that

1114
00:57:30,953 --> 00:57:31,513
Thank you. Thank you

1115
00:57:34,085 --> 00:57:38,049
Quite often when you simulate cloth, especially in real time,

1116
00:57:38,049 --> 00:57:43,814
you have this jiggly motion from just not enough iterations

1117
00:57:43,814 --> 00:57:45,576
or lower resolution.

1118
00:57:45,576 --> 00:57:50,160
And the usual way to solve it is apply drug.

1119
00:57:51,289 --> 00:57:53,330
drag and air resistance.

1120
00:57:53,330 --> 00:57:56,211
And I noticed that in your videos,

1121
00:57:56,211 --> 00:57:58,913
there is a fair amount of drag.

1122
00:57:58,913 --> 00:58:02,074
I'm wondering if you hit the point

1123
00:58:02,074 --> 00:58:05,275
when the artists wanted you to remove the drag,

1124
00:58:05,275 --> 00:58:09,217
but at the same time, keep cloth feeling dense

1125
00:58:09,217 --> 00:58:11,918
so that it doesn't fall like this,

1126
00:58:11,918 --> 00:58:13,879
but rather fall like this.

1127
00:58:13,879 --> 00:58:14,960
Yes, yes.

1128
00:58:14,960 --> 00:58:18,021
And if so, then what were your solutions?

1129
00:58:18,512 --> 00:58:21,034
Well, so first of all, we were the artists in this case.

1130
00:58:21,034 --> 00:58:23,697
We were the ones authoring the cloth

1131
00:58:23,697 --> 00:58:27,139
and usually providing feedback on the cloth.

1132
00:58:27,139 --> 00:58:29,421
I would say that we did sacrifice behavior

1133
00:58:29,421 --> 00:58:33,785
a lot of the time for the fact that we didn't want it to clip.

1134
00:58:33,785 --> 00:58:38,509
And because of that, it meant that, like a lot of our cloth

1135
00:58:38,509 --> 00:58:39,910
setups, could be quite restricted.

1136
00:58:39,910 --> 00:58:42,592
And generally, I settled on getting behavior

1137
00:58:42,592 --> 00:58:46,075
that meant that the cloth was much more.

1138
00:58:46,775 --> 00:58:52,138
stable than trying to tune it for a specific type of behavior.

1139
00:58:52,138 --> 00:59:01,341
So in the instance of drag, a lot of time I don't know if I'd pay as much attention to that as I was just making sure that it didn't go through the legs or whatever.

1140
00:59:01,341 --> 00:59:07,023
Because especially if your character's wearing black pants and you've got a white lab coat and it goes straight through,

1141
00:59:07,023 --> 00:59:15,106
for me that is instantly much more noticeable and takes you out of the experience more than it not behaving one-to-one as it should.

1142
00:59:15,647 --> 00:59:19,328
So in instances where we didn't have to worry about collision,

1143
00:59:19,328 --> 00:59:21,770
I'm sure we would play with the behavior of the cloth a lot

1144
00:59:21,770 --> 00:59:26,512
more, but definitely we were accounting for not

1145
00:59:26,512 --> 00:59:33,055
breaking the realism of clipping stuff over anything else.

1146
00:59:33,055 --> 00:59:33,355
Of course.

1147
00:59:33,355 --> 00:59:33,616
Thank you.

1148
00:59:33,616 --> 00:59:33,756
Yep.

1149
00:59:33,756 --> 00:59:33,876
Cheers.

1150
00:59:33,876 --> 00:59:38,338
Thanks for a great presentation.

1151
00:59:38,338 --> 00:59:40,899
I'm wondering how much did you have

1152
00:59:40,899 --> 00:59:44,381
to use events in the cut scenes to control the cloth?

1153
00:59:45,078 --> 00:59:46,538
Not that much.

1154
00:59:46,538 --> 00:59:50,740
So a lot of that, like, my approach to doing the cloth

1155
00:59:50,740 --> 00:59:53,701
was make sure that the base is as good as I get it.

1156
00:59:53,701 --> 00:59:56,282
And we, like, those things can quickly scale out of control.

1157
00:59:56,282 --> 01:00:00,423
Like, if you altered the behavior in a scene,

1158
01:00:00,423 --> 01:00:04,124
then if you made changes to the base cloth,

1159
01:00:04,124 --> 01:00:07,026
it wasn't additive or wouldn't take that into account.

1160
01:00:07,026 --> 01:00:09,746
So it was kind of like a permanent change to the cloth.

1161
01:00:10,107 --> 01:00:13,510
So we always tried to solve the solution,

1162
01:00:13,510 --> 01:00:15,212
solve the clock at the root,

1163
01:00:15,212 --> 01:00:20,337
rather than use the events that would affect it in runtime.

1164
01:00:20,337 --> 01:00:22,899
And this is mainly just because, yeah,

1165
01:00:22,899 --> 01:00:26,062
like that stuff gets way out of hand way fast,

1166
01:00:26,062 --> 01:00:28,985
and I'd rather have a solid core solution

1167
01:00:28,985 --> 01:00:30,767
than be patching things all over the place.

1168
01:00:31,528 --> 01:00:34,510
Yeah, and if you were teleporting a character

1169
01:00:34,510 --> 01:00:35,731
like within a cutscene,

1170
01:00:35,731 --> 01:00:35,971
were that,

1171
01:00:35,971 --> 01:00:39,233
did your system solve that as well?

1172
01:00:39,233 --> 01:00:42,695
Did you have to specify like now

1173
01:00:42,695 --> 01:00:43,996
the character is teleporting?

1174
01:00:43,996 --> 01:00:44,716
We had flags.

1175
01:00:44,716 --> 01:00:48,758
We had flags that we would set on characters

1176
01:00:48,758 --> 01:00:52,781
to say this character is teleporting

1177
01:00:52,781 --> 01:00:55,442
and please apply this kind of behavior on them.

1178
01:00:55,442 --> 01:00:55,602
So yeah.

1179
01:00:55,602 --> 01:00:56,383
Okay, cool, thanks.

1180
01:00:56,383 --> 01:00:56,643
Cheers.

1181
01:00:58,869 --> 01:00:58,989
Hi.

1182
01:00:58,989 --> 01:01:04,630
You said that you were missing in-game debug for the code.

1183
01:01:04,630 --> 01:01:05,210
Yep.

1184
01:01:05,210 --> 01:01:07,190
In-game visualization.

1185
01:01:07,190 --> 01:01:09,771
Was it hard to do for the core team?

1186
01:01:09,771 --> 01:01:12,251
I don't know if how has the possibility or the API

1187
01:01:12,251 --> 01:01:15,692
for doing some things like that.

1188
01:01:15,692 --> 01:01:20,193
So the question was, we lacked debug information.

1189
01:01:20,193 --> 01:01:22,253
And oh, sorry.

1190
01:01:22,253 --> 01:01:28,114
Were you going to say something else?

1191
01:01:29,095 --> 01:01:32,517
Oh, so we lacked information, debug information,

1192
01:01:32,517 --> 01:01:34,197
and the engine.

1193
01:01:34,197 --> 01:01:36,438
And was this hard to add for core?

1194
01:01:36,438 --> 01:01:39,400
And it was less of this would have been hard to add for core,

1195
01:01:39,400 --> 01:01:42,921
and that our core team is amazing,

1196
01:01:42,921 --> 01:01:49,724
but they are always planned way ahead in advance.

1197
01:01:50,827 --> 01:01:53,908
Pitching for their time, you have

1198
01:01:53,908 --> 01:01:54,868
to have a pretty strong case.

1199
01:01:54,868 --> 01:01:57,529
And we were able to work around the constraints we were given.

1200
01:01:57,529 --> 01:02:01,390
Given that, however, now that this project is done,

1201
01:02:01,390 --> 01:02:04,431
our core team is taking time into adding debug information

1202
01:02:04,431 --> 01:02:04,871
into our engine.

1203
01:02:04,871 --> 01:02:08,432
And they are trying to give us those features now.

1204
01:02:08,432 --> 01:02:11,312
But it was one of those things that came online

1205
01:02:11,312 --> 01:02:14,053
as we were making the game.

1206
01:02:14,053 --> 01:02:15,413
And we didn't.

1207
01:02:16,022 --> 01:02:20,023
We, our core team just couldn't give the time at the time.

1208
01:02:20,023 --> 01:02:22,504
There was much more pressing issues to solve.

1209
01:02:22,504 --> 01:02:24,085
And we had workarounds for it.

1210
01:02:24,085 --> 01:02:26,866
Okay, so it wasn't a limitation in Havoc,

1211
01:02:26,866 --> 01:02:28,587
but it was a time issue.

1212
01:02:28,587 --> 01:02:30,307
No, but it was something that our core team

1213
01:02:30,307 --> 01:02:32,788
would definitely have to build themselves.

1214
01:02:32,788 --> 01:02:35,569
Like, Havoc has API hooks to let you do that.

1215
01:02:35,569 --> 01:02:37,330
It just, they need to write it.

1216
01:02:37,330 --> 01:02:40,031
And we just didn't have the time scoped for that.

1217
01:02:40,031 --> 01:02:40,831
Thank you.

1218
01:02:40,831 --> 01:02:41,052
Cheers.

1219
01:02:42,414 --> 01:02:44,835
Hi Sophie, fantastic presentation, I'm sorry to keep you.

1220
01:02:44,835 --> 01:02:47,336
Very quick one, would you worry too much about a character,

1221
01:02:47,336 --> 01:02:51,197
say for example if you had a character with a cape

1222
01:02:51,197 --> 01:02:52,137
and it were to fall off a ledge,

1223
01:02:52,137 --> 01:02:54,058
would you worry too much about that cape

1224
01:02:54,058 --> 01:02:56,299
clipping into the platform that's just fallen off,

1225
01:02:56,299 --> 01:02:57,479
for example?

1226
01:02:57,479 --> 01:03:01,460
So, the question was, if we had a character with a cape,

1227
01:03:01,460 --> 01:03:04,301
were we worried about the cape clipping into a ledge?

1228
01:03:04,301 --> 01:03:05,082
Well,

1229
01:03:05,897 --> 01:03:09,080
most of our characters didn't have cloth that long,

1230
01:03:09,080 --> 01:03:10,902
or at least playable characters.

1231
01:03:10,902 --> 01:03:14,106
So, for example, the only one I think that had cloth that long

1232
01:03:14,106 --> 01:03:15,568
was maybe Sable.

1233
01:03:15,568 --> 01:03:18,311
And Sable was always in cinematics,

1234
01:03:18,311 --> 01:03:20,513
at least in the base game.

1235
01:03:20,513 --> 01:03:20,634
So.

1236
01:03:21,575 --> 01:03:25,857
we just had to make sure the cinematic was planned around that

1237
01:03:25,857 --> 01:03:27,538
and that we accounted for that as well.

1238
01:03:27,538 --> 01:03:30,699
If, for example, she was going to jump over a ledge

1239
01:03:30,699 --> 01:03:31,940
and the cloth was going to catch,

1240
01:03:31,940 --> 01:03:34,381
we would make sure that actually happens

1241
01:03:34,381 --> 01:03:36,422
by adding in some sort of collider object.

1242
01:03:36,422 --> 01:03:39,864
But, yeah, it would be nice to get also collision

1243
01:03:39,864 --> 01:03:41,125
with the environment as well,

1244
01:03:41,125 --> 01:03:45,647
but for our purposes, that was needed so rarely

1245
01:03:45,647 --> 01:03:47,128
that we were able to animate it

1246
01:03:47,128 --> 01:03:49,129
with colliders and the files themselves.

1247
01:03:49,129 --> 01:03:50,789
Thank you very much.

1248
01:03:50,789 --> 01:03:51,370
Cheers, thank you.

1249
01:03:53,728 --> 01:03:54,613
So how's we good?

1250
01:03:54,613 --> 01:03:54,915
Time out.

1251
01:03:54,915 --> 01:03:56,564
All right, we're done.

1252
01:03:56,564 --> 01:03:57,006
Thank you.

