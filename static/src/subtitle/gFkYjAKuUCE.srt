1
00:00:06,275 --> 00:00:12,903
Obviously it's a massive spoiler warning you're going to see not the entire end of the game, but yeah.

2
00:00:12,903 --> 00:00:20,132
Towards the end of inside this happens.

3
00:00:25,030 --> 00:00:31,174
The HODL, a compound polyhumanoid blob of muscle, fat, skin and bones.

4
00:00:31,174 --> 00:00:35,817
A project-spanning experiment involving constant iteration across several fields.

5
00:00:35,817 --> 00:00:42,742
During the six years of production, the HODL was worked upon at any given moment, from

6
00:00:42,742 --> 00:00:43,762
the beginning to the end.

7
00:00:43,762 --> 00:00:50,086
Almost all of Playdead have laid hands on it, in some way or another.

8
00:00:51,062 --> 00:00:54,764
And we are going to give you a peek at what makes this monstrosity.

9
00:00:54,764 --> 00:00:58,106
The movement conceptualization that I did.

10
00:00:58,106 --> 00:01:02,489
The physicality of the main body or the core that Lasse did.

11
00:01:02,489 --> 00:01:09,113
The handling of auxiliary attachments, legs, arms, torsos that Søren did.

12
00:01:09,113 --> 00:01:12,336
And finally shading the beast, that's Mikkel.

13
00:01:12,336 --> 00:01:19,941
If you haven't seen the huddle before, of course, yeah, this is the same video.

14
00:01:20,808 --> 00:01:27,151
The huddle does things, comes out of water, crashes through stuff.

15
00:01:27,151 --> 00:01:34,575
And this goes on for a lengthy 20 or 30 minutes time.

16
00:01:34,575 --> 00:01:39,858
I'm Andreas Norman Grønvede and I'm the animator at Playdead.

17
00:01:39,858 --> 00:01:44,881
I was invited to Playdead in 2011 to do the animations for Inside.

18
00:01:44,881 --> 00:01:47,423
And my first assignment was to do...

19
00:01:48,595 --> 00:01:51,376
concept animations for this beautiful thing.

20
00:01:51,376 --> 00:01:54,658
This is a drawing of a potato by Morten Bramsen, our lead

21
00:01:54,658 --> 00:01:57,999
artist, and it is often referred to as the huddle

22
00:01:57,999 --> 00:01:59,780
drawing in the company.

23
00:01:59,780 --> 00:02:02,942
Because throughout production, we would often refer to this

24
00:02:02,942 --> 00:02:09,785
drawing when taking decisions on modeling, shading, lighting,

25
00:02:09,785 --> 00:02:12,066
shadowing, and not just for the huddle, but

26
00:02:12,066 --> 00:02:13,286
for the entire game.

27
00:02:14,384 --> 00:02:19,707
It is visually distinctive, but it doesn't show a lot of motion

28
00:02:19,707 --> 00:02:24,170
apart from what is naturally embedded in a picture.

29
00:02:24,170 --> 00:02:27,112
And as an animator, the first thing I thought about when I saw this

30
00:02:27,112 --> 00:02:32,695
was the demonized boar god, Nako, that chases Azteca around

31
00:02:32,695 --> 00:02:36,978
in the forest, in the woods, in Princess Mononoke.

32
00:02:36,978 --> 00:02:38,699
It's aggressive.

33
00:02:38,699 --> 00:02:41,321
It's violent.

34
00:02:42,240 --> 00:02:46,404
But most importantly of all, it morphs and recalibrates

35
00:02:46,404 --> 00:02:51,567
to sort of accommodate its mission.

36
00:02:51,567 --> 00:02:56,211
So if it needs a leg or an arm at some point on its body,

37
00:02:56,211 --> 00:02:57,252
it'll just spawn it.

38
00:02:57,252 --> 00:03:00,674
Another thing I couldn't stop thinking about

39
00:03:00,674 --> 00:03:04,978
was the old physics-driven stickiness game, GISH,

40
00:03:04,978 --> 00:03:07,239
where you play this little squishy.

41
00:03:09,153 --> 00:03:11,595
oily blob of something.

42
00:03:11,595 --> 00:03:16,100
And it deforms and it squeezes to kind of get through small

43
00:03:16,100 --> 00:03:17,461
gaps in the levels.

44
00:03:17,461 --> 00:03:21,064
If you put arms and legs and general disgust on this, you

45
00:03:21,064 --> 00:03:23,247
kind of get a charming little bouncy huddle.

46
00:03:23,247 --> 00:03:30,814
Another thing that I used as inspiration for the limbs, the

47
00:03:30,814 --> 00:03:32,696
arms and legs, was crowd surfing.

48
00:03:34,111 --> 00:03:37,278
In crowd surfing, in the crowd there's a lot of hands,

49
00:03:37,278 --> 00:03:40,264
and they sort of share a common goal.

50
00:03:40,264 --> 00:03:40,885
Some of them.

51
00:03:41,846 --> 00:03:44,507
Well, they all want to move the CrowdSurfer,

52
00:03:44,507 --> 00:03:48,127
but some of them does that gently.

53
00:03:48,127 --> 00:03:50,768
Others try and keep the CrowdSurfer fixed

54
00:03:50,768 --> 00:03:52,929
in a certain position.

55
00:03:52,929 --> 00:03:56,069
And some just wants to tear down the CrowdSurfer.

56
00:03:56,069 --> 00:04:01,110
And this sort of mixture of motifs in a crowd

57
00:04:01,110 --> 00:04:04,871
is a great inspiration for how the huddle actually is.

58
00:04:07,105 --> 00:04:11,387
a large cluster of individuals with a common goal,

59
00:04:11,387 --> 00:04:14,209
but with different motifs.

60
00:04:14,209 --> 00:04:17,731
So I made this really quick.

61
00:04:18,245 --> 00:04:20,447
rough huddle rig.

62
00:04:20,447 --> 00:04:24,669
It consists of, it has four bones in the spine,

63
00:04:24,669 --> 00:04:27,130
and it has about 20 bones scattered

64
00:04:27,130 --> 00:04:29,191
around the surface of it.

65
00:04:29,191 --> 00:04:33,314
It has six legs, six arms, no, four arms,

66
00:04:33,314 --> 00:04:36,916
three torsos, and two bodies that are free-floating

67
00:04:36,916 --> 00:04:40,798
so I could pull limbs and torsos into the potato

68
00:04:40,798 --> 00:04:43,800
and stick them out again somewhere else.

69
00:04:44,909 --> 00:04:46,170
if I needed it.

70
00:04:46,170 --> 00:04:49,692
It's really quick to animate, and there's no complicated tech

71
00:04:49,692 --> 00:04:52,513
to get in the way.

72
00:04:52,513 --> 00:04:58,077
So here comes a bunch, a couple of animations

73
00:04:58,077 --> 00:05:03,160
I did for concept before we even started working on the huddle.

74
00:05:03,160 --> 00:05:05,661
This is the huddle first time standing up.

75
00:05:05,661 --> 00:05:08,603
You can see it here.

76
00:05:09,482 --> 00:05:13,346
It's actually done as early as late 2010.

77
00:05:13,346 --> 00:05:20,193
And all of these animations sort of drove the locomotive

78
00:05:20,193 --> 00:05:22,074
development of the huddle in years to come.

79
00:05:24,015 --> 00:05:27,176
And please disregard the rendering and the visuals

80
00:05:27,176 --> 00:05:30,716
of it, the lighting, and the quality of the video.

81
00:05:30,716 --> 00:05:32,437
So it's just movement.

82
00:05:32,437 --> 00:05:34,377
These are the huddle's first steps.

83
00:05:34,377 --> 00:05:38,018
Martin Stianessen, our lead sound designer,

84
00:05:38,018 --> 00:05:41,979
was kind enough to put some of his sounds

85
00:05:41,979 --> 00:05:45,640
onto this test from his elaborate recordings

86
00:05:45,640 --> 00:05:47,581
of oily, naked people getting slapped

87
00:05:47,581 --> 00:05:50,922
with large pieces of meat.

88
00:05:50,922 --> 00:05:51,822
I hope there's sound on.

89
00:05:51,822 --> 00:05:52,542
Oh, there is.

90
00:05:58,298 --> 00:06:01,040
It's just going to watch it again.

91
00:06:01,040 --> 00:06:03,482
This is really embarrassing for me,

92
00:06:03,482 --> 00:06:08,265
because I don't really want to show these animations.

93
00:06:08,265 --> 00:06:10,767
My original plan was for the huddle

94
00:06:10,767 --> 00:06:14,109
to have a lot of idles for when there was no input

95
00:06:14,109 --> 00:06:16,351
from the audience, from the player.

96
00:06:16,351 --> 00:06:19,393
So when it was standing still, the huddle

97
00:06:19,393 --> 00:06:25,937
could have many activities for it to do in idle state,

98
00:06:25,937 --> 00:06:27,358
and one of them being peeing.

99
00:06:29,034 --> 00:06:32,395
peeing on itself and slipping in it.

100
00:06:32,395 --> 00:06:38,077
And here's a potpourri of some simple idols I did.

101
00:06:38,077 --> 00:06:47,300
There's some scratching, a little twitch in the leg,

102
00:06:47,300 --> 00:06:54,403
an internal conflict at the top, some more scratching,

103
00:06:54,403 --> 00:06:56,943
and some dog scratching.

104
00:06:58,282 --> 00:07:01,502
And a bird landing at the top, which we actually

105
00:07:01,502 --> 00:07:03,482
implemented towards the end.

106
00:07:03,482 --> 00:07:06,123
In the forest scene where the huddle runs around,

107
00:07:06,123 --> 00:07:08,223
there's birds landing on it.

108
00:07:08,223 --> 00:07:10,724
So that's pretty cool.

109
00:07:10,724 --> 00:07:12,184
Six years before.

110
00:07:12,184 --> 00:07:13,484
Yeah, he wants it to get back.

111
00:07:13,484 --> 00:07:14,164
It's cute.

112
00:07:14,164 --> 00:07:19,805
Here the huddle lifts a large crate that is reproduced as

113
00:07:19,805 --> 00:07:21,626
well in the inside.

114
00:07:21,626 --> 00:07:25,346
There's this point where the huddle pulls a large server

115
00:07:25,346 --> 00:07:27,707
out of the wall and brings it to the other side of the room.

116
00:07:32,290 --> 00:07:35,632
So it can get on top and.

117
00:07:35,632 --> 00:07:43,578
Get over a tall ledge, which is here. You can see the scrambling behavior of the lakes.

118
00:07:43,578 --> 00:07:53,345
My idea was that the legs would sort of help in every way they could, even though they didn't have ground contact or contact with the wall so you can see that.

119
00:07:54,685 --> 00:07:59,627
back side lakes. They sort of they tried to still at forced to the hot and some

120
00:07:59,627 --> 00:08:00,187
peddling

121
00:08:00,187 --> 00:08:02,588
and of course we would

122
00:08:02,588 --> 00:08:09,631
you lies the natural squishiness of the huddle so here it pushes itself through

123
00:08:09,631 --> 00:08:10,951
some narrow gap in the wall

124
00:08:10,951 --> 00:08:17,353
and sadly, there's no gap like this in the game because we deleted it but

125
00:08:17,353 --> 00:08:21,795
he does push itself through a door and a hatch.

126
00:08:23,807 --> 00:08:26,469
in the floor at some point in the game.

127
00:08:26,469 --> 00:08:28,590
Walking on ice, of course, if we needed it.

128
00:08:28,590 --> 00:08:33,432
Sadly, we didn't make any ice in the game,

129
00:08:33,432 --> 00:08:36,374
but we do have a newly mopped floor at some point.

130
00:08:36,374 --> 00:08:41,336
And there's a spot in the game where you convert

131
00:08:41,336 --> 00:08:43,618
a CEO to a bloody mess.

132
00:08:43,618 --> 00:08:47,280
And then the huddle will skid around in the blood that remains.

133
00:08:50,052 --> 00:08:53,840
Yeah, it's nervous about ice for some weird reason.

134
00:08:57,089 --> 00:08:58,810
Here's one of the last animations I did.

135
00:08:58,810 --> 00:09:03,333
It's an inspiration for the pendulum scene in Inside,

136
00:09:03,333 --> 00:09:06,535
where the huddle kind of grabs onto a swinging crane

137
00:09:06,535 --> 00:09:08,836
and swings the crane back and forth

138
00:09:08,836 --> 00:09:14,840
to pull out a piece of wall to get through the wall.

139
00:09:14,840 --> 00:09:17,441
And this animation tests a couple of things.

140
00:09:17,441 --> 00:09:20,923
There's some squash and stretch in the beginning.

141
00:09:20,923 --> 00:09:21,383
Let's watch it again.

142
00:09:24,453 --> 00:09:28,037
and a little jump to grab on to the hook there.

143
00:09:28,037 --> 00:09:32,261
We talked about keeping or preserving

144
00:09:32,261 --> 00:09:35,405
the silhouette versus plausibility.

145
00:09:35,405 --> 00:09:38,248
As you see, I use only three arms at the top.

146
00:09:38,248 --> 00:09:40,711
And if we were going for plausibility,

147
00:09:40,711 --> 00:09:42,272
we would need 20 arms maybe.

148
00:09:44,770 --> 00:09:46,952
Before I started working on the actual game,

149
00:09:46,952 --> 00:09:49,113
I made 40 of these animations.

150
00:09:49,113 --> 00:09:53,255
And they gave a sense of where we were heading.

151
00:09:53,255 --> 00:09:56,697
And I like to think that the animations contributed

152
00:09:56,697 --> 00:10:00,740
as an inspiration for the team, a spot on the horizon

153
00:10:00,740 --> 00:10:02,060
to aim for.

154
00:10:02,060 --> 00:10:04,682
And needless to say, the team outdid these animations

155
00:10:04,682 --> 00:10:05,282
by miles.

156
00:10:06,833 --> 00:10:11,195
The broad audience thinks that the huddle consists of thousands

157
00:10:11,195 --> 00:10:14,577
upon thousands of animations strung together in sequence.

158
00:10:14,577 --> 00:10:17,178
And that's not true, nor is it feasible.

159
00:10:17,178 --> 00:10:20,260
Every game developer might already know this.

160
00:10:20,260 --> 00:10:23,641
So I didn't make the huddle.

161
00:10:23,641 --> 00:10:26,423
I just animated a bit on it before we actually did it.

162
00:10:26,423 --> 00:10:31,605
And since it's not animated, these guys

163
00:10:31,605 --> 00:10:33,686
had to use magic in my book to do it.

164
00:10:33,686 --> 00:10:34,507
Up next is Lasse.

165
00:10:38,812 --> 00:10:38,972
So.

166
00:10:38,972 --> 00:10:49,139
Right.

167
00:10:49,139 --> 00:10:49,259
Hi.

168
00:10:49,259 --> 00:10:52,541
My name is Lasse.

169
00:10:52,541 --> 00:10:56,024
I am a senior programmer at Playdead.

170
00:10:56,024 --> 00:10:59,566
And I'm going to do the next part

171
00:10:59,566 --> 00:11:03,068
and talk a little bit about the HODL core physics.

172
00:11:04,896 --> 00:11:09,760
So as Andreas just mentioned, the huddle

173
00:11:09,760 --> 00:11:12,642
isn't really animated by conventional means.

174
00:11:12,642 --> 00:11:16,546
It's animated through physics simulation.

175
00:11:16,546 --> 00:11:19,628
So we have a skinned mesh at the end of the day.

176
00:11:19,628 --> 00:11:22,271
And the bones of this mesh, they're

177
00:11:22,271 --> 00:11:25,153
just bound to some dynamic bodies

178
00:11:25,153 --> 00:11:26,494
set by the physics engine.

179
00:11:28,304 --> 00:11:33,085
It's using a custom physics model developed by Thomas Cole

180
00:11:33,085 --> 00:11:36,787
and every frame and the huddle call reads and analyzes

181
00:11:36,787 --> 00:11:39,288
the world around it.

182
00:11:39,288 --> 00:11:41,849
A ton of internal impulses are generated

183
00:11:41,849 --> 00:11:43,930
and it sinks these back constantly

184
00:11:43,930 --> 00:11:45,751
to the physics engine.

185
00:11:45,751 --> 00:11:48,952
The huddle core is kind of like a it's like a piece

186
00:11:48,952 --> 00:11:52,613
that you would say, OK, this is a central piece

187
00:11:52,613 --> 00:11:57,295
and it's central in a set of largely independent systems.

188
00:11:58,529 --> 00:12:03,591
And many of these independently generating impulses that affect the call.

189
00:12:03,591 --> 00:12:09,132
So the end result is a system like a total system that is very right for

190
00:12:09,132 --> 00:12:11,013
emergent behavior.

191
00:12:11,013 --> 00:12:12,313
Something unexpected.

192
00:12:12,313 --> 00:12:16,495
We tweaked and we tweaked and we tweaked.

193
00:12:16,495 --> 00:12:21,336
We spent a lot of time tweaking the totality of this system so that it

194
00:12:21,336 --> 00:12:24,797
would feel really good and be interesting to play with.

195
00:12:27,077 --> 00:12:34,419
I would like to show you a short video just to start off with some debug overlays of the internal impulses and velocities in the core,

196
00:12:34,419 --> 00:12:38,639
just to give you an idea of the amount of acting forces.

197
00:13:00,972 --> 00:13:01,334
Oh.

198
00:13:08,346 --> 00:13:13,650
So there's still a lot of stuff going on this lots of forces in there.

199
00:13:13,650 --> 00:13:17,313
So let's go through the different components of the model that the custom

200
00:13:17,313 --> 00:13:20,115
physics model and dissected of it.

201
00:13:20,115 --> 00:13:25,259
So first of all we have in dynamic bodies and these are just rigid bodies with

202
00:13:25,259 --> 00:13:31,424
spherical it is a test for them and they're being they're governed by the

203
00:13:31,424 --> 00:13:35,947
physics engine. We here in this 26 we have 26 of them and the huddle

204
00:13:35,947 --> 00:13:37,408
and they live in the physics engine.

205
00:13:38,345 --> 00:13:43,147
Then on top of these internal or the dynamic bodies, we have same number of

206
00:13:43,147 --> 00:13:46,189
internal bones and these are structures that cash, uh,

207
00:13:46,189 --> 00:13:49,830
the various properties of the, the dynamic bodies,

208
00:13:49,830 --> 00:13:51,711
such as position, velocity, mass, et cetera.

209
00:13:51,711 --> 00:13:58,035
And these bones also responsible for the accumulation of internal impulses that

210
00:13:58,035 --> 00:13:59,415
are synced back to the physics.

211
00:14:01,273 --> 00:14:06,655
And on top of the internal bones we have and it isn't the graph

212
00:14:06,655 --> 00:14:11,876
that established edges between the closest neighbors in them

213
00:14:11,876 --> 00:14:15,677
sort of like the internal mesh of internal bones when the game

214
00:14:15,677 --> 00:14:21,058
boots up the dynamic bodies are positioned placed on us fear

215
00:14:21,058 --> 00:14:24,899
and the edges I established at this time they knew that it's

216
00:14:24,899 --> 00:14:26,699
configuration never changes.

217
00:14:28,531 --> 00:14:31,333
Every edge also has a target length.

218
00:14:31,333 --> 00:14:35,155
And the target lengths are deformed all the time.

219
00:14:35,155 --> 00:14:38,758
So every edge acts as a spring between a pair

220
00:14:38,758 --> 00:14:39,618
of internal bones.

221
00:14:39,618 --> 00:14:43,341
As I mentioned, the target lengths continuously deform.

222
00:14:43,341 --> 00:14:47,043
And they do this based on the scale and the total height

223
00:14:47,043 --> 00:14:49,324
of the core, like the configuration

224
00:14:49,324 --> 00:14:50,645
of internal bones.

225
00:14:50,645 --> 00:14:54,728
So you could imagine vertically stretching

226
00:14:54,728 --> 00:14:56,849
that initial sphere configuration

227
00:14:56,849 --> 00:14:58,370
to get the new target lengths.

228
00:15:00,184 --> 00:15:01,064
And yeah.

229
00:15:01,064 --> 00:15:06,866
Then finally, we have another pair of bones.

230
00:15:06,866 --> 00:15:08,326
And these are two spine bones.

231
00:15:08,326 --> 00:15:11,987
These are not just animated.

232
00:15:11,987 --> 00:15:14,728
And they're not just driven by physics.

233
00:15:14,728 --> 00:15:18,629
They're driven by logic states, a little bit of animation.

234
00:15:18,629 --> 00:15:22,570
And they are also updated every frame.

235
00:15:23,627 --> 00:15:28,750
And the interesting thing is that it's of these spine bones stay effect a

236
00:15:28,750 --> 00:15:31,853
cluster of the internal bones.

237
00:15:31,853 --> 00:15:36,536
So the internal bones given local positions.

238
00:15:36,536 --> 00:15:41,360
So what's a specific spine bone.

239
00:15:41,360 --> 00:15:48,305
And so when you if you take the top a spine bone and you apply talk or some

240
00:15:48,305 --> 00:15:49,406
type of impulse to it.

241
00:15:50,857 --> 00:15:55,339
and it's moving it's going to try and forced surrounding internal bones to

242
00:15:55,339 --> 00:16:01,003
follow it. So we can use these fine bones to model

243
00:16:01,003 --> 00:16:04,826
sort of a macro level motion of the internal bones.

244
00:16:04,826 --> 00:16:08,968
Essentially this is like skinning the physics.

245
00:16:08,968 --> 00:16:16,653
So now we know a little bit more about the different components, let's just

246
00:16:16,653 --> 00:16:18,955
take a look at some more debug over this.

247
00:16:20,124 --> 00:16:26,007
and yeah, the 2 spine bones drawn us couldn't frames and we have to internal

248
00:16:26,007 --> 00:16:30,368
mesh and I've added some coloring to the edges so we can see how they tense up

249
00:16:30,368 --> 00:16:36,491
and relax if they get bright their tense if they are relaxed a going purple

250
00:16:36,491 --> 00:16:40,092
and you can see how this is affecting or happening during a time.

251
00:16:40,092 --> 00:16:41,033
Yeah, it's another type of overlay where the.

252
00:16:47,613 --> 00:16:52,756
Impulses applied by the spine bones to the internal bones are colored by the

253
00:16:52,756 --> 00:16:55,698
spine bones that the impulse is originating from.

254
00:16:55,698 --> 00:17:00,981
So the green vectors in this image is like, okay, these are impulses from the bottom spine bone

255
00:17:00,981 --> 00:17:04,243
and the red vectors are impulses from the top spine bone.

256
00:17:04,243 --> 00:17:08,486
So we can see how the spine bones affect the internal bones.

257
00:17:08,486 --> 00:17:14,569
The spine of the huddle, generally speaking, is pretty important,

258
00:17:14,569 --> 00:17:16,591
so I'd like to talk a little bit more about that.

259
00:17:17,971 --> 00:17:24,955
specifically reconfiguring the spine that run time.

260
00:17:24,955 --> 00:17:28,297
So the spine. It's also the huddles of it and the huddle is

261
00:17:28,297 --> 00:17:30,598
to stand it wants to find to face upwards.

262
00:17:30,598 --> 00:17:38,983
But at the same time as if you have played the game, you may

263
00:17:38,983 --> 00:17:40,704
know the huddle tends to.

264
00:17:41,632 --> 00:17:47,416
behave in a bit unpredictable way it tends to grow and fall a lot and most

265
00:17:47,416 --> 00:17:54,041
landings the spine ends up in a in a non-vertical configuration.

266
00:17:54,041 --> 00:17:58,525
So what do you about do about these situations.

267
00:17:58,525 --> 00:18:03,789
How do we get up from this horizontal pose.

268
00:18:03,789 --> 00:18:06,531
And what we could do is rotate the spine to stand.

269
00:18:06,531 --> 00:18:10,474
But maybe you agree that this looks a little bit silly.

270
00:18:12,219 --> 00:18:19,247
So what we are doing is that we reconfigure the spine bones so that the internal structure,

271
00:18:19,247 --> 00:18:20,468
the core, will rise vertically.

272
00:18:21,405 --> 00:18:27,329
and there's some small issues here so if we just do this for just say OK here's

273
00:18:27,329 --> 00:18:28,870
the new spine configuration.

274
00:18:28,870 --> 00:18:33,114
These are your new it's links to the internal mesh.

275
00:18:33,114 --> 00:18:38,518
Then we're going to get a pop because suddenly the constraints are all

276
00:18:38,518 --> 00:18:45,163
different and and for a few frames are going to get very strong forces so that

277
00:18:45,163 --> 00:18:50,146
the springs can contract or expand to match the new configuration.

278
00:18:50,974 --> 00:18:52,956
We work very hard to avoid all

279
00:18:52,956 --> 00:18:56,559
the kinds of visible pops in the game to

280
00:18:56,559 --> 00:19:00,743
to to get the

281
00:19:00,743 --> 00:19:03,526
expression that we were going for and

282
00:19:03,526 --> 00:19:06,769
we used a lot of plans and in the same in

283
00:19:06,769 --> 00:19:09,031
this case we just we just

284
00:19:09,031 --> 00:19:11,193
landed the its links to mask the pop

285
00:19:11,193 --> 00:19:15,017
and and the result was satisfying in

286
00:19:15,017 --> 00:19:16,058
pretty much all cases.

287
00:19:19,468 --> 00:19:25,471
Coming back up a little bit to surface level.

288
00:19:25,471 --> 00:19:29,533
So the huddle is comprised of many types of systems.

289
00:19:29,533 --> 00:19:34,375
You can make a division between these.

290
00:19:34,375 --> 00:19:35,696
So there is the core.

291
00:19:35,696 --> 00:19:39,358
And the core, you can consider it the internal bones

292
00:19:39,358 --> 00:19:41,418
on top of the dynamic bodies, the spine bones,

293
00:19:41,418 --> 00:19:43,439
and the internal mesh, the constraints

294
00:19:43,439 --> 00:19:44,720
that hold all this together.

295
00:19:45,646 --> 00:19:50,368
Then next to that you have a ton of logic states and even more

296
00:19:50,368 --> 00:19:53,670
auxiliary systems that all affect and feed

297
00:19:53,670 --> 00:19:54,430
into the huddle core.

298
00:19:54,430 --> 00:19:56,831
As I mentioned, the core is the part

299
00:19:56,831 --> 00:20:00,613
that is responsible for holding the model together.

300
00:20:00,613 --> 00:20:02,574
It was a huge piece of work in its own right.

301
00:20:02,574 --> 00:20:04,935
It maintains edge lengths and drives spine bones.

302
00:20:04,935 --> 00:20:07,536
It receives impulses from other systems,

303
00:20:07,536 --> 00:20:11,118
and then it talks to the engine and handles all of that.

304
00:20:12,443 --> 00:20:15,844
control impulses on the other hand they come mainly from the logic states so

305
00:20:15,844 --> 00:20:18,625
what happens when you push the stick left or right

306
00:20:18,625 --> 00:20:19,205
that's driven by

307
00:20:19,205 --> 00:20:23,466
and it's a different piece of code

308
00:20:23,466 --> 00:20:24,646
of course it knows some

309
00:20:24,646 --> 00:20:27,847
thing about how the course operating

310
00:20:27,847 --> 00:20:32,808
but all of these can be considered lot systems in their own right

311
00:20:32,808 --> 00:20:37,929
some of them are really complex and they really deserve time on their own we

312
00:20:37,929 --> 00:20:38,770
don't have time for that today

313
00:20:40,996 --> 00:20:44,420
And then as I mentioned there's a ton of auxiliary systems

314
00:20:44,420 --> 00:20:49,206
visuals, visual systems, audio systems, many of those.

315
00:20:49,206 --> 00:20:52,490
And level specific systems, things that just happen in one

316
00:20:52,490 --> 00:20:54,612
place in the game.

317
00:20:54,612 --> 00:20:58,917
And all of those lovely details, there are so many of

318
00:20:58,917 --> 00:20:59,198
those.

319
00:21:00,857 --> 00:21:07,159
So we have the call and then we have

320
00:21:07,159 --> 00:21:09,760
impulses coming from control states and

321
00:21:09,760 --> 00:21:14,042
internal states and systems and

322
00:21:14,042 --> 00:21:16,843
all sorts of pieces of code that all

323
00:21:16,843 --> 00:21:20,724
have their own internal state and at the end of the day they feed

324
00:21:20,724 --> 00:21:24,806
impulses into the call and then level scripts on top of that.

325
00:21:24,806 --> 00:21:28,427
I mentioned that we have

326
00:21:29,369 --> 00:21:37,457
It was ripe for emerging behavior, and I think it's maybe you can see this when we have such

327
00:21:37,457 --> 00:21:41,220
a huge network of impulses.

328
00:21:41,220 --> 00:21:44,883
It becomes unpredictable and a bit emergent.

329
00:21:44,883 --> 00:21:51,930
What I've talked about is just the core part of it.

330
00:21:53,284 --> 00:21:59,027
and I'm going to reiterate again there are so many more things to the huddle

331
00:21:59,027 --> 00:22:02,409
and also on the programming side.

332
00:22:02,409 --> 00:22:04,530
So next up is.

333
00:22:14,321 --> 00:22:18,466
Hi, I am Søren Traudermassen. I am a gameplay programmer.

334
00:22:18,466 --> 00:22:24,874
I usually do animation programming, like the gameplay that handles playing of animations.

335
00:22:24,874 --> 00:22:30,300
And I joined this huddle thing pretty early when it was looking like that.

336
00:22:30,300 --> 00:22:32,142
Basically just a lot more buggy.

337
00:22:32,911 --> 00:22:36,973
And the task was to add a thin visual layer on top

338
00:22:36,973 --> 00:22:42,616
that would show some arms and legs to see if it was feasible

339
00:22:42,616 --> 00:22:43,216
to do whatever.

340
00:22:43,216 --> 00:22:46,037
And I was not allowed to touch the physics in any ways,

341
00:22:46,037 --> 00:22:48,058
because that was changing constantly.

342
00:22:49,410 --> 00:22:54,072
So it was pretty important to get that done early, even though it sounds like polish,

343
00:22:54,072 --> 00:22:59,213
because as you can see here, here we have a floating blob.

344
00:22:59,213 --> 00:23:04,054
And in my opinion, this does not look very convincing.

345
00:23:04,054 --> 00:23:05,815
It does not look like a big heavy mass.

346
00:23:05,815 --> 00:23:11,956
I would be really sceptic whether this thing could actually be shipped and made to work.

347
00:23:12,617 --> 00:23:16,540
But of course, here the story is that this is the final huddle.

348
00:23:16,540 --> 00:23:19,142
This is the huddle that you see in the game.

349
00:23:19,142 --> 00:23:23,205
The only thing I've done is make the legs invisible.

350
00:23:23,205 --> 00:23:30,751
So to take one of my favorite internet hypes,

351
00:23:30,751 --> 00:23:34,194
there is a bird here, some people say.

352
00:23:34,194 --> 00:23:37,357
I can only see a little hyper kid playing with his dog

353
00:23:37,357 --> 00:23:38,398
after eating too much sugar.

354
00:23:40,453 --> 00:23:42,434
And of course, the only thing that's been done

355
00:23:42,434 --> 00:23:45,155
is that someone has drawn some very crude stick arms

356
00:23:45,155 --> 00:23:45,576
on the bird.

357
00:23:45,576 --> 00:23:48,217
And all of a sudden, it's an entirely different creature.

358
00:23:48,217 --> 00:23:52,559
So if we could just draw some stick legs to the huddle

359
00:23:52,559 --> 00:23:54,801
or something early on, we would be

360
00:23:54,801 --> 00:23:58,343
able to see if this would actually be convincing.

361
00:23:58,343 --> 00:24:01,224
And I think this looks a lot more convincing

362
00:24:01,224 --> 00:24:02,485
than the other one.

363
00:24:02,485 --> 00:24:07,207
And it's the same thing, just with crude legs drawn on it.

364
00:24:07,207 --> 00:24:07,347
So.

365
00:24:08,120 --> 00:24:12,061
That was my job so this is the huddle has it looks in the end

366
00:24:12,061 --> 00:24:15,923
game and it's made up of some different parts on top of those

367
00:24:15,923 --> 00:24:18,944
polls that we saw just before we have

368
00:24:18,944 --> 00:24:22,286
like a mesh we put on a mesh. It's actually

369
00:24:22,286 --> 00:24:25,747
on the front side of the backside is just empty because

370
00:24:25,747 --> 00:24:28,408
we never seen the backside and on top of that

371
00:24:28,408 --> 00:24:31,129
mesh we at in this case 6

372
00:24:31,129 --> 00:24:34,331
legs that they added to some of the physics

373
00:24:34,331 --> 00:24:36,051
polls at the bottom of the huddle.

374
00:24:37,027 --> 00:24:40,747
Then we add six arms.

375
00:24:40,747 --> 00:24:43,348
The top left one is actually a leg,

376
00:24:43,348 --> 00:24:45,569
but it is behaving like an arm.

377
00:24:45,569 --> 00:24:46,409
And they are always there,

378
00:24:46,409 --> 00:24:48,189
and they're there to have a good silhouette.

379
00:24:48,189 --> 00:24:49,830
And if the huddle turns around,

380
00:24:49,830 --> 00:24:50,870
they reconfigure themselves,

381
00:24:50,870 --> 00:24:53,130
so they're always sitting kind of in that way.

382
00:24:53,130 --> 00:24:56,731
And then we have a lot of just motion on the front,

383
00:24:56,731 --> 00:24:58,892
a lot of body parts sticking out

384
00:24:58,892 --> 00:25:02,793
that we should animate to make it look alive and responsive.

385
00:25:03,918 --> 00:25:06,842
And then on top of that, we have several dynamic arms

386
00:25:06,842 --> 00:25:09,285
that are not on this picture because they are normally

387
00:25:09,285 --> 00:25:11,769
hidden inside the huddle, and they can shoot out

388
00:25:11,769 --> 00:25:15,374
and assist the huddle in grabbing stuff if that's needed.

389
00:25:17,212 --> 00:25:21,133
I'll start off with the blue ones, the purely visual body parts.

390
00:25:21,133 --> 00:25:24,774
In this animation here, we can see the huddle banging into a wall.

391
00:25:24,774 --> 00:25:28,815
And we see all those arms and heads and things on the front.

392
00:25:28,815 --> 00:25:35,017
And initially, we simply did that by attaching some ragdoll meshes and just gluing them on

393
00:25:35,017 --> 00:25:37,518
and then it would look like that for a long time.

394
00:25:37,518 --> 00:25:41,979
In the end, we had to switch them out with some custom-made springs because of performance

395
00:25:41,979 --> 00:25:42,499
reasons.

396
00:25:43,111 --> 00:25:47,738
And when we did that, we also had to make a system where they could retract into the body of the huddle.

397
00:25:47,738 --> 00:25:52,905
If you got near a wall, you can see the head and arms on the left, they retract here.

398
00:25:52,905 --> 00:25:56,110
We had to do that because when we removed the rectals, we also removed the collision,

399
00:25:56,110 --> 00:25:59,034
so they would clip through everything if we didn't retract them.

400
00:26:00,483 --> 00:26:16,672
We could also with this the springs that we made we added some small forces on the spring so that the bodies would squirm and and and twirl by themselves so that it doesn't look like it unconscious body parts but actually like their life and the heads of turning and looking around.

401
00:26:16,672 --> 00:26:21,654
But that's that's actually it it's just some rectals put on top of the mesh.

402
00:26:21,654 --> 00:26:25,797
So the next thing here's his when such get interesting it's with the next.

403
00:26:26,929 --> 00:26:31,513
And the task was, as you saw, the huddle was floating above

404
00:26:31,513 --> 00:26:31,893
the ground.

405
00:26:31,893 --> 00:26:34,555
And the task was to just add legs to make it look like it

406
00:26:34,555 --> 00:26:35,576
was running instead.

407
00:26:35,576 --> 00:26:37,137
I was not messing with the physics.

408
00:26:37,137 --> 00:26:37,898
It was still floating.

409
00:26:37,898 --> 00:26:40,820
But the legs would make it appear to be running.

410
00:26:40,820 --> 00:26:43,763
So what people always say is, wow, didn't you use a lot of

411
00:26:43,763 --> 00:26:44,924
animation for that?

412
00:26:44,924 --> 00:26:47,626
And this is where I'm a bit embarrassed, because I'm

413
00:26:47,626 --> 00:26:50,728
standing here at GDC and talking about this thing.

414
00:26:50,728 --> 00:26:52,510
And it's so simple.

415
00:26:52,510 --> 00:26:53,130
You could all do it.

416
00:26:53,130 --> 00:26:55,132
These are all the animations I'm using.

417
00:26:56,238 --> 00:26:59,781
I would have for running animations on top and the 2 on

418
00:26:59,781 --> 00:27:02,323
the left is for running forward to on the right is

419
00:27:02,323 --> 00:27:03,984
actually for running backwards.

420
00:27:03,984 --> 00:27:06,145
They'll be played in reverse in reverse when

421
00:27:06,145 --> 00:27:07,226
the huddle is animating.

422
00:27:07,226 --> 00:27:10,769
Then we had one animation for when the huddle is dangling

423
00:27:10,769 --> 00:27:12,590
over like a pit.

424
00:27:12,590 --> 00:27:15,092
And then two for when it's falling.

425
00:27:15,092 --> 00:27:17,374
And that is all we're using.

426
00:27:18,901 --> 00:27:21,743
So yeah, here's the algorithm for it.

427
00:27:21,743 --> 00:27:24,885
We have this green circle here.

428
00:27:24,885 --> 00:27:27,887
That's the huddle ball that we attach the legs to,

429
00:27:27,887 --> 00:27:30,669
like one of those physics balls that Lasse told you about.

430
00:27:30,669 --> 00:27:32,891
The white spot is the point where

431
00:27:32,891 --> 00:27:35,032
we choose that this leg is going to be sitting.

432
00:27:35,032 --> 00:27:38,555
Then we shoot a ray down to find the ground.

433
00:27:38,555 --> 00:27:40,116
So that's a yellow spot on the bottom.

434
00:27:40,116 --> 00:27:45,780
And we can then blend between the two running animations,

435
00:27:45,780 --> 00:27:48,022
the high and the low running animation.

436
00:27:49,013 --> 00:27:52,095
relate in relation to how far we we are from the ground.

437
00:27:52,095 --> 00:27:55,437
So that's just setting a blend value between two animations.

438
00:27:55,437 --> 00:27:58,638
Then we can use the the velocity of the physics body

439
00:27:58,638 --> 00:28:00,339
that we are attached to.

440
00:28:00,339 --> 00:28:04,221
And we can just directly map that to the run cycle animation

441
00:28:04,221 --> 00:28:04,521
speed.

442
00:28:04,521 --> 00:28:07,723
And after that, we can, as I said,

443
00:28:07,723 --> 00:28:11,725
blend between different cycles for flavor of the forward

444
00:28:11,725 --> 00:28:14,227
running or the backward running in this case.

445
00:28:14,227 --> 00:28:14,647
And that's it.

446
00:28:14,647 --> 00:28:14,927
Profit.

447
00:28:14,927 --> 00:28:15,387
We're done.

448
00:28:17,367 --> 00:28:21,750
No, except of course there's still a little bit more like for instance when

449
00:28:21,750 --> 00:28:25,334
you're running and all of a sudden you stop, then the animation will be in some

450
00:28:25,334 --> 00:28:28,897
arbitrary position and if it's in the air, no one is standing with their feet

451
00:28:28,897 --> 00:28:30,999
in the air unless they are a guru.

452
00:28:30,999 --> 00:28:35,883
So in that case we could blend into a pose in the animation where the foot is

453
00:28:35,883 --> 00:28:36,163
on the ground.

454
00:28:36,799 --> 00:28:39,460
And also, the legs should be synced differently.

455
00:28:39,460 --> 00:28:41,461
When the huddle is standing still, the legs should be

456
00:28:41,461 --> 00:28:44,222
together, because that's what most people do.

457
00:28:44,222 --> 00:28:47,423
But when it's walking, they should be as far apart in the

458
00:28:47,423 --> 00:28:50,524
animation as possible, because people don't jump normally.

459
00:28:50,524 --> 00:28:53,065
They tend to walk.

460
00:28:53,065 --> 00:28:54,085
It can also gallop.

461
00:28:54,085 --> 00:28:54,886
It can run fast.

462
00:28:54,886 --> 00:28:59,748
And when it does that, we take the animations and make them

463
00:28:59,748 --> 00:29:02,269
come like, doom, doom, doom, doom.

464
00:29:02,269 --> 00:29:04,829
And so the synchronization is like 25% apart when it's

465
00:29:04,829 --> 00:29:05,210
galloping.

466
00:29:07,246 --> 00:29:10,268
Also, the huddle could occasionally slide,

467
00:29:10,268 --> 00:29:11,830
as Andreas showed on the ice.

468
00:29:11,830 --> 00:29:13,551
And it's actually pretty easy to make

469
00:29:13,551 --> 00:29:16,213
it slide with this system, because you can just

470
00:29:16,213 --> 00:29:17,915
freeze the animation.

471
00:29:17,915 --> 00:29:21,758
Then it slides on the ground instead of animating.

472
00:29:21,758 --> 00:29:24,200
And then, of course, if the huddle runs over an edge,

473
00:29:24,200 --> 00:29:27,343
we need to have some systems to make the legs dangle

474
00:29:27,343 --> 00:29:28,003
in the right way.

475
00:29:29,200 --> 00:29:31,522
And hundreds of other tweaks along the way.

476
00:29:31,522 --> 00:29:35,404
Like generally, we tweaked the huddle as much as we could

477
00:29:35,404 --> 00:29:36,925
for the gameplay we needed.

478
00:29:36,925 --> 00:29:39,727
And if we couldn't tweak it enough, we removed the

479
00:29:39,727 --> 00:29:42,028
gameplay and made some other gameplay where the system

480
00:29:42,028 --> 00:29:42,428
worked.

481
00:29:42,428 --> 00:29:46,030
That's a pretty nice way of doing games, I guess, I think.

482
00:29:47,425 --> 00:29:49,206
So here's an example.

483
00:29:49,206 --> 00:29:50,247
It's running back and forth.

484
00:29:50,247 --> 00:29:53,388
You can see the white line is the ray cast

485
00:29:53,388 --> 00:29:54,689
that will ground the foot.

486
00:29:54,689 --> 00:29:57,530
The red line is the velocity of the physics object.

487
00:29:57,530 --> 00:29:59,651
And then it sets the animation speed.

488
00:29:59,651 --> 00:30:03,413
And then you see the animation just running back and forth

489
00:30:03,413 --> 00:30:05,354
and being grounded nice that way.

490
00:30:07,996 --> 00:30:09,857
Here's an example with the sliding.

491
00:30:09,857 --> 00:30:10,517
I love this place.

492
00:30:10,517 --> 00:30:12,939
This is my favorite place in the game.

493
00:30:12,939 --> 00:30:15,860
The floor is slippery, so the huddle will just

494
00:30:15,860 --> 00:30:17,601
slide back and forth.

495
00:30:17,601 --> 00:30:21,243
Actually, the physics here are not at all different from what

496
00:30:21,243 --> 00:30:22,864
we're seeing in the rest of the game.

497
00:30:22,864 --> 00:30:26,266
The only thing we're doing is we are stopping the animation

498
00:30:26,266 --> 00:30:27,407
when we're taking turns.

499
00:30:27,407 --> 00:30:30,008
So the feet will slide on the ground, and then we'll play a

500
00:30:30,008 --> 00:30:31,749
slide sound while it is happening.

501
00:30:31,749 --> 00:30:35,892
So I think that's a pretty nice effect.

502
00:30:37,983 --> 00:30:41,565
There was a little bit of force feedback from me.

503
00:30:41,565 --> 00:30:43,506
Normally, as I said, I didn't touch the physics.

504
00:30:43,506 --> 00:30:47,049
But when we are running, what we're doing

505
00:30:47,049 --> 00:30:49,090
is whenever a foot is being planted,

506
00:30:49,090 --> 00:30:52,052
we send up a little shock wave of impulses

507
00:30:52,052 --> 00:30:55,334
up the body of the huddle, simply

508
00:30:55,334 --> 00:30:58,056
to make it look more like an elephant with a lot

509
00:30:58,056 --> 00:30:59,657
of blubbery muscles that.

510
00:31:00,477 --> 00:31:02,540
yeah, that shake when it takes the steps.

511
00:31:02,540 --> 00:31:06,266
It's pretty difficult to see, actually,

512
00:31:06,266 --> 00:31:08,509
but when you're playing it, it makes a lot of difference.

513
00:31:08,509 --> 00:31:11,093
It does make it feel more like a human,

514
00:31:11,093 --> 00:31:14,378
or not a human, a body, like an animal,

515
00:31:14,378 --> 00:31:16,701
instead of just something translating back and forth.

516
00:31:17,875 --> 00:31:22,177
And there are a few of the places where I could at some the impulses to the

517
00:31:22,177 --> 00:31:25,199
physics when the huddle is scrapping things

518
00:31:25,199 --> 00:31:29,901
and moving around with a box sometimes the the box would get too far away from

519
00:31:29,901 --> 00:31:35,944
an arm and then I could allow the the huddle bones to so like reach out for

520
00:31:35,944 --> 00:31:37,845
for that box or pull the box back in

521
00:31:37,845 --> 00:31:42,907
also in the huddle is pulling in the server or hanging from the crane I could

522
00:31:43,842 --> 00:31:49,967
push a little to the huddle pose to make it more likely to look good.

523
00:31:49,967 --> 00:31:57,114
But generally, this is the only real place I use physics feedback.

524
00:31:57,114 --> 00:31:59,757
Okay, the arms.

525
00:31:59,757 --> 00:32:00,898
We have six arms.

526
00:32:00,898 --> 00:32:07,244
They are supposed to touch and grab anything that is interesting to touch and grab.

527
00:32:08,174 --> 00:32:10,835
And then we have the dynamic arms that can spawn out from

528
00:32:10,835 --> 00:32:11,355
the center.

529
00:32:11,355 --> 00:32:15,737
And the same question is also, you've used a ton of

530
00:32:15,737 --> 00:32:16,177
animation, right?

531
00:32:16,177 --> 00:32:20,259
And in this case, we actually used some more, because we

532
00:32:20,259 --> 00:32:22,960
have all these idle animations, six idle

533
00:32:22,960 --> 00:32:25,001
animations, so yeah, that's a lot of

534
00:32:25,001 --> 00:32:25,961
animations right there.

535
00:32:27,410 --> 00:32:28,711
Well, it's not really.

536
00:32:28,711 --> 00:32:30,353
But those are the animations that

537
00:32:30,353 --> 00:32:32,556
play when the huddle is just standing still and doing

538
00:32:32,556 --> 00:32:32,876
nothing.

539
00:32:32,876 --> 00:32:36,861
And if it's running around, we add some forces to them

540
00:32:36,861 --> 00:32:38,843
to make them a little bit ragdoll-y.

541
00:32:38,843 --> 00:32:40,806
But generally, that's what you're seeing.

542
00:32:41,827 --> 00:32:44,829
And on this slide, we have some other animations.

543
00:32:44,829 --> 00:32:47,550
The top ones are for when the huddle is in pain,

544
00:32:47,550 --> 00:32:48,671
if someone hits it.

545
00:32:48,671 --> 00:32:51,773
And the middle ones are when it reaches out for something,

546
00:32:51,773 --> 00:32:53,353
but it can't really reach it.

547
00:32:53,353 --> 00:32:54,974
Then it can sort of try to reach it.

548
00:32:54,974 --> 00:32:58,096
And the two bottom ones are the ones that we're using the most.

549
00:32:58,096 --> 00:33:01,538
The grab animation, which is pretty much used like the legs.

550
00:33:01,538 --> 00:33:04,520
That is an animation where I can scrub back and forth

551
00:33:04,520 --> 00:33:07,201
on the play position to have it grab things

552
00:33:07,201 --> 00:33:08,742
at different lengths from it.

553
00:33:09,562 --> 00:33:13,984
And then the retract animation that is an emission of the place whenever one of those

554
00:33:13,984 --> 00:33:19,887
dynamic arms that can spawn gets tired of being alive and just pull back into the to

555
00:33:19,887 --> 00:33:20,247
the belly.

556
00:33:20,247 --> 00:33:27,610
So here here we're grabbing a box and we have no arms in this case so the box is just

557
00:33:27,610 --> 00:33:31,932
floating around this is the physics model that we made for for grabbing stuff and this

558
00:33:31,932 --> 00:33:36,815
is again the model that I'm supposed to put some arms on to make it look believable.

559
00:33:38,093 --> 00:33:39,674
So I've done that here.

560
00:33:39,674 --> 00:33:43,856
Some arms with a little bit of debug drawing on top

561
00:33:43,856 --> 00:33:44,557
to grab the box.

562
00:33:44,557 --> 00:33:46,958
And again, it's the same physics.

563
00:33:46,958 --> 00:33:49,660
The arms are just visual flavor on top of it.

564
00:33:49,660 --> 00:33:52,621
So what we're doing is we have an arm,

565
00:33:52,621 --> 00:33:56,363
and then we introduce something called an aim point.

566
00:33:56,363 --> 00:33:59,545
This is a point that the arm really, really wants to reach.

567
00:34:00,340 --> 00:34:02,181
So every arm has one of these points.

568
00:34:02,181 --> 00:34:03,582
And the point is autonomous.

569
00:34:03,582 --> 00:34:06,404
It just floats around the huddle and makes decisions

570
00:34:06,404 --> 00:34:08,345
of where it wants to be so that the arm will

571
00:34:08,345 --> 00:34:09,966
point in a nice direction.

572
00:34:09,966 --> 00:34:13,548
And the arm, on the other hand, it will try to reach it.

573
00:34:13,548 --> 00:34:15,489
And if the point ever gets close enough,

574
00:34:15,489 --> 00:34:18,091
it will play a grab animation, shoot out,

575
00:34:18,091 --> 00:34:21,693
and attach itself to the point until the point gets far away.

576
00:34:21,693 --> 00:34:24,995
And then the arm will let go and go to idle.

577
00:34:24,995 --> 00:34:27,716
Or if it was a dynamic arm, it will retract

578
00:34:27,716 --> 00:34:28,777
into the center of the huddle.

579
00:34:30,959 --> 00:34:34,121
Then we have this is the arm manager

580
00:34:34,121 --> 00:34:36,964
and she is responsible of tracking interesting objects

581
00:34:36,964 --> 00:34:41,387
in the scene and assign grab objects, aim objects,

582
00:34:41,387 --> 00:34:42,748
points to that object.

583
00:34:42,748 --> 00:34:44,689
So for instance, we have this crate.

584
00:34:44,689 --> 00:34:47,231
The arm manager detects it and says, wait,

585
00:34:47,231 --> 00:34:50,033
I'm going to create these five interesting points

586
00:34:50,033 --> 00:34:50,694
on the crate.

587
00:34:50,694 --> 00:34:54,277
And then I'm going to assign this aim point

588
00:34:54,277 --> 00:34:56,198
to one of those grab points.

589
00:34:57,344 --> 00:35:01,065
And when you then saw us like we saw that the physics system

590
00:35:01,065 --> 00:35:04,847
would take the crate and like put it in next to the huddle,

591
00:35:04,847 --> 00:35:07,888
that arm will get close enough and it will then

592
00:35:07,888 --> 00:35:08,548
grab on to the crate.

593
00:35:08,548 --> 00:35:12,789
It can also spawn these extra arms because at any time

594
00:35:12,789 --> 00:35:15,190
we want to have at least two or three arms holding a crate,

595
00:35:15,190 --> 00:35:17,151
otherwise it looks very floaty and unreal

596
00:35:17,151 --> 00:35:19,611
and there are not enough static arms for that.

597
00:35:19,611 --> 00:35:22,332
So generally when we are holding onto crates,

598
00:35:22,332 --> 00:35:24,533
we have a lot of extra arms being shot out

599
00:35:24,533 --> 00:35:25,333
to grab the crates.

600
00:35:27,862 --> 00:35:32,304
We can see here, here's an example where the huddle wants to climb over this crate.

601
00:35:32,304 --> 00:35:36,306
And as it starts to climb now, you can see some of those points, there's one there,

602
00:35:36,306 --> 00:35:40,789
and another one goes down and attaches themselves to the top of the crate.

603
00:35:40,789 --> 00:35:43,450
And here's on the left another point coming down.

604
00:35:43,450 --> 00:35:48,253
And that will make the arms shoot out and reach the crate.

605
00:35:48,253 --> 00:35:49,814
I think we just see it again.

606
00:35:51,082 --> 00:35:53,823
See, look at the point just above the crate.

607
00:35:53,823 --> 00:35:56,745
There's a point that comes here and attaches.

608
00:35:56,745 --> 00:36:00,007
And another point comes here and attaches to the crate.

609
00:36:00,007 --> 00:36:02,929
And then on the left side is a point that attaches.

610
00:36:02,929 --> 00:36:05,771
Just to make the hodlite feel the stuff that it's climbing on.

611
00:36:05,771 --> 00:36:09,493
And it makes it a lot more alive.

612
00:36:09,493 --> 00:36:11,635
Here we are grabbing on to a crate.

613
00:36:12,900 --> 00:36:16,662
we're kind of like moving around and you see a lot of arms getting in and reaching

614
00:36:16,662 --> 00:36:21,044
them and all those and I'm a gunsman they have to let go of them that rep on

615
00:36:21,044 --> 00:36:24,505
points of just shoot away as you see it in the left of the picture now that's a

616
00:36:24,505 --> 00:36:27,047
lot of points that just shoots out

617
00:36:27,047 --> 00:36:30,969
and that means that the the dynamic arms can no longer reach and they will just

618
00:36:30,969 --> 00:36:32,910
retract that was the system.

619
00:36:35,135 --> 00:36:37,196
So generally, that is it.

620
00:36:37,196 --> 00:36:39,118
That is how the huddle grabs onto stuff.

621
00:36:39,118 --> 00:36:42,781
All these arms and legs are just objects.

622
00:36:42,781 --> 00:36:45,343
They're not a part of the full huddle model.

623
00:36:45,343 --> 00:36:50,387
They're just their own meshes that we add runtime.

624
00:36:50,387 --> 00:36:53,670
So normally, that would look really bad

625
00:36:53,670 --> 00:36:54,730
with a lot of clipping.

626
00:36:54,730 --> 00:36:57,513
But luckily for that, we have Miguel, who can

627
00:36:57,513 --> 00:36:59,014
do magic with rendering.

628
00:36:59,014 --> 00:37:00,735
So that's why he took over.

629
00:37:09,934 --> 00:37:14,916
So hi, I'm Michael on inside I mostly did visual effects like

630
00:37:14,916 --> 00:37:18,877
smoke stacks and splashes and well, most actually most of my

631
00:37:18,877 --> 00:37:22,839
time I made and maintain water over the game, but I got to do

632
00:37:22,839 --> 00:37:27,560
something fun. I mean this guy I did surface appearance on it

633
00:37:27,560 --> 00:37:32,342
and most importantly, a sunset I'm trying to make it look like

634
00:37:32,342 --> 00:37:34,543
more than the some of its parts and trying to do these things

635
00:37:34,543 --> 00:37:37,644
together with a bit of shade of glue. So yeah, let's take a

636
00:37:37,644 --> 00:37:38,664
look at what it looks like.

637
00:37:38,896 --> 00:37:44,037
This is as he looks in the final game and

638
00:37:44,037 --> 00:37:47,458
we try to bunch of things with this guy a bunch of us try to bunch of things I

639
00:37:47,458 --> 00:37:51,499
try to bunch of things in the beginning and they has tried a bunch of things

640
00:37:51,499 --> 00:37:55,220
with like physical polls that are rotating around and our graphics program

641
00:37:55,220 --> 00:38:00,842
a good also tried making a huddle shader and after all these experiments were

642
00:38:00,842 --> 00:38:06,383
very close to really needing something so yeah, I got to work on on a thing

643
00:38:06,383 --> 00:38:07,484
here.

644
00:38:09,027 --> 00:38:11,788
But before I did, a bunch of people started throwing some

645
00:38:11,788 --> 00:38:13,108
inspirational material at me.

646
00:38:13,108 --> 00:38:14,669
I gathered a little bit of my own.

647
00:38:14,669 --> 00:38:16,969
But the things that I was generally sent by the more

648
00:38:16,969 --> 00:38:19,650
artistically literate people at the company

649
00:38:19,650 --> 00:38:21,250
were things like this.

650
00:38:21,250 --> 00:38:23,971
So these are some sculptures by John Isaacs.

651
00:38:23,971 --> 00:38:26,071
I don't know if you can tell how we were inspired by them.

652
00:38:26,071 --> 00:38:30,332
But they've got these nice folds and lumps and stuff.

653
00:38:30,332 --> 00:38:33,493
But the color is, yeah, it could be better.

654
00:38:33,493 --> 00:38:37,174
So we've got these paintings by Rembrandt, little known.

655
00:38:37,994 --> 00:38:39,935
Indie dude.

656
00:38:39,935 --> 00:38:42,697
But what's nice about these is even though he's just drawing skin,

657
00:38:42,697 --> 00:38:46,440
even though he's just painting skin, he's got a whole palette going on here.

658
00:38:46,440 --> 00:38:48,541
He's generally just never hitting those pig tones.

659
00:38:48,541 --> 00:38:52,524
It's just all over with green and blue and red and yellow.

660
00:38:52,524 --> 00:38:53,965
But somehow it comes together to look skinsy.

661
00:38:53,965 --> 00:38:58,188
And right in between these two we've got paintings by Jenny Savelle.

662
00:38:58,829 --> 00:39:00,810
which I don't know how you can see this,

663
00:39:00,810 --> 00:39:01,972
but they're kind of in the middle.

664
00:39:01,972 --> 00:39:03,813
They're like the colorful paintings,

665
00:39:03,813 --> 00:39:05,315
but then with bumps, right?

666
00:39:05,315 --> 00:39:07,877
So this was sort of the main inspiration

667
00:39:07,877 --> 00:39:11,100
for the texture job that actually Andreas

668
00:39:11,100 --> 00:39:14,644
ended up doing the main texture of it.

669
00:39:14,644 --> 00:39:16,906
But yeah, here it is again.

670
00:39:16,906 --> 00:39:17,106
Now.

671
00:39:18,072 --> 00:39:21,334
like like like sunset, there's a bunch of arms and legs that we need to go in

672
00:39:21,334 --> 00:39:24,976
there so let's start with the most obvious part of the shade of you which

673
00:39:24,976 --> 00:39:25,917
is

674
00:39:25,917 --> 00:39:31,040
normal us. So in the beginning of an of our normal recipe we've got it looking

675
00:39:31,040 --> 00:39:36,003
like this it's a little bit hard edge. It's a little bit it's a little bit

676
00:39:36,003 --> 00:39:41,707
dull. So let's do something to these numbers you think normal mapping right

677
00:39:41,707 --> 00:39:43,047
now I don't like those so.

678
00:39:43,788 --> 00:39:47,591
What we've got here is just the, what you're seeing

679
00:39:47,591 --> 00:39:51,034
is just the regular normal huddle normals

680
00:39:51,034 --> 00:39:52,556
that come from the model.

681
00:39:52,556 --> 00:39:53,917
And that's what the normal looks like

682
00:39:53,917 --> 00:39:55,378
instead of max with some debug.

683
00:39:55,378 --> 00:39:57,780
And yeah, it's just too hard.

684
00:39:57,780 --> 00:39:59,522
So that's actually, instead of doing normal mapping,

685
00:39:59,522 --> 00:40:02,324
let's do normal unmapping instead.

686
00:40:02,324 --> 00:40:04,106
So here we've got the polar opposite.

687
00:40:04,106 --> 00:40:05,907
It just looks like a meaty soap bar now.

688
00:40:07,500 --> 00:40:08,600
That's perfect right.

689
00:40:08,600 --> 00:40:14,522
So we need to find somewhere in between these 2 entities.

690
00:40:14,522 --> 00:40:19,084
So that's figure out how we can do that we've got over on the far left we've got the the

691
00:40:19,084 --> 00:40:24,806
hot almost again in the middle we've got a sphere and if we try to project the almost

692
00:40:24,806 --> 00:40:25,927
as a sphere on to the huddle.

693
00:40:25,927 --> 00:40:29,948
Yeah, that's sort of the what you're seeing here with the soft and that's all it almost

694
00:40:29,948 --> 00:40:32,749
except that just an initiator instead.

695
00:40:33,589 --> 00:40:36,091
But yeah, something in between these things would be nice.

696
00:40:36,091 --> 00:40:37,692
So on comes a blend factor.

697
00:40:37,692 --> 00:40:40,754
And this is what the blend factor looks like.

698
00:40:40,754 --> 00:40:44,537
What it likes to factor is to show detail around the edges

699
00:40:44,537 --> 00:40:47,419
where we are okay with showing detail,

700
00:40:47,419 --> 00:40:51,282
but keep it vague in the middle, very vague.

701
00:40:51,282 --> 00:40:54,764
And it also likes to show the detail in the rigid bodies

702
00:40:54,764 --> 00:40:56,666
that are attached to it, the spring rigid bodies.

703
00:40:58,179 --> 00:41:01,420
But most importantly, it likes to blend together

704
00:41:01,420 --> 00:41:03,621
the auxiliary bodies.

705
00:41:03,621 --> 00:41:06,602
So it blends from the hard normals at the tip of the feet

706
00:41:06,602 --> 00:41:09,223
and the tip of the fingers into the soft normals

707
00:41:09,223 --> 00:41:11,303
at the elbow and the thighs,

708
00:41:11,303 --> 00:41:13,364
which ends up looking like this.

709
00:41:13,364 --> 00:41:14,904
So if you just look at the normal buffer,

710
00:41:14,904 --> 00:41:16,125
at least that's where it's most obvious,

711
00:41:16,125 --> 00:41:19,086
you can see the legs going from looking very auxiliary-like

712
00:41:19,086 --> 00:41:21,186
to look much more integrated into the mesh.

713
00:41:21,787 --> 00:41:24,509
And on the Lid Renderer, you can see that it's now

714
00:41:24,509 --> 00:41:25,990
vaguefied the center a little bit,

715
00:41:25,990 --> 00:41:28,953
but without looking unnatural and soap-like.

716
00:41:28,953 --> 00:41:30,734
That's nice.

717
00:41:30,734 --> 00:41:34,337
Anyways, these are just recipe slides I'm rolling in here.

718
00:41:34,337 --> 00:41:36,559
I've got code down below.

719
00:41:36,559 --> 00:41:38,040
I'm not going to explain it in detail,

720
00:41:38,040 --> 00:41:40,102
but if some of the more technically-minded out there

721
00:41:40,102 --> 00:41:42,704
want to know some greater details, you can look into them.

722
00:41:43,441 --> 00:41:46,104
So after normals comes lighting, right?

723
00:41:46,104 --> 00:41:48,446
So at the bottom of the lighting hierarchy,

724
00:41:48,446 --> 00:41:50,368
we've got ambient lighting.

725
00:41:50,368 --> 00:41:53,411
A few of our characters and NPCs, actually all of them,

726
00:41:53,411 --> 00:41:56,273
have an ambient term so that you can see them in the dark.

727
00:41:56,273 --> 00:41:57,454
It also helps them stand out from the rest

728
00:41:57,454 --> 00:41:58,355
of the environment.

729
00:41:58,355 --> 00:41:59,717
And the huddle is no exception.

730
00:42:00,477 --> 00:42:03,901
This is the huddle with just straight ambient, no occlusion whatsoever.

731
00:42:03,901 --> 00:42:05,122
It looks kind of flat.

732
00:42:05,122 --> 00:42:10,107
You can see some of the diffuse albedo details,

733
00:42:10,107 --> 00:42:11,988
but otherwise it's flat, right?

734
00:42:11,988 --> 00:42:13,850
So let's add a bit of occlusion to that one.

735
00:42:13,850 --> 00:42:16,813
The first and least obvious part of the occlusion hierarchy

736
00:42:16,813 --> 00:42:19,936
are these limb and body decals, as I call them,

737
00:42:19,936 --> 00:42:22,078
or actually AO decals.

738
00:42:22,078 --> 00:42:24,440
We use them also on characters.

739
00:42:25,254 --> 00:42:29,800
like the boy and any MPC the by nose and generally just most

740
00:42:29,800 --> 00:42:30,641
characters in the game.

741
00:42:30,641 --> 00:42:34,907
You could think of them like point lights except instead of

742
00:42:34,907 --> 00:42:38,792
adding light they subtracted on multiplied out it's pretty

743
00:42:38,792 --> 00:42:41,636
simple and we covered it in a different talk last year and

744
00:42:41,636 --> 00:42:43,158
GC is on the boat.

745
00:42:43,607 --> 00:42:48,110
Next up and much more obvious in the in the occlusion hierarchy

746
00:42:48,110 --> 00:42:49,210
is a texture right so we've got

747
00:42:49,210 --> 00:42:54,654
it just a big crease texture that sort of tries to

748
00:42:54,654 --> 00:42:57,756
give it a little bit more shape and definition again

749
00:42:57,756 --> 00:43:00,798
made less way even though it just spend a bunch of time

750
00:43:00,798 --> 00:43:04,501
became more vague anyway. The texture looks something like

751
00:43:04,501 --> 00:43:06,822
this it's just a 10 texture on top of the

752
00:43:06,822 --> 00:43:08,263
existing

753
00:43:08,263 --> 00:43:10,124
and in turn and that's it.

754
00:43:11,142 --> 00:43:14,945
most important part of the occlusion hierarchy is this vertical gradient

755
00:43:14,945 --> 00:43:19,108
that's going from top to bottom. We don't use it on any other entities, but for a

756
00:43:19,108 --> 00:43:22,990
big entity like the huddle here, it's very important to have self-occlusion going from top

757
00:43:22,990 --> 00:43:27,013
to bottom. So if you look at just the tops of the far right

758
00:43:27,013 --> 00:43:31,816
and the one next to it, you can see that the tops are equally lit, but the bottom

759
00:43:31,816 --> 00:43:34,818
the far right one is very dark on the bottom, so it

760
00:43:34,818 --> 00:43:37,120
really helps it ground itself to the ground.

761
00:43:37,661 --> 00:43:39,804
And this is what that normal gradient looks like.

762
00:43:39,804 --> 00:43:43,409
It's literally just using the y normal as occlusion,

763
00:43:43,409 --> 00:43:44,131
nothing else.

764
00:43:44,131 --> 00:43:46,114
Well, actually, it's a bit of a mix between those.

765
00:43:46,114 --> 00:43:47,596
Anyways, it's in the code.

766
00:43:47,596 --> 00:43:47,736
So.

767
00:43:48,856 --> 00:43:52,238
After ambient what's next in the hierarchy,

768
00:43:52,238 --> 00:43:54,880
obviously some sort of diffuse lighting, right?

769
00:43:54,880 --> 00:43:59,164
So the diffuse lighting had a bunch of requirements.

770
00:43:59,164 --> 00:44:01,045
Most importantly, just not looking boring.

771
00:44:01,045 --> 00:44:03,887
But it also needed to not burn out

772
00:44:03,887 --> 00:44:05,949
when there are very bright lights,

773
00:44:05,949 --> 00:44:08,451
because we like to light our characters very brightly,

774
00:44:08,451 --> 00:44:09,371
put them in the spotlight.

775
00:44:11,729 --> 00:44:14,570
And to avoid this burning out thing,

776
00:44:14,570 --> 00:44:16,490
what we wanted to do is tone map it, right?

777
00:44:16,490 --> 00:44:19,831
So the tone map that we used for the huddle

778
00:44:19,831 --> 00:44:23,912
is just this exponentially decaying tone map,

779
00:44:23,912 --> 00:44:24,912
which came for free, actually.

780
00:44:24,912 --> 00:44:26,692
Actually, it was cheaper than free

781
00:44:26,692 --> 00:44:31,013
because we happen to be rendering in Unity's LDR pass,

782
00:44:31,013 --> 00:44:34,714
which happens to just store light as exponential

783
00:44:34,714 --> 00:44:36,314
with multiply blend mode.

784
00:44:36,314 --> 00:44:39,655
So all we do to get this tone map is not unwind it,

785
00:44:39,655 --> 00:44:40,795
and that's how we get it.

786
00:44:41,813 --> 00:44:43,534
Next up, I like rim lights.

787
00:44:43,534 --> 00:44:46,577
So we've got this thin little rim light around the edge.

788
00:44:46,577 --> 00:44:49,840
It just helps separate it from the background even more.

789
00:44:49,840 --> 00:44:54,184
And now that it's totally painfully obvious already.

790
00:44:54,184 --> 00:44:56,386
But it also helps to clue it in with the boy,

791
00:44:56,386 --> 00:44:58,628
because the boy also has the same rim light thing going for

792
00:44:58,628 --> 00:45:00,950
it, all the NPCs do.

793
00:45:00,950 --> 00:45:01,851
And rims are just nice.

794
00:45:01,851 --> 00:45:02,972
You know what I'm saying?

795
00:45:05,354 --> 00:45:07,236
It's done very simply by having,

796
00:45:07,236 --> 00:45:09,819
if you have the depth buffer of the huddle

797
00:45:09,819 --> 00:45:13,063
and you sample it with an offset

798
00:45:13,063 --> 00:45:15,966
with the, what's it called, view normals,

799
00:45:15,966 --> 00:45:17,608
and subtract those two normals from each other,

800
00:45:17,608 --> 00:45:19,310
you get this Sobel depth.

801
00:45:19,310 --> 00:45:21,312
And all we do is just amplify

802
00:45:21,312 --> 00:45:23,995
the existing incoming lighting with that Sobel effect.

803
00:45:25,567 --> 00:45:27,371
Next up, more rims, right?

804
00:45:27,371 --> 00:45:31,741
The intuition for lighting the huddle

805
00:45:31,741 --> 00:45:33,626
is that it looks a lot better to light it from the back

806
00:45:33,626 --> 00:45:35,029
than from the front, just because it's

807
00:45:35,867 --> 00:45:40,308
less you know you get to see less is nice to keep it slightly big, you know

808
00:45:40,308 --> 00:45:43,389
here this is one of those cases where it's not that from the back it's that

809
00:45:43,389 --> 00:45:46,711
from the side we would like to imply that it's that from the back so this

810
00:45:46,711 --> 00:45:50,532
sort of just amplifies that coming from the backside rather than the one coming

811
00:45:50,532 --> 00:45:54,974
from the front side and I ended up calling it roughness because I'm

812
00:45:54,974 --> 00:45:55,774
terrible at naming.

813
00:45:56,474 --> 00:46:00,298
But just to show what my intuition was with that naming,

814
00:46:00,298 --> 00:46:02,680
if you take a regular Lambertinian term

815
00:46:02,680 --> 00:46:05,723
and turn it into a Ornea term, it sort of

816
00:46:05,723 --> 00:46:09,327
gets that edgy look around the edges.

817
00:46:09,327 --> 00:46:12,150
So that's why it ended up being called that.

818
00:46:12,150 --> 00:46:12,851
And finally.

819
00:46:14,369 --> 00:46:18,233
it needs to be to find so the boy and other in pieces again

820
00:46:18,233 --> 00:46:22,377
are more to the characters so we need this guy to have the same sort of hard

821
00:46:22,377 --> 00:46:23,958
edge lighting we try to straight up

822
00:46:23,958 --> 00:46:27,201
to nances for the her call off but in a booking a little bit wacky on a

823
00:46:27,201 --> 00:46:32,286
big model like this one so in abusing a much smoother approach that just ends up

824
00:46:32,286 --> 00:46:33,928
kind of contrast enhancing the thing

825
00:46:33,928 --> 00:46:34,748
a little bit

826
00:46:35,369 --> 00:46:37,291
The only special thing we do other than add

827
00:46:37,291 --> 00:46:39,292
the smooth step to it is fade it away

828
00:46:39,292 --> 00:46:40,733
once we're getting away from lights

829
00:46:40,733 --> 00:46:42,195
because we don't like to have this effect

830
00:46:42,195 --> 00:46:44,076
where you're moving away from a light

831
00:46:44,076 --> 00:46:46,238
and then it's lit, lit, lit, lit, not lit,

832
00:46:46,238 --> 00:46:47,179
not lit, not lit.

833
00:46:47,179 --> 00:46:49,380
We like to kind of smooth it off after a while.

834
00:46:49,380 --> 00:46:52,203
Anyways, that's enough of boring diffuse lighting.

835
00:46:52,203 --> 00:46:53,924
Next up is specular.

836
00:46:53,924 --> 00:46:55,105
Well, here there's no specular.

837
00:46:55,923 --> 00:46:56,664
There's a specular.

838
00:46:56,664 --> 00:47:00,389
This is just regular boring Phong specular.

839
00:47:00,389 --> 00:47:02,091
No tricks, or well, there is one trick.

840
00:47:02,091 --> 00:47:04,895
This Phong specular is a lie.

841
00:47:04,895 --> 00:47:07,158
It's a total lie.

842
00:47:07,158 --> 00:47:09,081
And it's also a lie that looks a little bit

843
00:47:09,081 --> 00:47:10,803
like lubricant in this case.

844
00:47:10,803 --> 00:47:11,905
So it would be nice if it looked

845
00:47:11,905 --> 00:47:13,046
a little bit more like skin.

846
00:47:13,827 --> 00:47:17,990
When I made this thing, one of the

847
00:47:17,990 --> 00:47:21,732
Merrick who is sitting next to me, one of our artists said it would be nice if it

848
00:47:21,732 --> 00:47:25,635
looked a little bit more like Saturday night chicken roast. So

849
00:47:25,635 --> 00:47:30,558
we added a chicken skin normal map to it, which is just this normal map

850
00:47:30,558 --> 00:47:34,341
of dots and veins and stuff. And

851
00:47:34,341 --> 00:47:38,043
I'm only using this in the specular, it's used nowhere else because like I said, I

852
00:47:38,043 --> 00:47:39,604
like to un-normal map things usually.

853
00:47:40,525 --> 00:47:43,646
So what did I mean with the specular is a lie. Well,

854
00:47:43,646 --> 00:47:46,907
in inside we don't actually have specular in the regular been

855
00:47:46,907 --> 00:47:50,247
rendering pipeline we just have diffuse lights but then we also

856
00:47:50,247 --> 00:47:53,588
have dedicated spectra lights that we use for just making

857
00:47:53,588 --> 00:47:57,269
things that what the Chinese specifically just gives us a lot

858
00:47:57,269 --> 00:48:00,450
more control. But we didn't want to add a ton of specular

859
00:48:00,450 --> 00:48:02,550
lights to the huddle and we always wanted it to look a

860
00:48:02,550 --> 00:48:06,251
little bit sweaty at any given time so we have is.

861
00:48:07,783 --> 00:48:10,205
basically a fake lighting direction.

862
00:48:10,205 --> 00:48:11,406
And it looks something like this.

863
00:48:11,406 --> 00:48:14,289
We just have lights, fake specular lights coming in

864
00:48:14,289 --> 00:48:16,671
from the back and the top and the sides

865
00:48:16,671 --> 00:48:17,611
at any given time in shader.

866
00:48:17,611 --> 00:48:20,574
And the way that we make sure that it's only shown

867
00:48:20,574 --> 00:48:22,896
when it's actually lit is just multiply it

868
00:48:22,896 --> 00:48:24,477
by the incoming diffuse light.

869
00:48:24,477 --> 00:48:27,820
So you use the regular lighting as a mask

870
00:48:27,820 --> 00:48:31,243
for the fake specular light, and Bob's your uncle, right?

871
00:48:33,810 --> 00:48:35,875
One more lightning thing, I promise.

872
00:48:35,875 --> 00:48:37,498
Just one more.

873
00:48:37,498 --> 00:48:39,823
So, subsurface scattering is a thing

874
00:48:39,823 --> 00:48:42,428
that can make not meaty things look more meaty

875
00:48:42,428 --> 00:48:43,891
and maybe more gross.

876
00:48:43,891 --> 00:48:45,114
Here there's none of it.

877
00:48:45,859 --> 00:48:47,659
And here there's some of it.

878
00:48:47,659 --> 00:48:52,480
So this is a really, really naive subsurface scattering.

879
00:48:52,480 --> 00:48:57,481
It's really just a blur of the incoming lighting buffer from

880
00:48:57,481 --> 00:49:02,502
the pre-pass deferred that's been sampled four times.

881
00:49:02,502 --> 00:49:05,303
We sample it four times in a spiral pattern and gather in

882
00:49:05,303 --> 00:49:09,663
the samples and summarize the valid samples and color them

883
00:49:09,663 --> 00:49:12,584
red and blend them in with dodge.

884
00:49:12,584 --> 00:49:13,704
And.

885
00:49:14,669 --> 00:49:15,990
What do I mean by valid sample?

886
00:49:15,990 --> 00:49:19,993
Well, we did have some problems with just blurring the light

887
00:49:19,993 --> 00:49:23,015
because you could have a hand that's casting

888
00:49:23,015 --> 00:49:24,437
subsurface scattering onto the chest

889
00:49:24,437 --> 00:49:27,079
or the other way around, which tends to not look so good

890
00:49:27,079 --> 00:49:28,520
and also a little bit wrong.

891
00:49:28,520 --> 00:49:30,141
So we tested against the depth buffer,

892
00:49:30,141 --> 00:49:33,684
just making sure that we don't go too far away off center.

893
00:49:34,384 --> 00:49:37,666
And we also, because we happened to get some problems where

894
00:49:37,666 --> 00:49:40,567
the bright floor could make things look more subsurface

895
00:49:40,567 --> 00:49:43,408
scattering and soapy, we also tested up against a

896
00:49:43,408 --> 00:49:46,749
is this the Hubble stencil buffer, for example.

897
00:49:46,749 --> 00:49:49,791
But yeah, that's basically it.

898
00:49:49,791 --> 00:49:52,492
It's pretty hacky, right?

899
00:49:52,492 --> 00:49:52,672
Now.

900
00:49:53,781 --> 00:49:58,406
You know that feeling when you're about a few months away from content complete,

901
00:49:58,406 --> 00:50:02,551
but you just have this killer idea and you just want to do it.

902
00:50:02,551 --> 00:50:06,656
So here we've got here we've got the huddle with just the regular diffuse

903
00:50:06,656 --> 00:50:10,020
texture. And this is as he looks in the final cafeteria.

904
00:50:10,020 --> 00:50:12,843
And I thought it would be nice if we could maybe

905
00:50:13,744 --> 00:50:16,885
you know and this up a little bit in certain cases so on the

906
00:50:16,885 --> 00:50:20,707
right hand side. It's been it's it's a little bit more

907
00:50:20,707 --> 00:50:24,188
bloody on the right side. It's the blues and the yellows

908
00:50:24,188 --> 00:50:26,249
and the greens are much more pronounced in it.

909
00:50:26,249 --> 00:50:28,069
And this happened because

910
00:50:28,069 --> 00:50:31,851
well it happens over the course of the game that the audience of

911
00:50:31,851 --> 00:50:34,632
the player probably is and some of using the huddle a little

912
00:50:34,632 --> 00:50:37,513
bit and this effect happened specifically because I started

913
00:50:37,513 --> 00:50:38,493
beating up for the crane

914
00:50:38,493 --> 00:50:42,795
and then it's so they get spruced of a time it's not nice.

915
00:50:44,403 --> 00:50:47,786
Again, here it is totally not crispy.

916
00:50:47,786 --> 00:50:49,447
And on the right-hand side, we've

917
00:50:49,447 --> 00:50:51,148
got it looking a little bit bacon-y.

918
00:50:51,148 --> 00:50:52,169
Looks like it might smell good.

919
00:50:52,169 --> 00:50:55,092
That's because I hung it over an open oven for a little bit.

920
00:50:55,092 --> 00:50:59,035
Don't know why you'd do this.

921
00:50:59,035 --> 00:50:59,795
Yeah.

922
00:50:59,795 --> 00:51:03,038
Over here, we've got the huddle in its great innocence.

923
00:51:10,096 --> 00:51:10,896
Yeah.

924
00:51:10,896 --> 00:51:14,897
So all these effects are using these masking systems

925
00:51:14,897 --> 00:51:19,759
that I came up with, which are just these very low frequency

926
00:51:19,759 --> 00:51:22,800
masks to do these weird effects.

927
00:51:22,800 --> 00:51:25,441
We've got the bruise mask, and we've got the burn mask.

928
00:51:25,441 --> 00:51:28,461
These masks are all using the same technique, even the seal

929
00:51:28,461 --> 00:51:29,022
mask.

930
00:51:29,022 --> 00:51:32,163
And the way that they're done, you

931
00:51:32,163 --> 00:51:34,903
can see that they're very, very low frequency.

932
00:51:34,903 --> 00:51:37,344
It's just really to localize them a little bit.

933
00:51:37,344 --> 00:51:38,544
The way that they're done is.

934
00:51:40,469 --> 00:51:46,356
This is all you guys that it's using a physics simulation and it's got 26 rigid

935
00:51:46,356 --> 00:51:50,801
bodies. So to do this effect I picked out my nine favorite rigid bodies which

936
00:51:50,801 --> 00:51:54,565
happen to be an equal six around the rim and three in the center.

937
00:51:55,146 --> 00:51:57,466
And I just put my ear down to them with a script

938
00:51:57,466 --> 00:52:00,667
and listen for any sort of activity that I'm interested in.

939
00:52:00,667 --> 00:52:03,168
And the activity I was interested in was,

940
00:52:03,168 --> 00:52:04,448
in case of a collision,

941
00:52:04,448 --> 00:52:06,889
we just add a little bit of damage to that bone,

942
00:52:06,889 --> 00:52:09,789
you know, to bruise it up a little bit.

943
00:52:09,789 --> 00:52:13,790
In case it enters a trigger or, well, a bonfire,

944
00:52:13,790 --> 00:52:15,511
we add a little bit more burniness.

945
00:52:15,511 --> 00:52:18,171
And in the case that the CEO splats on the ground

946
00:52:18,171 --> 00:52:19,972
outside of his office,

947
00:52:19,972 --> 00:52:21,852
we find any single one of these bones

948
00:52:21,852 --> 00:52:23,713
that's facing downwards toward the ground

949
00:52:23,713 --> 00:52:24,913
and we splat them up.

950
00:52:25,473 --> 00:52:28,854
And then if we have this on the CPU side, on the GPU,

951
00:52:28,854 --> 00:52:32,375
we can then gather up these results into a mask.

952
00:52:32,375 --> 00:52:36,156
I did this by just hard coding where the bones are

953
00:52:36,156 --> 00:52:38,656
in UV space with numbers in code,

954
00:52:38,656 --> 00:52:40,457
and did it until it looked right.

955
00:52:40,457 --> 00:52:44,318
Here we see the IDs just exposed as random colors

956
00:52:44,318 --> 00:52:46,278
that I thought looked nice.

957
00:52:46,278 --> 00:52:49,819
And we just take for each of these bones,

958
00:52:49,819 --> 00:52:51,920
we add in their, you know,

959
00:52:52,340 --> 00:52:57,962
Their damage data and multiplied by the local splash around where the bonus.

960
00:52:57,962 --> 00:53:02,663
And then we have a bruise mask that we can send from the vertex shader.

961
00:53:02,663 --> 00:53:06,865
And we can fade in our effects and the effects are pretty simple to we're pretty simple to do.

962
00:53:06,865 --> 00:53:12,627
Here's the regular diffuse mask before any abuse is done by the audience.

963
00:53:12,627 --> 00:53:15,708
And then with a regular tense we can take this.

964
00:53:15,708 --> 00:53:18,369
Well, it's not really subtle now because I.

965
00:53:19,008 --> 00:53:20,889
I amped it up a little bit so you guys can see better,

966
00:53:20,889 --> 00:53:24,810
but it amps up a lot more once we start bruising it.

967
00:53:24,810 --> 00:53:28,151
So that's what that looks like, it's just a regular tint.

968
00:53:28,151 --> 00:53:31,832
And then the same thing goes for the burn mask,

969
00:53:31,832 --> 00:53:34,733
except in this case there's a little bit

970
00:53:34,733 --> 00:53:36,033
of a dissolve effect going on,

971
00:53:36,033 --> 00:53:39,214
because of the intuition that bacon burns in a dissolve mask.

972
00:53:39,214 --> 00:53:40,034
And finally,

973
00:53:41,075 --> 00:53:54,340
The blood splatter which is very dissolving and as you can see it really favors to be bloody around the edges rather than the center. It really just likes to put these little bloody dots in the center rather than splotches.

974
00:53:54,340 --> 00:53:59,882
And the blood is not using any sort of texture color. It's just the color red that's being put on there and.

975
00:53:59,882 --> 00:54:00,703
That's your home.

976
00:54:06,412 --> 00:54:13,158
So it took a lot of weird iterations and and stuff and in the end of course I

977
00:54:13,158 --> 00:54:18,722
didn't make the huddle, these guys did. Thank you very much.

