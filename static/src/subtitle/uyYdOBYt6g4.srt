1
00:00:07,929 --> 00:00:08,429
Hi, everyone.

2
00:00:08,489 --> 00:00:08,969
How's it going?

3
00:00:11,250 --> 00:00:12,890
Before I kind of get into this thing,

4
00:00:13,190 --> 00:00:15,651
just to take a poll from the room, how many of you

5
00:00:16,011 --> 00:00:19,012
are video game specific AI developers, like game AI?

6
00:00:20,452 --> 00:00:23,013
OK, a significant percentage, which I would expect.

7
00:00:23,053 --> 00:00:25,413
Now, how many of you who are game AI developers

8
00:00:25,774 --> 00:00:27,954
spend the majority of your time in something

9
00:00:27,974 --> 00:00:31,015
that you would consider to be combat-oriented AI, something

10
00:00:31,055 --> 00:00:32,495
that's murdering the player, basically?

11
00:00:34,053 --> 00:00:35,694
basically the same percentage of people,

12
00:00:35,754 --> 00:00:36,794
almost the same number of people.

13
00:00:37,895 --> 00:00:39,095
Cool.

14
00:00:39,115 --> 00:00:40,556
I consider myself kind of an outlier.

15
00:00:40,796 --> 00:00:43,176
I've spent the vast majority of my time in the industry

16
00:00:43,256 --> 00:00:46,718
working on non-combat systems, simulation systems,

17
00:00:46,778 --> 00:00:48,858
background characters, the backup dancers,

18
00:00:49,278 --> 00:00:50,159
you know, that kind of stuff.

19
00:00:50,179 --> 00:00:52,039
That's where I've spent most of my career

20
00:00:52,059 --> 00:00:52,820
and most of my time.

21
00:00:53,600 --> 00:00:55,841
So that's kind of why I was super excited

22
00:00:55,861 --> 00:00:57,001
to do this type of talk.

23
00:00:59,262 --> 00:01:01,645
The desire for this, and really the catalyst of this,

24
00:01:01,685 --> 00:01:03,047
came from a couple of different places.

25
00:01:03,908 --> 00:01:08,273
The first time was in anger, when I did a rant.

26
00:01:08,293 --> 00:01:10,056
Maybe it would help if I'm on the right thing.

27
00:01:11,898 --> 00:01:12,038
Nope.

28
00:01:15,807 --> 00:01:16,167
Success.

29
00:01:17,107 --> 00:01:20,729
When I did a rant, this was in 2012, many years ago,

30
00:01:21,269 --> 00:01:24,331
where I said, why don't we have more ambient AI characters

31
00:01:24,411 --> 00:01:25,151
in games, right?

32
00:01:25,271 --> 00:01:27,792
Why are we doing these sort of looping idols?

33
00:01:28,553 --> 00:01:29,793
Why are we doing these random walks?

34
00:01:29,953 --> 00:01:32,174
We can do even just a little bit better.

35
00:01:33,775 --> 00:01:34,896
So movie time.

36
00:01:35,076 --> 00:01:35,676
I like movies.

37
00:01:36,717 --> 00:01:37,877
So I'm going to show this little movie.

38
00:01:37,897 --> 00:01:39,098
This is from Pillars of Eternity.

39
00:01:39,118 --> 00:01:40,478
And we're just going to watch this briefly.

40
00:01:42,067 --> 00:01:44,789
So here I'm getting jumped by some people in a town.

41
00:01:45,510 --> 00:01:47,332
And I promise this is about non-combat stuff.

42
00:01:48,192 --> 00:01:49,633
Notice those people at the bottom right.

43
00:01:50,394 --> 00:01:52,115
They're just hanging out like lightning

44
00:01:52,155 --> 00:01:53,437
is raining from the sky.

45
00:01:53,837 --> 00:01:54,477
Is it not playing?

46
00:01:54,658 --> 00:01:54,998
Oh no.

47
00:01:55,758 --> 00:01:56,099
Sorry.

48
00:01:56,919 --> 00:01:57,920
Let's try this again.

49
00:02:00,422 --> 00:02:00,883
Yay.

50
00:02:04,566 --> 00:02:04,846
Oh no.

51
00:02:05,827 --> 00:02:06,107
Great.

52
00:02:06,767 --> 00:02:07,588
That seemed to work well.

53
00:02:08,309 --> 00:02:08,629
Okay.

54
00:02:10,023 --> 00:02:14,295
That's because i'm on double monitor here. Let's try this again. There we go. Okay, now

55
00:02:15,254 --> 00:02:16,115
Those people at the bottom right.

56
00:02:16,655 --> 00:02:18,237
So they're basically doing nothing, right?

57
00:02:18,277 --> 00:02:20,238
They're hanging out, they're just doing their idle,

58
00:02:20,278 --> 00:02:22,400
like lightning is raining from the sky, fire,

59
00:02:22,740 --> 00:02:24,842
people are exploding, right?

60
00:02:24,882 --> 00:02:25,983
It's like a whole thing.

61
00:02:26,063 --> 00:02:28,525
And they're just like, meh, it's cool, whatever.

62
00:02:28,545 --> 00:02:31,467
This shit happens all the time, it's fine.

63
00:02:31,828 --> 00:02:34,670
This is like, this is my pet peeve in games.

64
00:02:34,750 --> 00:02:36,291
I see this stuff constantly.

65
00:02:36,872 --> 00:02:39,894
All right, let's see if I can somehow recover this thing.

66
00:02:41,155 --> 00:02:42,256
No, it moved this guy.

67
00:02:42,676 --> 00:02:43,557
Oh, he's over there.

68
00:02:45,723 --> 00:02:46,003
I'm back.

69
00:02:46,604 --> 00:02:47,565
Okay, we're back.

70
00:02:48,786 --> 00:02:52,489
So, let's dig into this just a little bit, right?

71
00:02:52,549 --> 00:02:54,070
So, Pillars of Eternity actually has

72
00:02:54,150 --> 00:02:56,132
a whole really interesting reputation system.

73
00:02:56,352 --> 00:02:58,294
You can do all sorts of cool stuff with reputation.

74
00:02:58,634 --> 00:03:00,356
I'm benevolent, for example, so that means

75
00:03:00,396 --> 00:03:02,238
that I can choose more benevolent type of things.

76
00:03:02,678 --> 00:03:05,160
How awesome would it be if me as a benevolent character,

77
00:03:05,220 --> 00:03:06,642
those two people turned around and said,

78
00:03:07,022 --> 00:03:09,544
this super awesome benevolent character is being jumped.

79
00:03:09,864 --> 00:03:11,166
Maybe I'll do something about that.

80
00:03:11,646 --> 00:03:12,727
So that's the ambient AI.

81
00:03:12,767 --> 00:03:15,010
And for all of those of you who rose your hand

82
00:03:15,030 --> 00:03:18,373
about the combat side of things, that series of slides

83
00:03:18,393 --> 00:03:18,834
was for you.

84
00:03:20,075 --> 00:03:22,278
Second motivation came from Alicia.

85
00:03:22,298 --> 00:03:24,600
Alicia Lidecker gave a rant two years ago

86
00:03:25,541 --> 00:03:28,004
about what she called artificial intelligence, which I love.

87
00:03:29,075 --> 00:03:31,516
And it's about why aren't we doing more of this kind of stuff?

88
00:03:32,377 --> 00:03:37,760
And I'll very briefly speak to that and answer that, because I was asked the very same question.

89
00:03:38,760 --> 00:03:42,522
A senior producer came and said, why on The Sims, you know, we're working on The Sims 4,

90
00:03:42,722 --> 00:03:48,066
why are The Sims AI characters so much more expensive from a man-hour point of view

91
00:03:48,366 --> 00:03:49,406
than something like Battlefield 4?

92
00:03:49,466 --> 00:03:49,646
Well...

93
00:03:51,408 --> 00:03:55,337
because my characters are on screen for a really, really long time and have to look good

94
00:03:55,357 --> 00:03:58,404
because they're the focus of the character, they're the focus of the camera.

95
00:03:58,484 --> 00:03:59,847
The player is constantly looking at them.

96
00:04:00,288 --> 00:04:01,390
Whereas something like Battlefield...

97
00:04:02,403 --> 00:04:04,504
characters on screen for how many seconds?

98
00:04:04,945 --> 00:04:07,026
That entire fight that you saw in that last video

99
00:04:07,066 --> 00:04:08,487
was 20 seconds or something.

100
00:04:08,927 --> 00:04:10,228
Your average fight is less than a minute.

101
00:04:10,709 --> 00:04:13,891
Whereas these deeper, richer AI characters

102
00:04:13,931 --> 00:04:14,892
need to last for longer.

103
00:04:14,972 --> 00:04:17,053
So that's your first kind of lesson about

104
00:04:17,413 --> 00:04:20,235
if you want to build deeper, richer background characters,

105
00:04:20,295 --> 00:04:22,557
be prepared to pay that cost because it's,

106
00:04:23,177 --> 00:04:25,959
you know, you can kind of fake some stuff, but.

107
00:04:26,700 --> 00:04:29,763
You know, we are all sort of wizards in the background.

108
00:04:30,703 --> 00:04:32,145
And it does take a little extra time.

109
00:04:32,625 --> 00:04:34,106
So this talk is gonna be T-shaped.

110
00:04:34,247 --> 00:04:35,468
That's the way that I like to think about it.

111
00:04:36,208 --> 00:04:37,730
I'm gonna talk about a myriad of different techniques.

112
00:04:38,150 --> 00:04:40,192
Things that are in some ways understood.

113
00:04:40,772 --> 00:04:42,434
And talk about how I piece them together.

114
00:04:42,734 --> 00:04:45,457
to form these types of background type of characters.

115
00:04:45,497 --> 00:04:47,419
And then we're going to talk about one particular system,

116
00:04:47,459 --> 00:04:49,881
which I have not seen a lot of talks or literature on,

117
00:04:49,961 --> 00:04:53,825
which is a scheduling system for scheduling AI characters in,

118
00:04:54,185 --> 00:04:56,247
which would actually work for either of those types of things.

119
00:04:56,287 --> 00:04:58,109
I've used it for deeper simulations,

120
00:04:58,189 --> 00:05:00,872
and I've used it for small, like, background type stuff.

121
00:05:03,070 --> 00:05:04,911
The important thing to realize is that we are illusionists.

122
00:05:05,252 --> 00:05:07,213
We're not gonna actually simulate human behavior,

123
00:05:07,253 --> 00:05:09,315
at least that's not really our goal, right?

124
00:05:09,335 --> 00:05:10,536
It has to run 60 frames a second.

125
00:05:11,297 --> 00:05:12,818
So it's not about realism,

126
00:05:13,139 --> 00:05:14,300
and that's not what we're trying to do

127
00:05:14,360 --> 00:05:16,282
with trying to simulate these background characters

128
00:05:16,362 --> 00:05:19,164
and trying to dissimulate non-combat type stuff.

129
00:05:19,584 --> 00:05:21,686
It's not about creating something that is real.

130
00:05:21,746 --> 00:05:23,368
It's about creating something that is immersive.

131
00:05:24,392 --> 00:05:25,534
things that are interesting.

132
00:05:25,914 --> 00:05:27,996
Okay, so when I try and create this kind of stuff,

133
00:05:28,016 --> 00:05:29,438
there's one giant button that I hit,

134
00:05:29,518 --> 00:05:31,200
and anyone who's seen any of my talks

135
00:05:31,260 --> 00:05:33,943
or know the crowd that I associate with

136
00:05:34,183 --> 00:05:36,325
is probably gonna guess exactly what's on the next slide.

137
00:05:36,546 --> 00:05:37,947
But the big shiny button that I hit

138
00:05:38,227 --> 00:05:39,629
at the very core of my AI

139
00:05:39,669 --> 00:05:41,351
when it comes to anything related to

140
00:05:41,451 --> 00:05:44,294
this kind of nuanced behavior is the utility button.

141
00:05:45,555 --> 00:05:48,077
I use utility theory and utility behavior type things

142
00:05:48,097 --> 00:05:49,919
and utility curves and all that fun stuff.

143
00:05:49,959 --> 00:05:51,240
You know, there's tons of talks here.

144
00:05:51,280 --> 00:05:52,480
I'm not gonna, this talk is not gonna be

145
00:05:52,501 --> 00:05:53,261
about utility theory.

146
00:05:53,721 --> 00:05:55,663
But that is the essence of it.

147
00:05:56,163 --> 00:05:58,805
Because it's really good at giving you

148
00:05:58,865 --> 00:06:00,106
really nuanced behaviors.

149
00:06:01,586 --> 00:06:07,051
It can be I should say and really good at giving you emergent behavior, which is I think what we really want to see

150
00:06:07,131 --> 00:06:11,255
That's kind of the magic. That's like the the Holy Grail. I think of a lot of this kind of stuff

151
00:06:12,015 --> 00:06:17,680
So let's think about that. So how many of you out there use a utility-based system in your AI?

152
00:06:19,758 --> 00:06:21,499
a hell of a lot more than I thought, to be honest.

153
00:06:22,300 --> 00:06:23,801
How many of you in that utility system

154
00:06:24,582 --> 00:06:26,963
do any kind of randomness whatsoever?

155
00:06:27,124 --> 00:06:30,066
Is it just deterministic, as in max of whatever,

156
00:06:30,266 --> 00:06:31,727
or is there some randomness?

157
00:06:31,767 --> 00:06:33,448
How many of you do randomness in your AI?

158
00:06:34,703 --> 00:06:37,505
Okay, about less than half of that same group.

159
00:06:38,146 --> 00:06:40,048
If you're gonna try and get the kind of nuanced behavior,

160
00:06:40,068 --> 00:06:42,390
I think you have to have some kind of randomness in there.

161
00:06:42,670 --> 00:06:43,811
I think it's the only way that it works,

162
00:06:43,891 --> 00:06:46,853
because if you choose max of whatever the decision is,

163
00:06:47,194 --> 00:06:48,495
then at that point, what you're choosing

164
00:06:48,695 --> 00:06:50,437
is a truly deterministic thing.

165
00:06:51,297 --> 00:06:53,479
So there's many ways that you can do it.

166
00:06:53,499 --> 00:06:54,880
The simplest way is a weighted random

167
00:06:54,900 --> 00:06:56,362
across the top scoring actions,

168
00:06:56,382 --> 00:06:57,583
which is what we did on The Sims 4.

169
00:06:58,323 --> 00:07:00,345
Richard Evans on The Sims 3 did something very similar.

170
00:07:00,425 --> 00:07:02,006
He just built a different curve

171
00:07:02,026 --> 00:07:03,888
to push lower scoring actions lower

172
00:07:03,928 --> 00:07:05,249
and higher scoring actions higher

173
00:07:05,349 --> 00:07:08,592
to get a more sharp sort of choice.

174
00:07:09,092 --> 00:07:10,994
But even just a simple weighted random

175
00:07:11,274 --> 00:07:12,935
across the final scoring actions

176
00:07:13,456 --> 00:07:16,719
is going to really, is gonna add that bit of nuance.

177
00:07:16,979 --> 00:07:17,839
And I'll prove it to you.

178
00:07:18,140 --> 00:07:19,621
I'll prove it to you with this example.

179
00:07:20,842 --> 00:07:23,422
This happened to me, I sort of recreated this,

180
00:07:24,142 --> 00:07:26,383
but it happened to me just totally accidentally

181
00:07:26,603 --> 00:07:27,723
while I was just working on The Sims.

182
00:07:27,763 --> 00:07:30,984
So I'm like, we wanna test sort of invite-in behaviors.

183
00:07:31,724 --> 00:07:34,484
And one of the wonderful things about working in AI

184
00:07:34,524 --> 00:07:35,865
is you spend a significant percentage of the game

185
00:07:35,885 --> 00:07:36,985
just watching what happens.

186
00:07:37,505 --> 00:07:39,985
So I went out into the street, found a random person,

187
00:07:40,025 --> 00:07:42,106
and said, hey, let's be friends enough,

188
00:07:42,166 --> 00:07:42,906
and then come on in.

189
00:07:43,826 --> 00:07:45,226
So what happened is they stayed out there

190
00:07:45,246 --> 00:07:47,947
and spoke about books for a short amount of time,

191
00:07:47,987 --> 00:07:49,427
and that makes sense, he's a bookworm, okay.

192
00:07:50,354 --> 00:07:52,655
Then he went in and started reading, and she did the same thing.

193
00:07:52,675 --> 00:07:54,776
It's like, oh, that's super cool.

194
00:07:55,596 --> 00:07:57,177
They went and they read together.

195
00:07:57,237 --> 00:08:00,299
They spoke about a book, a series that they love, and they went and read together.

196
00:08:01,199 --> 00:08:03,020
Of course, none of that actually happened.

197
00:08:03,080 --> 00:08:05,302
That was just the emergence coming through.

198
00:08:05,322 --> 00:08:08,643
That's a story that I as a player told myself about what was happening.

199
00:08:09,024 --> 00:08:10,945
What actually happened is he got sick of socializing,

200
00:08:10,985 --> 00:08:13,668
decided that fun was a, that he wanted to score fun.

201
00:08:13,768 --> 00:08:14,368
Fun won.

202
00:08:14,929 --> 00:08:16,890
And he's like, okay, here are all the things

203
00:08:16,910 --> 00:08:17,791
that solve for fun.

204
00:08:18,131 --> 00:08:20,433
And he had a better than 50% chance to choose reading.

205
00:08:20,894 --> 00:08:23,116
She had about a 25% chance to choose reading.

206
00:08:23,576 --> 00:08:25,298
And the gods of the random number generator

207
00:08:25,338 --> 00:08:27,199
decided to smile upon me that day.

208
00:08:27,720 --> 00:08:29,521
And there they are, they're reading together.

209
00:08:30,780 --> 00:08:33,782
So a big part of this is trying to make,

210
00:08:35,123 --> 00:08:36,544
fit all of these things together.

211
00:08:36,564 --> 00:08:37,665
That's gonna be a running theme

212
00:08:37,705 --> 00:08:38,845
of this sort of part of the talk.

213
00:08:39,606 --> 00:08:41,327
All these little moving pieces fitting together.

214
00:08:41,808 --> 00:08:43,449
So that was kind of magical for that.

215
00:08:44,409 --> 00:08:46,631
I'm gonna talk not super long about this part,

216
00:08:46,791 --> 00:08:48,853
because I've already spoken about this stuff, but stats.

217
00:08:49,393 --> 00:08:50,614
are another huge thing.

218
00:08:51,255 --> 00:08:53,818
So all the different stats that you can attach to your game

219
00:08:53,858 --> 00:08:55,781
that are little things that I can hook into,

220
00:08:56,902 --> 00:08:59,425
skills, relationships, wants and needs.

221
00:09:00,066 --> 00:09:04,151
The bottom one is like city health and things like that.

222
00:09:04,772 --> 00:09:06,293
So any of these types of things

223
00:09:06,334 --> 00:09:07,955
that you want to be able to attach.

224
00:09:10,017 --> 00:09:13,559
Really, there are basically any value that you can attach and they can sort of decay

225
00:09:13,599 --> 00:09:15,179
over time or do any of those types of things.

226
00:09:15,199 --> 00:09:18,721
They can be attached to people or they can be attached to objects or they can be attached

227
00:09:18,741 --> 00:09:19,561
to concepts.

228
00:09:20,642 --> 00:09:24,923
Food on The Sims 4, for instance, was one of the things that decayed.

229
00:09:25,324 --> 00:09:26,964
So the quality of the food went down.

230
00:09:29,009 --> 00:09:29,790
Tags are the other thing.

231
00:09:29,870 --> 00:09:31,111
I've spoken about this stuff as well.

232
00:09:31,972 --> 00:09:33,113
So are we lovers?

233
00:09:33,153 --> 00:09:33,713
Are we best friends?

234
00:09:33,754 --> 00:09:34,374
Are we soulmates?

235
00:09:35,015 --> 00:09:36,616
These are just little bits of information

236
00:09:36,636 --> 00:09:37,657
you can attach to people.

237
00:09:37,957 --> 00:09:39,419
And they can drive behavior.

238
00:09:39,839 --> 00:09:41,821
And this is where the subtlety really comes into play.

239
00:09:41,921 --> 00:09:44,423
For example, if I'm a glutton or if I'm a bookworm,

240
00:09:44,784 --> 00:09:48,027
I can generally score those types of actions a bit higher.

241
00:09:48,527 --> 00:09:50,328
And it doesn't mean it's always going to trump those things,

242
00:09:50,368 --> 00:09:50,489
right?

243
00:09:50,529 --> 00:09:52,250
It doesn't mean that he's always going to choose to read.

244
00:09:52,290 --> 00:09:54,051
It means he's going to tend to choose that.

245
00:09:54,371 --> 00:09:55,432
And it's those little tendencies.

246
00:09:55,492 --> 00:09:58,174
It's the gentle push in that direction.

247
00:09:58,254 --> 00:09:59,315
That's the thing that you're going for.

248
00:10:01,610 --> 00:10:03,111
And again, for a nod for some of the people

249
00:10:03,151 --> 00:10:04,751
who are working on more combat-oriented stuff,

250
00:10:04,811 --> 00:10:06,972
over on the right, I have the,

251
00:10:07,352 --> 00:10:09,533
those are the actual buffs on my particular character

252
00:10:09,693 --> 00:10:10,973
when we were fighting those guys.

253
00:10:11,013 --> 00:10:12,434
So any of these types of things,

254
00:10:12,454 --> 00:10:13,254
these are all just tags,

255
00:10:13,334 --> 00:10:14,714
tags that you can tag people with.

256
00:10:15,554 --> 00:10:18,495
And I could talk forever on this, I did last year.

257
00:10:18,515 --> 00:10:20,436
So if you have Vault Access,

258
00:10:20,516 --> 00:10:22,897
Daniel Brewer and I did a talk on knowledge is power,

259
00:10:23,177 --> 00:10:25,357
and that's where I spoke in depth about this kind of stuff.

260
00:10:25,377 --> 00:10:26,698
Okay.

261
00:10:28,980 --> 00:10:30,582
The next thing I want to talk about is relationships.

262
00:10:30,982 --> 00:10:32,904
So if we're having all of these people,

263
00:10:33,345 --> 00:10:34,506
what I think we're really trying to do

264
00:10:34,566 --> 00:10:37,550
is creating an ecosystem of different entities

265
00:10:37,590 --> 00:10:39,192
and different people that exist in this world.

266
00:10:39,773 --> 00:10:42,276
And those people should have their own relationships.

267
00:10:42,376 --> 00:10:44,498
How I feel about you may not necessarily be

268
00:10:44,679 --> 00:10:45,640
how you feel about me.

269
00:10:46,320 --> 00:10:48,942
If you kind of don't really like me that much,

270
00:10:48,982 --> 00:10:51,443
but I super like you, I might follow you around like a puppy.

271
00:10:52,823 --> 00:10:55,224
If we like each other in the same amount,

272
00:10:55,264 --> 00:10:58,906
then we may converge and really want to talk to each other.

273
00:10:59,506 --> 00:11:03,047
You can feel different ways about objects.

274
00:11:04,288 --> 00:11:05,088
This is my chair.

275
00:11:05,769 --> 00:11:06,609
This is my bed.

276
00:11:07,829 --> 00:11:09,710
This is my guitar, or whatever.

277
00:11:11,410 --> 00:11:14,072
So relationships can do quite a bit of,

278
00:11:14,653 --> 00:11:16,534
again, it's all subtle hits.

279
00:11:17,475 --> 00:11:18,476
I'll give you another example.

280
00:11:19,116 --> 00:11:22,019
No matter what that sim chose to do,

281
00:11:22,099 --> 00:11:24,441
if I went to go read, if she was able to,

282
00:11:24,521 --> 00:11:27,523
she probably would have sat next to me on the couch

283
00:11:27,624 --> 00:11:28,664
because we were friends.

284
00:11:29,205 --> 00:11:31,587
So the posture scoring that says where do I want to go,

285
00:11:31,607 --> 00:11:34,609
that feeds into the Pathfinder that says where exactly,

286
00:11:34,649 --> 00:11:36,591
what is the actual location that I want to be at,

287
00:11:37,232 --> 00:11:39,454
we weighed higher for those types of interactions.

288
00:11:40,134 --> 00:11:41,976
It gets even more fun when you talk about

289
00:11:43,197 --> 00:11:46,219
negative relationship doesn't necessarily mean

290
00:11:46,539 --> 00:11:47,980
that I don't want to talk to you.

291
00:11:49,021 --> 00:11:51,683
On The Sims Medieval, we had a depth that we used.

292
00:11:51,904 --> 00:11:54,406
So if I really liked you or really hated you,

293
00:11:54,546 --> 00:11:55,707
I wanted to talk to you.

294
00:11:56,167 --> 00:11:58,209
Which meant that we got brawls and things happening

295
00:11:58,229 --> 00:11:59,770
in the tavern, which was really cool.

296
00:12:00,330 --> 00:12:01,812
So that's the kind of thing that you're going for.

297
00:12:02,492 --> 00:12:05,294
If you're either crazy or you already have a game

298
00:12:05,314 --> 00:12:07,616
that supports it, influence maps are a really good way

299
00:12:09,938 --> 00:12:12,542
being able to have more reason about the environment

300
00:12:12,582 --> 00:12:13,823
and all that kind of stuff as well.

301
00:12:16,046 --> 00:12:17,849
This has also been spoken about quite a bit

302
00:12:18,229 --> 00:12:20,392
by Alex and by Dave Mark and various other people.

303
00:12:20,612 --> 00:12:22,254
So you can check out those resources as well.

304
00:12:24,121 --> 00:12:27,942
What we're trying to do is we're trying to take all of these little pieces and fit them

305
00:12:27,962 --> 00:12:31,783
all together so that we can create something that is more than the sum of its parts.

306
00:12:32,323 --> 00:12:39,284
All of these things working together will create this machine that allows for these

307
00:12:39,384 --> 00:12:41,565
types of emergent behaviors to come into play.

308
00:12:41,605 --> 00:12:45,145
We're creating this sort of fertile ground so that emergence can come through.

309
00:12:45,246 --> 00:12:50,127
And I think that's the secret of creating not believable, but immersive behavior.

310
00:12:50,887 --> 00:12:53,688
non-combat AI and simulations and that kind of thing.

311
00:12:53,808 --> 00:12:55,008
That's what we're really trying to do

312
00:12:55,288 --> 00:12:55,908
at the end of the day.

313
00:12:57,409 --> 00:12:58,589
Okay.

314
00:12:59,709 --> 00:13:02,010
We have to talk about LOD a little bit, I think.

315
00:13:02,510 --> 00:13:03,931
If you're trying to create a big simulation,

316
00:13:04,011 --> 00:13:05,411
one of the big things you have to deal with

317
00:13:05,731 --> 00:13:07,432
is level of detail.

318
00:13:07,512 --> 00:13:09,412
And there's tons of ways that you can handle

319
00:13:09,452 --> 00:13:10,013
all of that stuff.

320
00:13:10,033 --> 00:13:11,873
The one that I wanna focus on a little bit

321
00:13:12,593 --> 00:13:16,495
is basically statistical simulations

322
00:13:16,595 --> 00:13:18,355
and statistical planning and that kind of stuff.

323
00:13:19,116 --> 00:13:25,304
If you have this whole ecosystem of utility curves and all these things all working and

324
00:13:25,324 --> 00:13:32,494
measuring together, you're going to create this general trend of how Sims or whoever

325
00:13:32,514 --> 00:13:35,498
you're doing it, like your characters behave, your simulation behaves.

326
00:13:35,899 --> 00:13:39,401
If this city that's over here is starting to decline,

327
00:13:39,661 --> 00:13:40,802
and the player goes way over here,

328
00:13:40,862 --> 00:13:42,524
so now I'm in low LOD mode,

329
00:13:42,784 --> 00:13:45,606
then that city is probably going to tend to trend lower,

330
00:13:45,646 --> 00:13:47,327
and I can get updates from that city,

331
00:13:47,347 --> 00:13:48,748
and I don't have to obviously simulate that.

332
00:13:48,768 --> 00:13:51,931
So those types of, basically you're building a curve

333
00:13:51,991 --> 00:13:54,653
that you're just walking along as you go through.

334
00:13:55,394 --> 00:13:57,415
And that can be useful for tuning as well.

335
00:13:58,496 --> 00:14:00,858
Examples on the Sims, if a Sim is in low LOD mode,

336
00:14:00,898 --> 00:14:02,660
then we're not simulating their motives at all.

337
00:14:03,460 --> 00:14:05,122
When they come back into high LOD mode,

338
00:14:05,162 --> 00:14:08,765
we figure out what time it is, and then look on a curve

339
00:14:08,805 --> 00:14:11,027
that a designer built somewhere, and figure out, OK,

340
00:14:11,087 --> 00:14:12,348
this is what the curve says they should be at,

341
00:14:12,368 --> 00:14:14,069
and we'll tweak it a little bit either way.

342
00:14:15,430 --> 00:14:16,651
Those types of things can really help.

343
00:14:17,592 --> 00:14:17,672
OK.

344
00:14:19,239 --> 00:14:20,921
I'm gonna show, this is just a few tools

345
00:14:20,941 --> 00:14:22,142
that I use for this kind of stuff.

346
00:14:23,243 --> 00:14:25,065
This is Desmos, but any graphing calculator

347
00:14:25,085 --> 00:14:26,586
can really help with these types of things.

348
00:14:27,067 --> 00:14:28,889
Laying utility curves on top of each other

349
00:14:28,949 --> 00:14:30,510
is the only way that you're gonna really be able

350
00:14:30,570 --> 00:14:34,294
to understand how all of those curves line up together.

351
00:14:34,735 --> 00:14:35,916
It's also a way for me to say,

352
00:14:36,016 --> 00:14:38,538
okay, so let's say that I'm a bookworm, for example,

353
00:14:38,919 --> 00:14:41,902
and I wanna score these actions times, I don't know, 1.1.

354
00:14:43,663 --> 00:14:44,364
That seems good.

355
00:14:45,004 --> 00:14:46,485
And you can play with it and iterate

356
00:14:46,525 --> 00:14:48,906
without having to like dick around

357
00:14:48,986 --> 00:14:50,087
in the actual code itself.

358
00:14:50,407 --> 00:14:51,847
Here it is, mathematical formulas.

359
00:14:52,308 --> 00:14:53,668
And these formulas mean nothing here,

360
00:14:53,728 --> 00:14:54,909
I literally just threw them in there.

361
00:14:55,349 --> 00:14:56,590
But I'm sure yours will mean a lot.

362
00:14:57,290 --> 00:14:58,211
Moving on to the next thing,

363
00:14:58,871 --> 00:15:00,292
sort of the next level up from that,

364
00:15:00,452 --> 00:15:02,833
and this is an often overlooked thing I think.

365
00:15:03,073 --> 00:15:10,317
is Excel. I've done entire simulations literally in Excel, which is really cool. It can be

366
00:15:10,337 --> 00:15:13,299
a little painful sometimes, but I mean Excel has a random number generator. How many of

367
00:15:13,319 --> 00:15:17,202
you knew that? It actually has a random number generator. Oh, like half of you. Okay. That's

368
00:15:17,222 --> 00:15:21,845
a lot more than I thought. So you can actually just keep refreshing it, refreshing that line,

369
00:15:21,965 --> 00:15:23,886
and it will just regenerate your simulation.

370
00:15:24,767 --> 00:15:28,507
I had an amazing thing, I couldn't get a hold of it to show, but I had this amazing one.

371
00:15:28,567 --> 00:15:32,988
It was my favorite that I ever built on The Sims 4 was, I called it Commander Tomaloc

372
00:15:33,028 --> 00:15:38,169
Throws a Party, which is a Star Trek joke for those of you who know and love Star Trek

373
00:15:38,189 --> 00:15:38,570
like I do.

374
00:15:39,370 --> 00:15:44,531
Commander Tomaloc was just, for all intents and purposes, was a sim.

375
00:15:44,891 --> 00:15:48,632
And I had a bunch of other sims that were along in there, and the entire purpose of

376
00:15:48,712 --> 00:15:51,032
it was to simulate what happens when I throw a party.

377
00:15:51,632 --> 00:15:55,434
So we need a caterer, we need a DJ, we need all these different roles to be filled.

378
00:15:55,715 --> 00:15:59,757
So how do we choose an appropriate sim to fulfill those roles?

379
00:16:00,677 --> 00:16:04,959
And so I created a system that did it, and I tweaked it for a while,

380
00:16:05,039 --> 00:16:09,041
said, okay, this feels right, all in Excel, and then I handed it over to design and said,

381
00:16:09,402 --> 00:16:10,102
here's what I'm thinking.

382
00:16:10,542 --> 00:16:12,643
And so they got to play with the different skill values

383
00:16:12,703 --> 00:16:15,005
and different motive values and just whatever stats

384
00:16:15,025 --> 00:16:17,486
that they wanted to play with, keep regenerating and say,

385
00:16:17,586 --> 00:16:19,187
yes, these sims are appropriate.

386
00:16:19,527 --> 00:16:21,028
Kick it back to me and say, OK, great.

387
00:16:21,088 --> 00:16:22,048
Now I have the model.

388
00:16:22,328 --> 00:16:23,229
Now I can do what I want.

389
00:16:24,009 --> 00:16:24,810
So it's Overlooked.

390
00:16:25,290 --> 00:16:27,131
This one's more for newcomers.

391
00:16:27,171 --> 00:16:28,772
This next one is more for newcomers.

392
00:16:31,153 --> 00:16:33,534
Sort of less experienced devs, I think, Overlook.

393
00:16:34,255 --> 00:16:36,675
things like prototypes, so that's why I mention it here.

394
00:16:37,276 --> 00:16:40,737
These prototypes, god, sometimes I feel like I write

395
00:16:40,777 --> 00:16:43,057
more prototype code these days than I do real code,

396
00:16:43,558 --> 00:16:46,319
because this is answering whatever question

397
00:16:46,339 --> 00:16:47,139
that I need to answer.

398
00:16:47,219 --> 00:16:49,740
So like, on a Starship simulation game I'm working on

399
00:16:49,780 --> 00:16:52,140
on the left, that's how all of the crew are generated

400
00:16:52,200 --> 00:16:53,701
there on the left that you see.

401
00:16:54,842 --> 00:16:57,644
I have a story simulation and story generator

402
00:16:57,684 --> 00:17:00,827
based loosely on propositional logic on the top right

403
00:17:00,867 --> 00:17:02,788
and a whole star system generator on the bottom

404
00:17:02,868 --> 00:17:06,131
and they're just silly little like C sharp

405
00:17:06,151 --> 00:17:07,292
or the one on the left is Python,

406
00:17:07,332 --> 00:17:08,833
like just little apps that I did.

407
00:17:09,053 --> 00:17:10,454
You know, it's in a thousand lines of code

408
00:17:10,475 --> 00:17:11,175
or 500 lines of code.

409
00:17:11,215 --> 00:17:12,977
I can prototype this thing before I have to like,

410
00:17:13,057 --> 00:17:15,138
okay, let me architect it into this thing

411
00:17:15,178 --> 00:17:16,039
that I have to care about.

412
00:17:17,420 --> 00:17:21,003
So never underestimate the power of things like prototypes.

413
00:17:23,430 --> 00:17:26,152
Also, probably my biggest piece of advice for prototypes,

414
00:17:27,353 --> 00:17:30,935
throw it and, yeah, throw it the fuck away.

415
00:17:31,235 --> 00:17:32,856
Really, like throw it away once it's done.

416
00:17:33,496 --> 00:17:35,197
Please, how many of you have taken a prototype,

417
00:17:35,237 --> 00:17:37,118
built a prototype, and then taken that forward

418
00:17:37,138 --> 00:17:37,659
to production?

419
00:17:39,760 --> 00:17:40,420
Be honest.

420
00:17:41,421 --> 00:17:43,622
How many of you, was that a positive experience?

421
00:17:45,143 --> 00:17:45,623
One person!

422
00:17:46,727 --> 00:17:49,388
So one person out of the, what, 200 people in this room.

423
00:17:49,869 --> 00:17:50,809
So half a percent.

424
00:17:51,610 --> 00:17:52,750
I worked on a game called Brain Quest,

425
00:17:52,770 --> 00:17:53,991
which has nothing to do with AI.

426
00:17:55,072 --> 00:17:58,314
And we built the prototype, and before I got there,

427
00:17:58,394 --> 00:17:59,635
the prototype was built in Flash.

428
00:18:00,555 --> 00:18:01,896
So we're using ActionScript and stuff like that.

429
00:18:01,916 --> 00:18:02,937
And we're like, okay, this looks good.

430
00:18:03,257 --> 00:18:05,158
And they're like, well, we don't wanna throw this away.

431
00:18:05,778 --> 00:18:07,459
The game was for the original DS.

432
00:18:08,529 --> 00:18:11,231
We built a flash interpreter for the DS.

433
00:18:11,411 --> 00:18:12,372
That was the solution.

434
00:18:12,852 --> 00:18:14,333
It ran as quickly as you thought,

435
00:18:14,353 --> 00:18:15,875
and it's the only project I've ever been on

436
00:18:15,895 --> 00:18:17,676
where depth of function calls

437
00:18:17,716 --> 00:18:19,277
was a real performance hindrance,

438
00:18:19,317 --> 00:18:20,898
and literally unrolling loops,

439
00:18:21,219 --> 00:18:22,780
hand unrolling loops was a thing.

440
00:18:23,340 --> 00:18:24,281
It was amazing.

441
00:18:24,501 --> 00:18:25,902
So throw your prototypes away, please.

442
00:18:26,322 --> 00:18:26,903
Good God.

443
00:18:27,423 --> 00:18:27,703
Okay.

444
00:18:28,704 --> 00:18:29,465
Let's go a little deeper.

445
00:18:30,465 --> 00:18:32,147
Now we're gonna talk about a scheduling system.

446
00:18:33,466 --> 00:18:38,469
So this scheduling system, you know, I've spoken about this a little bit in other things.

447
00:18:39,730 --> 00:18:42,291
Humans follow a schedule. Like, that's just sort of reality.

448
00:18:43,912 --> 00:18:49,036
You will generally throughout the day, you know, and this is definitely not my schedule, I'm not awake at 8.30 in the morning.

449
00:18:50,156 --> 00:18:53,138
You'll definitely follow some kind of schedule, you know, you go to work around the same time and so on.

450
00:18:53,258 --> 00:18:55,160
On the Sims we followed mostly a weekly schedule.

451
00:18:56,240 --> 00:19:01,244
On, you know, the Starship Sim that I mentioned earlier, they follow a daily schedule because it's a military ship.

452
00:19:02,244 --> 00:19:02,444
So...

453
00:19:02,945 --> 00:19:05,126
You know, this allows you to constrain

454
00:19:05,446 --> 00:19:07,267
or whatever the opposite of constrain is,

455
00:19:07,307 --> 00:19:10,669
like expand your horizons in terms of what you can score.

456
00:19:11,369 --> 00:19:14,251
Okay, the basic architecture works like this.

457
00:19:14,611 --> 00:19:16,532
You have an agent which has some number of schedules

458
00:19:17,112 --> 00:19:19,674
and those schedules have some number of entries

459
00:19:19,714 --> 00:19:21,655
which in turn wraps some kind of time.

460
00:19:22,255 --> 00:19:23,416
That's basically the idea.

461
00:19:23,456 --> 00:19:24,516
You can have any number of schedules,

462
00:19:24,536 --> 00:19:26,337
you can have any number of entries within those schedules.

463
00:19:27,495 --> 00:19:29,055
Here's an example, this is a schedule.

464
00:19:29,595 --> 00:19:31,175
You can have overlapping entries, as I said,

465
00:19:31,255 --> 00:19:32,596
so these entries can overlap.

466
00:19:32,956 --> 00:19:34,916
This row represents one single schedule.

467
00:19:36,217 --> 00:19:37,837
And so here you see that there's a split,

468
00:19:37,857 --> 00:19:39,377
so there's two entries that are overlapping.

469
00:19:40,497 --> 00:19:43,478
You can have white space here, which is a totally blank space

470
00:19:43,538 --> 00:19:45,098
and you have to consider how that works.

471
00:19:46,059 --> 00:19:49,459
Entries themselves have the start time and end time,

472
00:19:49,479 --> 00:19:51,000
as I said, and they have a set of tasks.

473
00:19:51,295 --> 00:19:52,496
Tasks I can't tell you how to do.

474
00:19:52,596 --> 00:19:54,537
That's totally up to your game, right?

475
00:19:54,737 --> 00:19:55,557
Whatever your tasks are.

476
00:19:55,578 --> 00:19:57,199
They're interactions on The Sims, for example.

477
00:19:58,259 --> 00:19:59,540
But it's whatever it is.

478
00:19:59,600 --> 00:20:01,822
Sometimes it's as simple as, I'm going to walk over here

479
00:20:02,102 --> 00:20:03,042
and run some animation.

480
00:20:03,423 --> 00:20:04,383
Like, it could be that easy.

481
00:20:04,503 --> 00:20:05,484
Or it could be super complex.

482
00:20:07,844 --> 00:20:10,345
Generally tasks can be chosen in, if it's like,

483
00:20:10,785 --> 00:20:11,946
if you're trying to do this as part of just like

484
00:20:12,046 --> 00:20:14,547
background AI, just a basic weighted or even

485
00:20:14,587 --> 00:20:16,707
uniform random is probably fine.

486
00:20:17,908 --> 00:20:20,209
It's not gonna hurt me too much in my soul.

487
00:20:21,029 --> 00:20:22,590
But I tend to go more the utility curve route

488
00:20:22,710 --> 00:20:23,670
as you've probably guessed.

489
00:20:23,970 --> 00:20:26,211
The Sims Medieval heavily used a scheduling system

490
00:20:26,451 --> 00:20:30,072
and we just used a utility curve kind of

491
00:20:30,092 --> 00:20:31,853
standard Sim scoring to figure out

492
00:20:31,973 --> 00:20:34,314
what we wanted to do once we hit that.

493
00:20:35,532 --> 00:20:39,513
Tasks are, and forgive this, because I enjoy math,

494
00:20:39,873 --> 00:20:42,834
tasks are basically union of all of the different task sets

495
00:20:42,874 --> 00:20:44,555
from all of the different schedules

496
00:20:44,595 --> 00:20:46,115
and all of the different entries that you're in.

497
00:20:46,535 --> 00:20:48,076
So if I'm in three different entries,

498
00:20:48,416 --> 00:20:51,377
then I will basically have the union

499
00:20:51,397 --> 00:20:52,778
of all of the tasks in those entries.

500
00:20:52,938 --> 00:20:54,138
Those are the ones that I'm looking at.

501
00:20:54,798 --> 00:20:56,079
So, let's look at another example.

502
00:20:56,839 --> 00:20:58,540
So we have this thing here.

503
00:20:58,760 --> 00:20:59,700
We're going to,

504
00:21:01,280 --> 00:21:02,501
can't even see what it's doing on the screen.

505
00:21:02,541 --> 00:21:03,961
Yes, so we add a new schedule.

506
00:21:06,202 --> 00:21:09,384
Then over here we have these kind of overlapping sets.

507
00:21:09,684 --> 00:21:13,026
So these are the overlapping ones in this particular case.

508
00:21:13,106 --> 00:21:15,367
So if we're at 10 hundred hours, for example,

509
00:21:15,428 --> 00:21:18,249
then we're gonna take all of the tasks

510
00:21:18,289 --> 00:21:19,210
from all of those things.

511
00:21:19,250 --> 00:21:21,191
13 hundred hours is all the tasks from those guys, right?

512
00:21:22,752 --> 00:21:23,892
Schedules can be prioritized.

513
00:21:24,152 --> 00:21:26,674
So this might be a high priority schedule, for instance.

514
00:21:27,768 --> 00:21:32,392
this high-priority schedule is going to change the way that we're going to process.

515
00:21:32,772 --> 00:21:36,676
So, for example, just as a simple example, we're at 8.30 basically.

516
00:21:38,637 --> 00:21:41,059
So, if we're at 8.30, then we're going to look at our high-priority schedule,

517
00:21:41,079 --> 00:21:43,441
we're going to ignore it because this is a blank entry, right?

518
00:21:44,382 --> 00:21:45,483
And we're going to go to the next set,

519
00:21:45,503 --> 00:21:48,586
and then we're going to basically choose something from within this set.

520
00:21:50,607 --> 00:21:53,207
If we take a different example, we're here,

521
00:21:53,328 --> 00:21:54,748
then we're gonna look at our high priority set.

522
00:21:54,768 --> 00:21:56,068
We're gonna completely ignore anything

523
00:21:56,088 --> 00:21:57,068
from our lower priority set.

524
00:21:57,449 --> 00:21:59,029
This allows us to have schedules that overlap

525
00:21:59,969 --> 00:22:02,010
and overwrite other schedules.

526
00:22:02,330 --> 00:22:04,610
So we can say, here's your general default schedule.

527
00:22:04,890 --> 00:22:06,311
This is how you act every day,

528
00:22:06,751 --> 00:22:09,692
but you are a traitor to the rebellion,

529
00:22:09,852 --> 00:22:12,572
and so here you are going, like during this particular time,

530
00:22:12,592 --> 00:22:14,733
you're gonna go and do traitorous things.

531
00:22:14,753 --> 00:22:17,254
It allows us to do those types of interesting things.

532
00:22:20,151 --> 00:22:23,912
This is an example of what a priority might look like.

533
00:22:24,972 --> 00:22:26,152
The only reason why I'm showing this

534
00:22:26,212 --> 00:22:28,893
is because please, this is a big gotcha.

535
00:22:29,453 --> 00:22:31,654
This hit us in other projects I've been on.

536
00:22:31,894 --> 00:22:33,914
You want to have a very small number of priorities.

537
00:22:34,254 --> 00:22:35,475
This is actually maybe too many.

538
00:22:35,575 --> 00:22:36,955
I don't think I'm even using critical.

539
00:22:37,475 --> 00:22:39,756
So, like two or three priorities,

540
00:22:39,836 --> 00:22:40,956
not like the Sims which had like 30.

541
00:22:41,196 --> 00:22:42,976
That gets nuts.

542
00:22:44,017 --> 00:22:45,997
Okay, so let's talk a little bit

543
00:22:46,917 --> 00:22:48,978
about how these blank entries work.

544
00:22:49,954 --> 00:22:50,494
That's up to you.

545
00:22:50,734 --> 00:22:51,235
What do you do?

546
00:22:51,655 --> 00:22:53,377
On The Sims, we said that was your free time.

547
00:22:53,397 --> 00:22:54,317
It was part of the design.

548
00:22:54,678 --> 00:22:55,719
We said you're just not constrained.

549
00:22:55,739 --> 00:22:56,620
You can do whatever you want.

550
00:22:58,001 --> 00:23:00,383
For other projects, it could be an error state.

551
00:23:00,623 --> 00:23:02,645
So it's a conscious decision you have to make

552
00:23:02,665 --> 00:23:03,986
of what happens when I'm out of a schedule.

553
00:23:04,266 --> 00:23:06,148
Because even if you design your characters

554
00:23:06,168 --> 00:23:07,409
to always be in a schedule,

555
00:23:07,890 --> 00:23:09,611
there will always be some bug where they're not.

556
00:23:11,091 --> 00:23:14,653
Oh, and generally add schedules through tags and things like that.

557
00:23:15,013 --> 00:23:15,693
OK. Updates.

558
00:23:16,213 --> 00:23:17,053
So the way that updating...

559
00:23:17,274 --> 00:23:18,534
We have to talk about how updates work,

560
00:23:18,594 --> 00:23:19,835
because we don't want to do, like,

561
00:23:19,935 --> 00:23:21,355
for each character in the world,

562
00:23:21,415 --> 00:23:22,356
for each schedule in the world,

563
00:23:22,396 --> 00:23:24,096
for each entry in the world, update.

564
00:23:24,196 --> 00:23:25,197
Right? That sounds terrible.

565
00:23:25,657 --> 00:23:25,897
So...

566
00:23:26,477 --> 00:23:30,721
you know, we can do some kind of time slicing,

567
00:23:31,062 --> 00:23:32,723
we can do some kind of threading,

568
00:23:34,285 --> 00:23:36,286
but I think the more interesting thing to realize

569
00:23:36,326 --> 00:23:38,649
is that schedules have discrete moments

570
00:23:38,989 --> 00:23:41,171
where I actually care about anything that's happening

571
00:23:41,191 --> 00:23:42,172
in the schedule whatsoever

572
00:23:42,232 --> 00:23:43,853
beyond my task set changing, right?

573
00:23:44,194 --> 00:23:45,855
The task set that I'm scoring against

574
00:23:45,975 --> 00:23:48,117
only changes at these very specific cadences

575
00:23:48,177 --> 00:23:49,358
or these very specific moments.

576
00:23:50,282 --> 00:23:51,443
So we have to define a new system.

577
00:23:52,724 --> 00:23:54,246
I'm gonna define it kind of generically,

578
00:23:54,266 --> 00:23:55,067
because that's how I think.

579
00:23:56,569 --> 00:23:57,810
So I've created this little system,

580
00:23:57,830 --> 00:23:59,292
this is like delayed callback.

581
00:23:59,432 --> 00:24:01,214
You know, it's just, it's basically a function

582
00:24:01,274 --> 00:24:02,255
wrapped in a time call.

583
00:24:03,624 --> 00:24:08,848
You have this manager that has this heap of callbacks, so you know priority queues are all the rage.

584
00:24:09,708 --> 00:24:12,170
You can add and remove callbacks, right, it's just an API for doing this stuff.

585
00:24:12,430 --> 00:24:13,151
And you have an update.

586
00:24:13,311 --> 00:24:16,933
So the way that it works is it's global to all of your schedule, to the entire schedule system.

587
00:24:17,374 --> 00:24:18,755
Or maybe even your entire game, why not?

588
00:24:19,795 --> 00:24:24,399
And you can add, so it can, for all the schedules, for all the characters, across everything.

589
00:24:25,499 --> 00:24:27,181
you have this sort of priority queue

590
00:24:27,601 --> 00:24:28,762
of all of the different updates

591
00:24:28,802 --> 00:24:29,803
and when they're going to happen.

592
00:24:30,083 --> 00:24:32,305
So the magic here is that you're not doing this order

593
00:24:32,445 --> 00:24:34,267
and like update across everything.

594
00:24:34,667 --> 00:24:36,108
Most of the time you're doing constant time.

595
00:24:36,168 --> 00:24:37,870
Let's look at the first one, I don't need to update it

596
00:24:38,090 --> 00:24:39,291
because it's sorted based on time.

597
00:24:40,492 --> 00:24:43,134
The one gotcha that you have to deal with is,

598
00:24:43,514 --> 00:24:44,655
you know, if you're making,

599
00:24:44,895 --> 00:24:46,176
like that was great on The Sims Medieval

600
00:24:46,196 --> 00:24:47,457
where they had very different schedules,

601
00:24:47,497 --> 00:24:49,419
but in a military sim, you know,

602
00:24:50,120 --> 00:24:52,161
you still have to do something, some kind of time slicing.

603
00:24:52,942 --> 00:24:53,783
So just be aware of that.

604
00:24:55,382 --> 00:24:58,204
So, new schedule's added, here it is.

605
00:24:58,784 --> 00:25:01,406
That's our new moment that we have to care about.

606
00:25:01,466 --> 00:25:03,026
We throw it into our little callback heap,

607
00:25:03,567 --> 00:25:04,647
and we're done, that's it.

608
00:25:04,827 --> 00:25:07,789
That's basically the idea of how this core system works.

609
00:25:10,651 --> 00:25:12,732
Now, if you take a step back,

610
00:25:13,779 --> 00:25:18,303
And just squint your eyes at this scheduling system.

611
00:25:18,323 --> 00:25:20,085
Like really just squint your eyes at it for a minute.

612
00:25:22,027 --> 00:25:24,029
Kind of looks like a state machine somewhere.

613
00:25:24,789 --> 00:25:26,711
Except it's where the transitions are based on

614
00:25:26,731 --> 00:25:28,673
the constant march of time.

615
00:25:30,334 --> 00:25:33,877
The ideas are that the states sort of define

616
00:25:34,518 --> 00:25:36,359
what different actions that I can choose from,

617
00:25:36,579 --> 00:25:38,941
whether constrained or expanded,

618
00:25:39,842 --> 00:25:41,823
change the set of tasks that I have the ability

619
00:25:41,863 --> 00:25:42,324
to choose from.

620
00:25:42,564 --> 00:25:44,005
So you can think of those as different states.

621
00:25:44,265 --> 00:25:47,248
So even if your game is not directly tied to time,

622
00:25:47,608 --> 00:25:50,350
the idea is to create these small little discrete

623
00:25:50,390 --> 00:25:52,472
like states really that they're in.

624
00:25:52,852 --> 00:25:54,593
What if you're in a heist or something like that

625
00:25:54,613 --> 00:25:56,335
and then there's like different events

626
00:25:56,375 --> 00:25:57,175
that happen through there,

627
00:25:57,215 --> 00:25:58,336
so it could even be event-based.

628
00:25:59,305 --> 00:26:01,466
So that's a thing that you can kind of squint your eyes

629
00:26:01,907 --> 00:26:03,288
and see that a bit.

630
00:26:04,909 --> 00:26:06,310
So that's the idea.

631
00:26:06,330 --> 00:26:12,074
I spoke really fast, but I think I have, what, three minutes?

632
00:26:13,616 --> 00:26:14,196
Yeah, sweet.

633
00:26:14,216 --> 00:26:16,858
That's actually only two minutes over than my practice time.

634
00:26:17,098 --> 00:26:18,119
So thank you very much.

635
00:26:18,159 --> 00:26:19,640
If there's any questions, there's microphones.

636
00:26:19,660 --> 00:26:23,903
Thank you.

637
00:26:33,710 --> 00:26:33,910
Great.

638
00:26:36,014 --> 00:26:37,958
I'll stand here and stare awkwardly at the audience

639
00:26:37,998 --> 00:26:38,800
for three minutes then.

640
00:26:41,846 --> 00:26:42,747
Thanks for your talk.

641
00:26:42,908 --> 00:26:43,108
Yeah.

642
00:26:43,749 --> 00:26:44,912
I was wondering if you could speak to.

643
00:26:46,122 --> 00:26:52,006
I guess the nature of time inside the Sims and just like how you do it relative to like

644
00:26:52,046 --> 00:26:57,650
wall time and real time and like and then how you actually like the mechanics of the

645
00:26:57,690 --> 00:26:58,350
click I guess.

646
00:26:59,031 --> 00:27:01,732
Like the mechanics of like actual simulation time?

647
00:27:01,893 --> 00:27:03,714
Yeah and how you accelerate it.

648
00:27:03,754 --> 00:27:05,155
Do you have your own calendar system?

649
00:27:05,175 --> 00:27:06,856
Like I'm just kind of curious how you.

650
00:27:07,256 --> 00:27:07,737
Yeah.

651
00:27:07,817 --> 00:27:10,199
Move stuff forward with its own time.

652
00:27:10,279 --> 00:27:14,083
Internally, literally, it is a double of ticks, essentially.

653
00:27:15,584 --> 00:27:17,586
There's a date and time object and a time span object

654
00:27:17,606 --> 00:27:18,167
and that kind of stuff.

655
00:27:18,187 --> 00:27:21,130
So you could get different dates and times

656
00:27:21,170 --> 00:27:21,790
and that kind of stuff.

657
00:27:22,471 --> 00:27:25,334
Yes, we had our own, basically, internal calendar system.

658
00:27:25,434 --> 00:27:25,814
That's right.

659
00:27:27,215 --> 00:27:29,256
So it was like, how many, I'm trying to remember what it was.

660
00:27:29,296 --> 00:27:34,338
It was, yeah, seconds, minutes, hours, days,

661
00:27:34,618 --> 00:27:36,658
and then I think weeks was in there,

662
00:27:36,698 --> 00:27:37,619
and then months, certainly.

663
00:27:38,459 --> 00:27:39,379
So those were all the different ones.

664
00:27:39,620 --> 00:27:42,761
It was approximately one real-time second

665
00:27:42,861 --> 00:27:44,561
per simulation minute.

666
00:27:45,802 --> 00:27:49,663
in single speed, and then double speed was actually times,

667
00:27:50,203 --> 00:27:51,484
I don't remember what they got tuned to,

668
00:27:51,504 --> 00:27:52,604
but something like times three,

669
00:27:52,664 --> 00:27:55,045
and then three times two was something like times 10.

670
00:27:55,405 --> 00:27:56,966
I don't remember exactly what the values

671
00:27:57,006 --> 00:27:58,186
were specifically tuned to.

672
00:27:59,207 --> 00:28:00,667
But that's basically how the ticks worked.

673
00:28:01,408 --> 00:28:02,088
Does that answer your question?

674
00:28:02,108 --> 00:28:02,608
Yeah, yeah.

675
00:28:02,628 --> 00:28:04,169
I was just curious because you can't use

676
00:28:04,189 --> 00:28:05,269
the system time necessarily.

677
00:28:06,229 --> 00:28:07,630
No, yeah, we can't use the system time.

678
00:28:07,670 --> 00:28:10,431
Yeah, we had a whole time system, basically, that worked.

679
00:28:11,911 --> 00:28:12,111
Cool.

680
00:28:14,774 --> 00:28:16,695
Great, well that's it, I'll be around.

681
00:28:17,036 --> 00:28:19,217
So feel free to come up and chat with me about stuff.

682
00:28:19,617 --> 00:28:21,098
If you wanna know about any of the other stuff

683
00:28:21,118 --> 00:28:22,739
that I spoke about more in depth,

684
00:28:22,779 --> 00:28:24,941
I'm happy to go more in depth on that kind of stuff.

685
00:28:25,881 --> 00:28:27,002
But yeah, that's it for me.

686
00:28:27,062 --> 00:28:28,143
Thank you so much, thanks for coming.

