1
00:00:07,012 --> 00:00:08,292
Thank you.

2
00:00:08,292 --> 00:00:09,112
Hello.

3
00:00:09,112 --> 00:00:11,033
My name is Seth Rosen.

4
00:00:11,033 --> 00:00:13,234
Please shut off your cell phones.

5
00:00:13,234 --> 00:00:14,195
Try to squeeze towards the center

6
00:00:14,195 --> 00:00:17,356
so people who are coming late can find a seat.

7
00:00:17,356 --> 00:00:20,657
And do remember to fill out your GDC surveys

8
00:00:20,657 --> 00:00:24,259
that you'll get in your email after you've checked in.

9
00:00:24,259 --> 00:00:25,339
All right.

10
00:00:26,420 --> 00:00:31,963
So as I said, my name's Seth. I'm a systems designer. So this is a level design workshop.

11
00:00:31,963 --> 00:00:36,026
Why is there a systems designer up here? Well, for a couple of games that I've worked on,

12
00:00:36,026 --> 00:00:41,649
my focus has been on AI behavior outside of combat. On Bioshock Infinite, I was part of

13
00:00:41,649 --> 00:00:46,192
Liz Squad, which is the team primarily responsible for Elizabeth, who's our companion character.

14
00:00:46,192 --> 00:00:50,535
And on that project, I was kind of more of a character designer. I was using level design

15
00:00:50,535 --> 00:00:53,136
and systems design to make Liz feel alive.

16
00:00:53,317 --> 00:00:57,199
And right now, on Mafia 3, I'm working on what we're calling the living world.

17
00:00:57,199 --> 00:01:01,922
It's the population and activity of our version of New Orleans in 1968.

18
00:01:01,922 --> 00:01:05,445
Alright, let's dive in. So, games are interactive, right?

19
00:01:05,445 --> 00:01:09,548
We're not in the business of throwing something up on screen

20
00:01:09,548 --> 00:01:11,429
and just letting the player observe it.

21
00:01:11,429 --> 00:01:14,511
We want to draw the player into this experience and make them believe in it.

22
00:01:14,511 --> 00:01:18,434
Believe that this space is part of a larger world.

23
00:01:19,154 --> 00:01:24,979
And environment art is a really huge part of this, but it's static and it mainly deals in history.

24
00:01:24,979 --> 00:01:28,663
So how can we add some dynamism to this experience?

25
00:01:28,663 --> 00:01:34,608
And one solution is, the solution I'm personally most excited about is to add life to your level.

26
00:01:34,608 --> 00:01:38,892
Actors inhabiting the space who interact with their surroundings and react to changing conditions

27
00:01:38,892 --> 00:01:41,895
and, you know, just generally exhibit lifelike behaviors.

28
00:01:42,823 --> 00:01:45,686
Now, the lead actor, of course, is the player.

29
00:01:45,686 --> 00:01:50,469
And they're probably really the only actor that can actually be considered to be full of life,

30
00:01:50,469 --> 00:01:54,212
but we can create the illusion of life for other characters in the world.

31
00:01:54,212 --> 00:01:58,054
And ultimately, that's what I'm talking about when I say life in your level.

32
00:01:58,054 --> 00:02:01,237
Or, to put it another way, a performance of life.

33
00:02:01,237 --> 00:02:07,201
Characters, whether they're humans in life or AI in games, are performers.

34
00:02:08,528 --> 00:02:11,390
The person sitting next to you, no matter how well they know you,

35
00:02:11,390 --> 00:02:14,232
has no idea what's going on in your head by default,

36
00:02:14,232 --> 00:02:16,874
or for that matter, that anything's going on.

37
00:02:16,874 --> 00:02:19,835
Without performance, we're empty shells.

38
00:02:19,835 --> 00:02:22,057
And gaming AIs definitely start out as empty shells.

39
00:02:22,057 --> 00:02:25,219
It's up to us to fill them up with that yolky goodness

40
00:02:25,219 --> 00:02:28,541
and create that illusion of life.

41
00:02:28,541 --> 00:02:33,584
Fortunately, humans have a pretty good sense of how to perform life.

42
00:02:34,171 --> 00:02:37,132
And on top of that, there's actually only one person that we really need to

43
00:02:37,132 --> 00:02:40,953
convince that our AIs are alive. It's the person holding the controller.

44
00:02:40,953 --> 00:02:43,854
And that's important, actually.

45
00:02:43,854 --> 00:02:46,755
Game AI, above all else, should be player-facing.

46
00:02:46,755 --> 00:02:50,537
If the player doesn't see their performance,

47
00:02:50,537 --> 00:02:51,917
they might as well not be on stage at all.

48
00:02:51,917 --> 00:02:54,878
And that's where the bad news comes in.

49
00:02:54,878 --> 00:02:57,599
If the performance ever falters,

50
00:02:57,599 --> 00:03:00,560
the audience's suspension of disbelief just evaporates.

51
00:03:01,343 --> 00:03:04,344
So right out of the gate, scripting an AI's behavior and

52
00:03:04,344 --> 00:03:08,525
reactions is pretty much an on starter. And believe me, we did

53
00:03:08,525 --> 00:03:12,426
try on Bioshock Infinite. For a long, long time, Liz existed as

54
00:03:12,426 --> 00:03:15,467
an AI that was really only functional in the most basic

55
00:03:15,467 --> 00:03:18,648
sense of the word. She would follow along and take cover and

56
00:03:18,648 --> 00:03:22,129
that was about it. It was painfully apparent that we had a

57
00:03:22,129 --> 00:03:25,670
long way to go before she was a really believable and relatable

58
00:03:25,670 --> 00:03:26,451
human character. So

59
00:03:28,326 --> 00:03:32,290
We picked an area of the game that would serve as her crucible. It was the beach in Battleship Bay.

60
00:03:32,290 --> 00:03:36,613
And our first attempt consisted of a series of triggers that when the player hit them,

61
00:03:36,613 --> 00:03:39,876
Liz would go to her next mark, and at each mark she would play an animation.

62
00:03:39,876 --> 00:03:44,380
The results were abysmal. Terrible.

63
00:03:44,380 --> 00:03:48,504
The biggest issues were how few things she had to do in the space,

64
00:03:48,504 --> 00:03:51,927
how poorly she reacted to any moderately irregular player movement,

65
00:03:51,927 --> 00:03:55,750
and how much additional scripting we would have to do to make her respond to anything going on.

66
00:03:57,652 --> 00:04:00,032
So after demonstrating to ourselves that, yeah, there's

67
00:04:00,032 --> 00:04:02,613
just too many rules to being human for scripting

68
00:04:02,613 --> 00:04:06,594
to be a vile option, we decided that the only path forward

69
00:04:06,594 --> 00:04:07,034
was systems.

70
00:04:07,034 --> 00:04:08,054
Right here, I've got a video of Liz making

71
00:04:08,054 --> 00:04:11,555
use of some of these systems.

72
00:04:11,555 --> 00:04:14,456
I'll get into the details of them a little bit later on.

73
00:04:14,456 --> 00:04:17,497
But we could make suggestions to her

74
00:04:17,497 --> 00:04:20,097
and let the systems decide what she

75
00:04:20,097 --> 00:04:21,778
was going to do rather than being

76
00:04:21,778 --> 00:04:23,218
prescriptive about her behaviors.

77
00:04:24,101 --> 00:04:27,323
And this is better from a production and robustness standpoint,

78
00:04:27,323 --> 00:04:31,186
but it also maps pretty directly onto real world examples of life and humanity.

79
00:04:31,186 --> 00:04:35,009
Our lives proceed according to a series of rules and patterns.

80
00:04:35,009 --> 00:04:37,291
And humanity is born of these things.

81
00:04:37,291 --> 00:04:40,273
It's a collection of tiny hints to others.

82
00:04:40,273 --> 00:04:43,895
We can create a set of systems that act on a character, and

83
00:04:43,895 --> 00:04:46,497
these systems describe these rules and patterns,

84
00:04:46,497 --> 00:04:49,139
and then these systems continually offer options to the character

85
00:04:49,139 --> 00:04:52,822
for the options that they have to do in their behaviors.

86
00:04:53,653 --> 00:04:56,936
The result is a performance of infinite duration.

87
00:04:56,936 --> 00:04:59,118
And that's kind of what we're going for,

88
00:04:59,118 --> 00:05:00,939
because we'd never want that performance to fall apart.

89
00:05:00,939 --> 00:05:06,064
So the next step was to figure out exactly what patterns

90
00:05:06,064 --> 00:05:09,046
of behavior we wanted to give Liz,

91
00:05:09,046 --> 00:05:11,388
and how we were going to spotlight her performance.

92
00:05:11,388 --> 00:05:12,329
And as we were figuring this out,

93
00:05:12,329 --> 00:05:15,471
our main reference materials were theater, Disney animation,

94
00:05:15,471 --> 00:05:16,753
and our own everyday lives.

95
00:05:17,595 --> 00:05:24,896
To organize my thinking when I'm kind of figuring out how to give life to a character, I break their behaviors down into five categories.

96
00:05:24,896 --> 00:05:31,137
Activity, Idle, Conversation, Locomotion, and if it's in the game, Combat.

97
00:05:31,137 --> 00:05:39,779
I break it down this way because there's not one single thing that we're going to do to convince our players that our AI is alive.

98
00:05:39,779 --> 00:05:45,680
It's this wide array of behaviors and actions that all sum together communicate life.

99
00:05:47,359 --> 00:05:50,940
Now, when our goal is to breathe life into an entire city,

100
00:05:50,940 --> 00:05:55,141
rather than a single character, the activity and idle

101
00:05:55,141 --> 00:05:57,881
categories kind of blur together a little bit.

102
00:05:57,881 --> 00:05:59,042
But I think the categories are still

103
00:05:59,042 --> 00:06:01,262
useful for kind of figuring out what your approach should be.

104
00:06:01,262 --> 00:06:03,322
All right, let's talk about activity.

105
00:06:03,322 --> 00:06:05,263
An AI's activity are the behaviors

106
00:06:05,263 --> 00:06:09,164
that demonstrate that they take an active interest

107
00:06:09,164 --> 00:06:10,084
in their world.

108
00:06:10,084 --> 00:06:12,304
They belong in this world, and they have desires

109
00:06:12,304 --> 00:06:13,365
and intentions of their own.

110
00:06:14,187 --> 00:06:16,888
For Liz, we call the system Smart Terrain.

111
00:06:16,888 --> 00:06:18,788
On Mafia 3, it's called World Interactions.

112
00:06:18,788 --> 00:06:21,909
But it's basically the same thing in both cases,

113
00:06:21,909 --> 00:06:24,010
and it's probably something you may have encountered

114
00:06:24,010 --> 00:06:24,570
in your own work.

115
00:06:24,570 --> 00:06:26,771
There are smart objects that are basically

116
00:06:26,771 --> 00:06:30,252
a big ball of data, animation, code, art assets,

117
00:06:30,252 --> 00:06:32,612
sound effects, VO, and visual effects.

118
00:06:32,612 --> 00:06:34,733
They're game objects that have instructions

119
00:06:34,733 --> 00:06:37,514
for the character and conditions for use.

120
00:06:37,514 --> 00:06:39,194
Okay, let's look at a few examples

121
00:06:39,194 --> 00:06:40,775
of Liz's capital A activity.

122
00:06:41,558 --> 00:06:45,961
Let's do a show of hands. For those of you who have played Bioshock Infinite, who remembers when,

123
00:06:45,961 --> 00:06:50,603
after waking up on the beach, you find Liz dancing on the pier and she invites you to join her?

124
00:06:50,603 --> 00:06:52,284
Most people. So that was scripted. 100% of players who got that far saw that moment. Now,

125
00:06:52,284 --> 00:07:01,949
who remembers Liz trying to pick up a medicine ball or skipping stones on the beach? Way

126
00:07:01,949 --> 00:07:04,810
fewer. And that's actually what we want.

127
00:07:12,346 --> 00:07:15,207
These were entirely systemic but they feel almost scripted.

128
00:07:15,207 --> 00:07:18,847
They have VO and you probably only saw them once.

129
00:07:18,847 --> 00:07:20,048
They're high priority smart terrains

130
00:07:20,048 --> 00:07:21,988
and they have long cool downs

131
00:07:21,988 --> 00:07:23,748
and they're either placed on the critical path

132
00:07:23,748 --> 00:07:26,129
or have pickups near them to entice the player

133
00:07:26,129 --> 00:07:27,709
to walk over there.

134
00:07:27,709 --> 00:07:28,550
Okay, last example.

135
00:07:28,550 --> 00:07:30,290
Who remembers Liz making shadow puppets

136
00:07:30,290 --> 00:07:31,950
in the lamp light in Soldier's Field?

137
00:07:31,950 --> 00:07:32,130
Even fewer.

138
00:07:32,130 --> 00:07:32,230
Great.

139
00:07:32,230 --> 00:07:34,131
Again, this is entirely systemic

140
00:07:34,131 --> 00:07:39,352
but it's a little bit off the beaten path

141
00:07:39,352 --> 00:07:40,092
and lower in priority.

142
00:07:41,647 --> 00:07:44,628
And these are all great little moments, but ultimately they're fleeting.

143
00:07:44,628 --> 00:07:48,149
So, how can we keep Liz engaged over longer periods of time?

144
00:07:48,149 --> 00:07:52,650
Well, we just cover the levels in these smart objects.

145
00:07:52,650 --> 00:07:58,812
And then we let the systems decide how to strike a balance between active and idle.

146
00:07:58,812 --> 00:08:04,093
This is a video that shows the smart terrain placement in a level of Bioshock Infinite.

147
00:08:04,093 --> 00:08:07,314
All the green meshes and diamonds are smart terrains.

148
00:08:07,314 --> 00:08:07,654
So, wait a second.

149
00:08:11,519 --> 00:08:17,042
We're just going to saturate our levels with smart terrain and let Liz decide what's going to happen?

150
00:08:17,042 --> 00:08:17,282
Yes.

151
00:08:17,282 --> 00:08:20,884
If this is going to work out at all,

152
00:08:20,884 --> 00:08:24,226
you have to be comfortable with a little bit of uncertainty.

153
00:08:24,226 --> 00:08:26,528
Not everyone's going to see everything,

154
00:08:26,528 --> 00:08:28,829
and for each of these smart terrains,

155
00:08:28,829 --> 00:08:30,230
sometimes Liz will use it and sometimes she won't.

156
00:08:30,230 --> 00:08:32,851
You just have to be okay with that.

157
00:08:32,851 --> 00:08:36,433
A guaranteed scripted moment is the enemy of interactivity and variety.

158
00:08:36,433 --> 00:08:40,275
And those are the things that are really going to prop up an AI's illusion of life.

159
00:08:41,463 --> 00:08:45,825
That doesn't mean that every single action the AI makes has to be left up to the system,

160
00:08:45,825 --> 00:08:50,168
but overall it will be a more convincing performance if the majority of it is.

161
00:08:50,168 --> 00:08:53,790
And I think as a player, you really do feel the difference between

162
00:08:53,790 --> 00:08:56,271
a scripted setup and something that happens opportunistically.

163
00:08:56,271 --> 00:09:00,253
Something that the character decides to do, and decides to stop doing, too.

164
00:09:00,253 --> 00:09:04,016
Liz will dance for eternity if you let her,

165
00:09:04,016 --> 00:09:07,117
and after a few minutes you kind of stop believing in her as a character.

166
00:09:07,117 --> 00:09:10,219
You remember that she's just an AI in this game that you're playing.

167
00:09:11,574 --> 00:09:15,015
But if you stumble upon something like the skipping stones or shadow puppets,

168
00:09:15,015 --> 00:09:18,876
it feels like a stolen moment. It's private and special in some way.

169
00:09:18,876 --> 00:09:21,637
And that subconscious notion that not every other player saw what you just saw,

170
00:09:21,637 --> 00:09:23,917
I think, makes it even more personal and makes the character even more real.

171
00:09:23,917 --> 00:09:25,998
Fortunately, whether or not a given player sees any of these systems-driven moments

172
00:09:25,998 --> 00:09:26,438
isn't just dumb luck.

173
00:09:35,185 --> 00:09:37,747
Liz is not picking things at random out of some weird,

174
00:09:37,747 --> 00:09:39,129
invisible smart terrain hat.

175
00:09:39,129 --> 00:09:42,592
She's using systems, but that doesn't

176
00:09:42,592 --> 00:09:44,373
mean that we're surrendering control

177
00:09:44,373 --> 00:09:45,814
in the name of robustness.

178
00:09:45,814 --> 00:09:47,956
It just means it requires a different approach.

179
00:09:47,956 --> 00:09:52,019
The system had rules for which smart terrains to consider,

180
00:09:52,019 --> 00:09:53,361
and each smart terrain has data on it that

181
00:09:53,361 --> 00:09:55,302
factors into that decision.

182
00:09:55,302 --> 00:09:59,305
How desirable it is to use, what direction it can be used from,

183
00:09:59,305 --> 00:10:00,607
and how long it goes on cool down.

184
00:10:00,607 --> 00:10:02,408
Combined with the actual placement

185
00:10:02,408 --> 00:10:03,909
of these objects in the level.

186
00:10:04,595 --> 00:10:08,797
uh, the character is able to make the most natural decision possible in all instances

187
00:10:08,797 --> 00:10:11,058
for what activity to perform. And by setting up all this data and tuning our selection

188
00:10:11,058 --> 00:10:13,959
criteria, the system drives the character's performance across the entire game, skewing

189
00:10:13,959 --> 00:10:17,040
it closer and closer to that ideal of a polished, hand-scripted sequence. For Liz, all of this

190
00:10:17,040 --> 00:10:21,302
decision making was built into her brain. But she's really only concerned with picking

191
00:10:21,302 --> 00:10:22,383
the single best option at any given time.

192
00:10:34,980 --> 00:10:38,921
On Mafia 3, we're dealing with a whole city, so we need, again, a little bit of a different approach.

193
00:10:38,921 --> 00:10:41,401
The interaction manager is our equivalent to Liz's AI.

194
00:10:41,401 --> 00:10:45,622
It's a big brain in the sky that collects all of the world interactions in the city,

195
00:10:45,622 --> 00:10:47,703
and based on similar types of data,

196
00:10:47,703 --> 00:10:52,864
picks a bunch of world interactions to turn on and populate with people from that neighborhood.

197
00:10:52,864 --> 00:10:55,325
Once the manager chooses a world interaction,

198
00:10:55,325 --> 00:10:58,946
it checks how far away it is from the player and assigns it to one of two buckets,

199
00:10:58,946 --> 00:11:00,106
out of sight or in sight.

200
00:11:01,514 --> 00:11:04,516
Out of sight is for interactions that are far enough away that

201
00:11:04,516 --> 00:11:08,718
we can spawn an AI directly into it and the player won't notice. And in sight is for

202
00:11:08,718 --> 00:11:10,780
ones that are closer to the player.

203
00:11:10,780 --> 00:11:12,821
They'll try to capture people as they're walking by.

204
00:11:12,821 --> 00:11:13,301
And often we'll restrict

205
00:11:13,301 --> 00:11:16,563
an interaction to be only available as one or the other.

206
00:11:16,563 --> 00:11:21,107
If we say something's out of sight only then

207
00:11:21,107 --> 00:11:24,749
it allows us to bring in large groups of people or large props like a band or a

208
00:11:24,749 --> 00:11:25,790
second line in the street.

209
00:11:28,413 --> 00:11:33,937
We can also use out of sight interactions to put AIs in places they can't or shouldn't walk to, like a balcony or a porch.

210
00:11:33,937 --> 00:11:41,141
On the other hand, when we limit something to being in sight only, it gives the player a chance to actually see this moment before it's complete.

211
00:11:41,141 --> 00:11:45,003
This is for things like buying drugs, or, well, trying anyhow.

212
00:11:45,003 --> 00:11:54,009
Uh, the manager load balances the relative density of out of sight and in sight interactions, making sure that there's always some of each happening in a given space.

213
00:11:55,048 --> 00:11:59,090
the out of sight interactions ensure that when the player gets there

214
00:11:59,090 --> 00:12:01,651
there's already some level of activity happening there

215
00:12:01,651 --> 00:12:05,753
you never get that moment of, oh, the player's here, quick, everyone do something

216
00:12:05,753 --> 00:12:05,913
so

217
00:12:05,913 --> 00:12:12,776
then the insight interactions again give that player that opportunity to actually

218
00:12:12,776 --> 00:12:15,857
observe people acting with intentionality

219
00:12:15,857 --> 00:12:16,858
and

220
00:12:16,858 --> 00:12:19,959
behind the scenes the manager's running timers in the background periodically

221
00:12:19,959 --> 00:12:21,140
telling people to move along

222
00:12:22,555 --> 00:12:27,039
so that we see more intentionality and get new slots open for the interactions

223
00:12:27,039 --> 00:12:28,860
to fill with new AIs doing new things.

224
00:12:28,860 --> 00:12:33,845
Because, you know, if you arrived at a location and nothing changed around you

225
00:12:33,845 --> 00:12:35,486
after standing there for twenty minutes,

226
00:12:35,486 --> 00:12:39,170
all the people around you would start to feel like animatronics.

227
00:12:40,755 --> 00:12:45,298
Disney rides deal with this by forcing you to move out of the scene and into the next one.

228
00:12:45,298 --> 00:12:50,641
But with the player in control of the camera and their movement, we don't have that luxury.

229
00:12:50,641 --> 00:12:54,583
So instead we have the manager systemically create a changing scene around you.

230
00:12:54,583 --> 00:12:58,225
Unless of course we need a static scene for gameplay reasons.

231
00:12:58,225 --> 00:13:04,990
Unfortunately, we found out that just having all of these activities available isn't quite sufficient.

232
00:13:05,805 --> 00:13:10,549
if Liz reacts to seeing a songbird toy. It doesn't do anything to make her feel alive if the

233
00:13:10,549 --> 00:13:16,873
player doesn't see it. Staring at a wall. It may as well not have happened. Our AIs again are

234
00:13:16,873 --> 00:13:21,156
performing. They need to be on stage. And for games that means in the camera frustum. But we

235
00:13:21,156 --> 00:13:25,779
don't want to grab control of the camera just to make sure that they see these moments. So how

236
00:13:25,779 --> 00:13:30,422
can we encourage the player to notice these actions that the character is taking? Well, we

237
00:13:30,422 --> 00:13:31,243
make them noisy.

238
00:13:32,442 --> 00:13:36,464
When Liz spots something exciting to her or for the player to pick up, she'll call it out.

239
00:13:36,464 --> 00:13:39,226
And when she sits on a bench, she sighs with relief.

240
00:13:39,226 --> 00:13:43,268
This can be applied to open worlds too. Like in Mafia 3,

241
00:13:43,268 --> 00:13:46,650
you hear a protest leader's VO ring out above the din of the city.

242
00:13:46,650 --> 00:13:50,833
And when we hear a sound, we just naturally want to turn and investigate the source.

243
00:13:50,833 --> 00:13:54,535
But, worst case, if for some reason the player doesn't do that,

244
00:13:54,535 --> 00:13:56,516
we're adding some life to the soundscape.

245
00:13:56,516 --> 00:13:57,117
Alright, let's talk about Idle.

246
00:14:01,442 --> 00:14:04,703
idle behaviors are not terribly sexy but oh my god they are

247
00:14:04,703 --> 00:14:10,085
important. Uh when an AI is idle is probably when they're at the

248
00:14:10,085 --> 00:14:12,726
highest risk of not feeling present in the world. And if

249
00:14:12,726 --> 00:14:15,227
those quiet moments don't work there's just no sense in

250
00:14:15,227 --> 00:14:18,589
bothering with the splashier stuff. So we need our AIs to

251
00:14:18,589 --> 00:14:21,250
stay present by constantly implying that there's something

252
00:14:21,250 --> 00:14:22,350
going on inside of their head.

253
00:14:23,300 --> 00:14:25,361
They can examine their surroundings,

254
00:14:25,361 --> 00:14:28,863
find a place to rest, fidget, or just generally exhibit

255
00:14:28,863 --> 00:14:31,405
their internal state with their body language.

256
00:14:33,077 --> 00:14:35,638
By saturating our levels with smart terrains,

257
00:14:35,638 --> 00:14:38,359
we are able to ensure that Liz never has to go too far

258
00:14:38,359 --> 00:14:40,360
to find something to occupy herself.

259
00:14:40,360 --> 00:14:42,822
And when she does decide to go and sit on a bench

260
00:14:42,822 --> 00:14:43,702
or lean on a railing,

261
00:14:43,702 --> 00:14:45,963
she'll look at the thing that she's moving towards.

262
00:14:45,963 --> 00:14:48,284
Because when you're intent on something, you look at it.

263
00:14:48,284 --> 00:14:50,205
It's just a reflex for humans.

264
00:14:50,205 --> 00:14:52,647
But we have to remember to build little things like this

265
00:14:52,647 --> 00:14:53,367
into our AI's behavior,

266
00:14:53,367 --> 00:14:56,328
because those are the things that make them feel alive.

267
00:14:58,322 --> 00:15:00,882
And when she's not using smart terrain, Liz has a look tracker system that kind of kicks in and

268
00:15:00,882 --> 00:15:01,382
keeps her present.

269
00:15:01,382 --> 00:15:03,223
She will survey the space and pick an object to look at.

270
00:15:03,223 --> 00:15:05,063
And the system boils down to a pretty simple guiding principle.

271
00:15:05,063 --> 00:15:06,144
What do humans look at and why?

272
00:15:06,144 --> 00:15:06,584
And for that matter,

273
00:15:06,584 --> 00:15:07,444
what does Liz specifically look at and why?

274
00:15:21,612 --> 00:15:25,675
Like so many other human behaviors, this principle can be described by a set of

275
00:15:25,675 --> 00:15:29,817
rules. We tend to look at things close by and we won't look at things that are

276
00:15:29,817 --> 00:15:34,240
really, really far away. We don't look at things that are behind us or way above

277
00:15:34,240 --> 00:15:38,342
us. We do look at other people, especially if they're talking, but we

278
00:15:38,342 --> 00:15:42,985
won't stare at them. We look at things that make us feel something. And unless

279
00:15:42,985 --> 00:15:46,747
it's totally fixating, we tend to not keep looking at the same thing over and

280
00:15:46,747 --> 00:15:48,408
over again or for a very long time.

281
00:15:50,772 --> 00:15:54,534
So with these rules in mind, we decided that we would make these look-at markers and

282
00:15:54,534 --> 00:15:56,255
place them all over the levels

283
00:15:56,255 --> 00:15:58,736
and attach them to characters and sound effects as well.

284
00:15:58,736 --> 00:16:00,536
Each marker,

285
00:16:00,536 --> 00:16:03,898
the eyeballs you see covering this painting here of Lady Comstock,

286
00:16:03,898 --> 00:16:08,280
had two bounding boxes. One that described what part of the object Liz could look at

287
00:16:08,280 --> 00:16:12,921
and one that described the area that she had to be inside of to be able to look at it.

288
00:16:12,921 --> 00:16:17,043
In addition, it had three important pieces of data.

289
00:16:18,059 --> 00:16:22,323
how interesting it is so that that's both how high priority it is to look at

290
00:16:22,323 --> 00:16:25,947
and how long it should hold her attention for

291
00:16:25,947 --> 00:16:26,007
uh...

292
00:16:26,007 --> 00:16:28,289
how long the cool down lasts and

293
00:16:28,289 --> 00:16:31,832
how she should feel while looking at it happy sad angry etc

294
00:16:31,832 --> 00:16:35,756
so by covering this painting with all these eyeballs

295
00:16:35,756 --> 00:16:38,078
we're basically telling Liz hey you should

296
00:16:38,078 --> 00:16:39,539
be pretty fixated on this thing

297
00:16:42,332 --> 00:16:48,015
So in addition to emoting when she's looking at stuff, Liz actually had a like full body emotion system

298
00:16:48,015 --> 00:16:53,538
that would allow us to change her animations and body language based on the narrative events as you progress through the game.

299
00:16:53,538 --> 00:16:59,782
These are just a few examples, but you can kind of see how they change her expression and her base pose and her fidgets and

300
00:16:59,782 --> 00:17:05,226
also how willing she is to look at the player. If she's pissed at you, she's upset. She's looking off to the side.

301
00:17:07,317 --> 00:17:11,058
By making a motion variance as well of some of the really common idle style smart

302
00:17:11,058 --> 00:17:17,000
terrains, we're able to expand this reflection of her internal state to

303
00:17:17,000 --> 00:17:20,361
include some of her actions. Like if she goes and sits on a bench in a huff,

304
00:17:20,361 --> 00:17:25,183
she's pissed. Alright, so what does this idle category look like for an open world

305
00:17:25,183 --> 00:17:33,146
game like Mafia 3? Well, it doesn't. Kinda. Let me explain. I mentioned earlier

306
00:17:33,146 --> 00:17:35,766
that activity and idle blend together for this sort of game.

307
00:17:36,835 --> 00:17:40,776
I just don't really find that it's worth drawing the distinction between activity and idle

308
00:17:40,776 --> 00:17:45,178
for the characters in an open world game. It's not that we don't want characters doing

309
00:17:45,178 --> 00:17:50,040
idle behaviors, it's that you're not spending enough time with these characters to really

310
00:17:50,040 --> 00:17:54,662
see the difference. If you were to take a horizontal slice of Liz's behavior across

311
00:17:54,662 --> 00:17:59,224
the entire game of Bioshock Infinite, that's basically what we want our city to look like

312
00:17:59,224 --> 00:18:00,345
at any moment. So, active, idle, whatever.

313
00:18:06,380 --> 00:18:09,942
We do need the more mundane stuff so that the more interesting stuff shines,

314
00:18:09,942 --> 00:18:13,604
but on an individual basis, AIs basically need to show up,

315
00:18:13,604 --> 00:18:15,766
do a micro-performance, and be on their way.

316
00:18:15,766 --> 00:18:19,348
By the time you come back to them, they're probably gone.

317
00:18:19,348 --> 00:18:21,549
And our goal here is to make the city feel alive.

318
00:18:21,549 --> 00:18:22,710
Bustling, in short.

319
00:18:22,710 --> 00:18:25,192
Now we have probably a hundred or more AIs in the space,

320
00:18:25,192 --> 00:18:31,536
and that means that we can't exactly afford to have like a super intense AI brain

321
00:18:31,536 --> 00:18:34,378
helping each character decide if they should be doing an active or idle thing.

322
00:18:36,184 --> 00:18:39,105
So we approach it from the other end by having objects seek out

323
00:18:39,105 --> 00:18:40,325
subjects.

324
00:18:40,325 --> 00:18:42,405
Billboards will broadcast a look at me event,

325
00:18:42,405 --> 00:18:44,285
and nearby AIs will evaluate whether or not

326
00:18:44,285 --> 00:18:46,986
they can do that, and if so, turn their head.

327
00:18:46,986 --> 00:18:51,147
World interactions spawn people directly into the interaction

328
00:18:51,147 --> 00:18:53,727
or check passersby to see if they can find

329
00:18:53,727 --> 00:18:54,547
the right person for the job.

330
00:18:54,547 --> 00:18:56,267
And there are global factors that

331
00:18:56,267 --> 00:18:58,888
are affecting this search for a participant as well.

332
00:18:58,888 --> 00:19:02,629
If it's raining, for example, a reading newspaper interaction

333
00:19:02,629 --> 00:19:03,989
will just stop looking for someone,

334
00:19:03,989 --> 00:19:05,509
because you don't read a newspaper in the rain.

335
00:19:06,708 --> 00:19:09,990
We have global cooldowns as well to kind of keep the city from becoming a broken

336
00:19:09,990 --> 00:19:15,153
record where you have racists harassing you constantly or

337
00:19:15,153 --> 00:19:16,073
a busker every five feet on Bourbon Street.

338
00:19:16,073 --> 00:19:21,076
So, Idle gets a little bit blurry for characters in an open world game but

339
00:19:21,076 --> 00:19:22,597
I think it's actually

340
00:19:22,597 --> 00:19:24,558
crystal clear on a neighborhood level.

341
00:19:24,558 --> 00:19:27,620
A neighborhood idles by having an identity,

342
00:19:27,620 --> 00:19:30,762
a specific population and type of activity that goes on there.

343
00:19:31,855 --> 00:19:35,916
For each area of the city, we're setting up data to determine the demographics there.

344
00:19:35,916 --> 00:19:37,817
Race, income, age, gender.

345
00:19:37,817 --> 00:19:41,679
The density of pedestrians and what types of people they should be.

346
00:19:41,679 --> 00:19:44,680
Office workers, tourists, junkies, hippies, you name it.

347
00:19:44,680 --> 00:19:48,001
The type and frequency of props that we give to pedestrians.

348
00:19:48,001 --> 00:19:52,003
Office workers should have a briefcase, maybe.

349
00:19:52,003 --> 00:19:55,485
The density and types of world interactions that can appear,

350
00:19:55,485 --> 00:19:56,985
which is all the activity and sort of...

351
00:19:58,008 --> 00:20:04,591
active idle stuff. And last but certainly not least, whether or not pedestrians have

352
00:20:04,591 --> 00:20:09,693
a chance to spawn drunk. As you're moving through this area, droves of civilians are

353
00:20:09,693 --> 00:20:14,816
drifting past you and you're seeing enemies doing criminal activity or whiling away their

354
00:20:14,816 --> 00:20:18,218
day. You just kind of gather a sense of what sorts of people are hanging out there and

355
00:20:18,218 --> 00:20:18,478
why.

356
00:20:20,890 --> 00:20:23,792
And regardless of whether a given AI is using a world interaction,

357
00:20:23,792 --> 00:20:26,154
they still need to be present and reactive.

358
00:20:26,154 --> 00:20:30,337
Our AIs are constantly sending messages back and forth to each other

359
00:20:30,337 --> 00:20:33,359
and evaluating whether or not they should run some reaction behavior.

360
00:20:33,359 --> 00:20:37,782
These reactions range from saying hello to someone they're walking by on the street

361
00:20:37,782 --> 00:20:39,923
to freaking out because the player's waving their gun around.

362
00:20:41,610 --> 00:20:45,132
And a large portion of these reactions are aimed at the player and the actions they take

363
00:20:45,132 --> 00:20:49,194
because those are inherently higher visibility, which, again, they're performing and we want

364
00:20:49,194 --> 00:20:51,215
them to be on stage.

365
00:20:51,215 --> 00:20:55,317
But that said, a neighborhood's pedestrian population and the reactions they have, especially

366
00:20:55,317 --> 00:21:01,461
amongst themselves, is also important because it creates this murmur of life behind the

367
00:21:01,461 --> 00:21:02,602
activities of the neighborhood.

368
00:21:02,602 --> 00:21:06,764
Without this background noise, we run the risk of the player feeling like Truman, everything

369
00:21:06,764 --> 00:21:08,025
constructed for their benefit.

370
00:21:10,098 --> 00:21:11,399
All right, conversations.

371
00:21:11,399 --> 00:21:14,882
When we're in a city, conversations contribute to that background noise.

372
00:21:14,882 --> 00:21:18,325
But they're also an important moment of performance for our characters.

373
00:21:18,325 --> 00:21:23,289
Firstly, characters should focus naturally when they're in conversation.

374
00:21:23,289 --> 00:21:26,512
And humans basically have two modes of attention

375
00:21:26,512 --> 00:21:28,814
when we're participating in a conversation, one

376
00:21:28,814 --> 00:21:31,656
for when you're the speaker and one for when you're the listener.

377
00:21:31,656 --> 00:21:33,718
When you're listening to someone speak.

378
00:21:35,107 --> 00:21:38,248
you spend almost all of your time looking at their face.

379
00:21:38,248 --> 00:21:40,889
You only let your eyes dart away briefly and every so often

380
00:21:40,889 --> 00:21:44,411
so that the intensity of your gaze doesn't become awkward.

381
00:21:44,411 --> 00:21:46,932
Your intent focus communicates that you're engaged

382
00:21:46,932 --> 00:21:48,472
in listening to their words.

383
00:21:48,472 --> 00:21:50,533
But when you're the speaker,

384
00:21:50,533 --> 00:21:51,914
you actually spend most of your time

385
00:21:51,914 --> 00:21:53,274
not looking at the other person.

386
00:21:53,274 --> 00:21:56,856
You look near them or past them,

387
00:21:56,856 --> 00:21:59,097
but you'll only periodically actually look at their faces

388
00:21:59,097 --> 00:22:01,398
to kinda clue them in, yeah, I'm still listening,

389
00:22:01,398 --> 00:22:02,378
I'm still talking to you.

390
00:22:03,372 --> 00:22:07,677
or sorry, still aware that they're listening and that you're still speaking to them.

391
00:22:07,677 --> 00:22:09,599
So besides getting their attention right,

392
00:22:09,599 --> 00:22:11,941
we want to make sure that their movements are synced up with their VO.

393
00:22:11,941 --> 00:22:17,067
And the best solution on both projects has been to give the characters a very neutral base pose

394
00:22:17,067 --> 00:22:18,468
and then tag the VO with animation.

395
00:22:20,092 --> 00:22:29,319
It's faster and more flexible than full animation, and these gesture animations are also opportunistic, so they can drop away if a higher priority animation needs to play.

396
00:22:29,319 --> 00:22:34,602
If the character needs to start moving, the gestures fall away and the head tracking remains. Show goes on.

397
00:22:34,602 --> 00:22:45,710
For open world games like Mafia III, there's actually one more piece of conversations that we really need to be worried about, and that's the content of those conversations.

398
00:22:45,710 --> 00:22:47,151
Variety here is key.

399
00:22:48,378 --> 00:22:52,260
If you hear the same dialogue over and over and over again,

400
00:22:52,260 --> 00:22:54,441
the whole city plunges into the uncanny valley.

401
00:22:54,441 --> 00:22:57,362
And of course, there's some hard limit

402
00:22:57,362 --> 00:22:59,623
on the number of lines that can be written and recorded

403
00:22:59,623 --> 00:23:01,564
and mastered and implemented.

404
00:23:01,564 --> 00:23:03,365
So we mix and match.

405
00:23:03,365 --> 00:23:05,806
The player's going to be spending a lot of hours.

406
00:23:05,806 --> 00:23:08,007
And in all likelihood, they're going

407
00:23:08,007 --> 00:23:09,547
to hear the same line twice.

408
00:23:09,547 --> 00:23:12,809
We just can't beat those odds.

409
00:23:12,809 --> 00:23:13,029
But.

410
00:23:13,798 --> 00:23:18,280
if we structure our dialogue as AB style conversations,

411
00:23:18,280 --> 00:23:22,882
then we have a pretty good chance of at least having a different response the second time they hear that line.

412
00:23:22,882 --> 00:23:28,925
So, by organizing our ambient conversation lines into these two buckets,

413
00:23:28,925 --> 00:23:35,309
where A lines are statements and are categorized by the types of responses that are reasonable to have

414
00:23:35,309 --> 00:23:37,990
for the other person, positive, negative, neutral, or laughter,

415
00:23:38,986 --> 00:23:43,948
and then the B lines are played based on which bucket of A line we selected

416
00:23:43,948 --> 00:23:48,309
we're able to get a little bit better variety, a little bit better bang for our buck.

417
00:23:48,309 --> 00:23:48,509
Locomotion.

418
00:23:48,509 --> 00:23:52,011
Locomotion is mainly an issue for characters

419
00:23:52,011 --> 00:23:57,213
that you're going to be spending a lot of time with.

420
00:23:57,213 --> 00:24:00,674
For more transient characters like pedestrians in an open world game

421
00:24:00,674 --> 00:24:04,035
they mostly just need to not look like idiots.

422
00:24:04,812 --> 00:24:08,614
as long as they avoid other people and avoid obstacles and stop to wait before

423
00:24:08,614 --> 00:24:11,635
they cross the street

424
00:24:11,635 --> 00:24:12,795
we're pretty much golden

425
00:24:12,795 --> 00:24:17,337
however for companion characters like Liz where you're going to be spending

426
00:24:17,337 --> 00:24:19,338
upwards of ten hours with them

427
00:24:19,338 --> 00:24:20,258
it's a little bit more complicated

428
00:24:20,258 --> 00:24:24,600
uh... alright so for that kind of character we need to get them on stage

429
00:24:24,600 --> 00:24:25,760
right

430
00:24:25,760 --> 00:24:29,801
locomotion provides the backbone of getting them onto the screen

431
00:24:30,823 --> 00:24:35,567
Initially, we had Liz following the player everywhere they went,

432
00:24:35,567 --> 00:24:37,989
but in early playtests, we were finding that the player would

433
00:24:37,989 --> 00:24:41,072
lose track of her basically immediately and then spin in

434
00:24:41,072 --> 00:24:44,175
circles trying to find her. And we didn't want to just

435
00:24:44,175 --> 00:24:48,539
teleport her around to keep her reliably with the player. That

436
00:24:48,539 --> 00:24:51,161
creepy Watson effect kills her as a living, physical thing

437
00:24:51,161 --> 00:24:53,783
immediately. We would still teleport her if she got super

438
00:24:53,783 --> 00:24:55,285
behind, but it was kind of a panic button.

439
00:24:56,889 --> 00:25:00,311
So instead we figured out how to get her out in front of the player.

440
00:25:00,311 --> 00:25:01,831
And you'll see that system here in this video.

441
00:25:01,831 --> 00:25:08,894
Our solution was to calculate a golden path between the player's current position and their goal.

442
00:25:08,894 --> 00:25:12,236
Because Liz had this advanced knowledge of the rough path that she would have to take,

443
00:25:12,236 --> 00:25:14,337
she was less tightly bound to the player.

444
00:25:14,337 --> 00:25:19,279
She could be a little bit more tolerant of changes to direction or speed,

445
00:25:19,279 --> 00:25:23,000
and she would always know where to go if she needed to walk out in front of the player and wait for them.

446
00:25:23,749 --> 00:25:29,211
We called this approach her goal-side behavior and found that in addition to keeping her on screen really effectively,

447
00:25:29,211 --> 00:25:32,773
it turned her into an implicit quest arrow, which was a nice side effect.

448
00:25:32,773 --> 00:25:33,153
But more than that,

449
00:25:33,153 --> 00:25:40,536
the goal-side behavior allowed us to pick really good candidate smart terrains for her performances.

450
00:25:40,536 --> 00:25:45,399
And as you can see in this video, if a smart terrain is close to Liz or it falls inside of that cone,

451
00:25:45,399 --> 00:25:49,340
then we can be reasonably sure that the player's going to see her use it.

452
00:25:50,935 --> 00:25:53,576
Now, smart trains outside of that cone can still be used,

453
00:25:53,576 --> 00:25:54,476
especially if they're high priority.

454
00:25:54,476 --> 00:25:57,638
But we're trying not to distract her too much from her efforts

455
00:25:57,638 --> 00:25:59,158
to stay goal side, because that's priority one.

456
00:25:59,158 --> 00:26:00,919
Because the player is facing forward,

457
00:26:00,919 --> 00:26:03,520
they're generally going to be moving towards their goal.

458
00:26:03,520 --> 00:26:05,341
And at worst, if the player is speeding along

459
00:26:05,341 --> 00:26:06,982
and Liz can't stop and use a smart train,

460
00:26:06,982 --> 00:26:09,743
she'll stay alive by looking around at the various look

461
00:26:09,743 --> 00:26:10,643
at markers in the space.

462
00:26:10,643 --> 00:26:10,963
All right.

463
00:26:10,963 --> 00:26:12,964
This final section is probably also the most familiar

464
00:26:12,964 --> 00:26:13,505
to a lot of you.

465
00:26:13,505 --> 00:26:14,085
Combat.

466
00:26:21,719 --> 00:26:26,461
And there's a ton to talk about with combat AI, but I'm short on time, and there are definitely

467
00:26:26,461 --> 00:26:30,643
AI programmers who could do a better job. So I'll just talk briefly about non-combatants

468
00:26:30,643 --> 00:26:35,825
like Liz. At first we were also trying to keep her on screen during combat. She would

469
00:26:35,825 --> 00:26:40,367
run through the line of fire just to take exposed cover. She just seemed completely

470
00:26:40,367 --> 00:26:41,688
unaware of what was going on around her.

471
00:26:43,255 --> 00:26:45,757
Quickly though, we realized that during the fight,

472
00:26:45,757 --> 00:26:48,719
the player doesn't really care about where Liz is.

473
00:26:48,719 --> 00:26:50,980
They're way more interested in putting bullets

474
00:26:50,980 --> 00:26:52,381
into their enemies.

475
00:26:52,381 --> 00:26:56,644
So we changed her behavior to just kind of get her safely

476
00:26:56,644 --> 00:26:58,346
out of the way above all else.

477
00:26:58,346 --> 00:27:00,307
That doesn't mean she's off the hook though.

478
00:27:00,307 --> 00:27:01,888
The danger is real for the player,

479
00:27:01,888 --> 00:27:02,889
and she should reflect that.

480
00:27:05,257 --> 00:27:08,938
the way that we got her to kind of reflect this sense of danger was

481
00:27:08,938 --> 00:27:12,380
she would sort of peek out from cover periodically, flinch if gunshots landed

482
00:27:12,380 --> 00:27:13,581
nearby

483
00:27:13,581 --> 00:27:16,602
and if her position got compromised she would

484
00:27:16,602 --> 00:27:17,443
leave it

485
00:27:17,443 --> 00:27:18,844
and run with her

486
00:27:18,844 --> 00:27:21,065
hands covering her head

487
00:27:21,065 --> 00:27:22,045
trying to protect herself

488
00:27:23,785 --> 00:27:26,587
She also had a few functional combat behaviors.

489
00:27:26,587 --> 00:27:30,770
She would call out dangerous enemies and toss ammo and health to the player at critical moments.

490
00:27:30,770 --> 00:27:32,110
She had your back.

491
00:27:32,110 --> 00:27:34,692
And better yet, we were actually finding that players would

492
00:27:34,692 --> 00:27:37,434
invent stories about what Liz was doing when she was off screen.

493
00:27:37,434 --> 00:27:42,437
She was scouring the battlefield and finding resources just to help them out.

494
00:27:42,437 --> 00:27:44,879
Never mind that she wasn't doing any of that,

495
00:27:44,879 --> 00:27:49,182
her performance was overall convincing enough that people were augmenting it of their own volition.

496
00:27:49,182 --> 00:27:51,043
Exactly what we want.

497
00:27:51,878 --> 00:27:56,539
And the final piece of Liz's combat performance actually comes after combat is over.

498
00:27:56,539 --> 00:28:03,841
We were finding during development that the combats were lasting long enough that all of her smart terrain cooldowns finished

499
00:28:03,841 --> 00:28:09,403
and she would just pop out of her cover pose and saunter over to some world in her, or sorry, smart terrain.

500
00:28:09,403 --> 00:28:13,284
Totally not phased by the carnage she just experienced.

501
00:28:14,740 --> 00:28:17,121
So to address this, we created a special motion we called

502
00:28:17,121 --> 00:28:18,221
After Combat Emotion.

503
00:28:18,221 --> 00:28:19,722
It would make her a little bit somber

504
00:28:19,722 --> 00:28:22,662
and prevent her from using smart trains for a little while.

505
00:28:22,662 --> 00:28:23,503
Much, much better.

506
00:28:23,503 --> 00:28:24,043
All right.

507
00:28:24,043 --> 00:28:26,243
Quick recap.

508
00:28:26,243 --> 00:28:30,704
If a world without AIs is a dead world,

509
00:28:30,704 --> 00:28:33,685
then so too is a world with AIs that don't convince you

510
00:28:33,685 --> 00:28:34,705
of their humanity.

511
00:28:34,705 --> 00:28:37,306
And humanity is not a declaration.

512
00:28:37,306 --> 00:28:39,247
It's a collection of hints taken in aggregate

513
00:28:39,247 --> 00:28:41,327
that make it apparent to others that we're alive.

514
00:28:42,834 --> 00:28:49,377
To figure out what these hints should be, observe your daily life. Notice the ways that your

515
00:28:49,377 --> 00:28:55,480
attention falls as you're in conversation or looking around your room. Notice the way that

516
00:28:55,480 --> 00:29:00,083
you move with purpose towards your goal. That you always find something to do, even when

517
00:29:00,083 --> 00:29:04,745
you're doing nothing at all. And each of these individual behaviors, whether they're in action,

518
00:29:04,745 --> 00:29:09,127
in idle, in conversation, in locomotion, or in combat, can be described by systems.

519
00:29:10,242 --> 00:29:14,264
And these systems communicate to the player through body language, vocalizations, and

520
00:29:14,264 --> 00:29:18,505
a strict adherence to the laws of physics. The player develops a sense that they're

521
00:29:18,505 --> 00:29:23,567
surrounded by living things. These are the systems that are the heart of your life and

522
00:29:23,567 --> 00:29:26,208
your level. And they never stop. If an AI's performance ever falters, they die in that

523
00:29:26,208 --> 00:29:30,110
moment. Always be performing. Alright, that's it. Thanks everyone for coming.

524
00:29:46,017 --> 00:29:49,099
If you do want to see some other really great talks that are

525
00:29:49,099 --> 00:29:52,321
about similar topics, check these three out.

526
00:29:52,321 --> 00:29:53,722
They're all about an hour long.

527
00:29:53,722 --> 00:29:54,563
They're really solid.

528
00:29:54,563 --> 00:29:58,345
And thanks to John Abercrombie and Sean Robertson, to the

529
00:29:58,345 --> 00:30:00,967
guys up there, for sending me their old Liz videos.

530
00:30:00,967 --> 00:30:01,587
Have a great ADC.

